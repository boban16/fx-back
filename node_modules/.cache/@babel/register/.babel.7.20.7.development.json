{"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _api = _interopRequireDefault(require(\"./router/api\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\napp.use(_express[\"default\"].json());\napp.use(_express[\"default\"].urlencoded({\n  extended: true\n}));\napp.use('/apiBack/', _api[\"default\"]);\napp.get('/', function (req, res) {\n  res.status(200).json({\n    message: \"Welcome to Express\"\n  });\n});\napp.listen(8000, function () {\n  return console.log('Server running at 8000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJhcGkiLCJnZXQiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJtZXNzYWdlIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3N2aWx1cHBvL0RvY3VtZW50cy9TdmlsdXBwbyBKYXZhc2NyaXB0L2Z4QmFja1YxLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb3JzIGZyb20gJ2NvcnMnXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBhcGkgZnJvbSAnLi9yb3V0ZXIvYXBpJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnVzZShjb3JzKCkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuXG5hcHAudXNlKCcvYXBpQmFjay8nLCBhcGkpXG5cbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIG1lc3NhZ2U6IFwiV2VsY29tZSB0byBFeHByZXNzXCJcbiAgfSk7XG59KVxuXG5hcHAubGlzdGVuKDgwMDAsICgpID0+IGNvbnNvbGUubG9nKCdTZXJ2ZXIgcnVubmluZyBhdCA4MDAwJykpO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUErQjtBQUUvQixJQUFNQSxHQUFHLEdBQUcsSUFBQUMsbUJBQU8sR0FBRTtBQUNyQkQsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUMsZ0JBQUksR0FBRSxDQUFDO0FBRWZILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDRCxtQkFBTyxDQUFDRyxJQUFJLEVBQUUsQ0FBQztBQUN2QkosR0FBRyxDQUFDRSxHQUFHLENBQUNELG1CQUFPLENBQUNJLFVBQVUsQ0FBQztFQUFFQyxRQUFRLEVBQUU7QUFBSyxDQUFDLENBQUMsQ0FBQztBQUUvQ04sR0FBRyxDQUFDRSxHQUFHLENBQUMsV0FBVyxFQUFFSyxlQUFHLENBQUM7QUFFekJQLEdBQUcsQ0FBQ1EsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBSztFQUN6QkEsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNQLElBQUksQ0FBQztJQUNuQlEsT0FBTyxFQUFFO0VBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUZaLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDLElBQUksRUFBRTtFQUFBLE9BQU1DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QixDQUFDO0FBQUEsRUFBQyJ9","map":{"version":3,"names":["app","express","use","cors","json","urlencoded","extended","api","get","req","res","status","message","listen","console","log"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/","sources":["app.js"],"sourcesContent":["import cors from 'cors'\nimport express from 'express';\nimport api from './router/api';\n\nconst app = express();\napp.use(cors());\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\napp.use('/apiBack/', api)\n\napp.get('/', (req, res) => {\n  res.status(200).json({\n    message: \"Welcome to Express\"\n  });\n})\n\napp.listen(8000, () => console.log('Server running at 8000'));\n"],"mappings":";;AAAA;AACA;AACA;AAA+B;AAE/B,IAAMA,GAAG,GAAG,IAAAC,mBAAO,GAAE;AACrBD,GAAG,CAACE,GAAG,CAAC,IAAAC,gBAAI,GAAE,CAAC;AAEfH,GAAG,CAACE,GAAG,CAACD,mBAAO,CAACG,IAAI,EAAE,CAAC;AACvBJ,GAAG,CAACE,GAAG,CAACD,mBAAO,CAACI,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAE/CN,GAAG,CAACE,GAAG,CAAC,WAAW,EAAEK,eAAG,CAAC;AAEzBP,GAAG,CAACQ,GAAG,CAAC,GAAG,EAAE,UAACC,GAAG,EAAEC,GAAG,EAAK;EACzBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;IACnBQ,OAAO,EAAE;EACX,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFZ,GAAG,CAACa,MAAM,CAAC,IAAI,EAAE;EAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;AAAA,EAAC"}},"mtime":1674834887289},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/router/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/router/api.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _mongoDB = require(\"../lib/mongoDB\");\nvar _rest = require(\"../lib/rest\");\nvar _igTradingApi = require(\"ig-trading-api\");\nvar _restV = require(\"../lib/restV3\");\nvar _lightstreamer = require(\"../lib/lightstreamer2\");\nvar _lightstreamer2 = require(\"../lib/lightstreamer\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _momentTimezone = _interopRequireDefault(require(\"moment-timezone\"));\nvar _axios = _interopRequireDefault(require(\"axios\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar router = _express[\"default\"].Router();\nrouter.get('/start/:id', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var accountId, accountData, response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          accountId = req.params.id; // recupero dal db le informazioni relative all'utente accountId\n          _context.next = 3;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 3:\n          accountData = _context.sent;\n          _context.next = 6;\n          return (0, _lightstreamer2.lightstreamer)(accountData);\n        case 6:\n          response = _context.sent;\n          if (response) {\n            console.log(\"avvio lightstreamer\");\n          }\n          res.send(response);\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.get('/start2/:id', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var accountId, accountData, response;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          accountId = req.params.id; // recupero dal db le informazioni relative all'utente accountId\n          _context2.next = 3;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 3:\n          accountData = _context2.sent;\n          _context2.next = 6;\n          return (0, _lightstreamer.lightstreamer2)(accountData);\n        case 6:\n          response = _context2.sent;\n          if (response) {\n            console.log(\"avvio lightstreamer2\");\n          }\n          res.send(response);\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nrouter.get('/watchList/:id', /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var accountId, accountData, watchlist, igActivities;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          accountId = req.params.id;\n          _context3.prev = 1;\n          _context3.next = 4;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 4:\n          accountData = _context3.sent;\n          _context3.next = 7;\n          return (0, _mongoDB.getSetting)(accountData.id);\n        case 7:\n          watchlist = _context3.sent;\n          _context3.next = 10;\n          return (0, _mongoDB.getAllIgActivities)(accountData);\n        case 10:\n          igActivities = _context3.sent;\n          res.send({\n            list: watchlist,\n            ig: igActivities\n          });\n          _context3.next = 17;\n          break;\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3[\"catch\"](1);\n          res.send(_context3.t0);\n        case 17:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 14]]);\n  }));\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\n\n/*router.get('/updateWatchList/:id', async function(req, res) {\n  const accountId = req.params.id;\n\n  const accountData = await userFindOne(accountId)\n  if (accountData){\n    const watchlist = await getCompleteWatchlist(accountData)\n    console.log(watchlist.data.markets)\n    res.send(watchlist.data.markets)\n    return null\n  }\n  res.send(\"ok\")\n})*/\n\nrouter.get('/getSettings/:id', /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var accountId, resSettings, resUser;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          accountId = req.params.id;\n          _context4.next = 3;\n          return (0, _mongoDB.getSettings)();\n        case 3:\n          resSettings = _context4.sent;\n          _context4.next = 6;\n          return (0, _mongoDB.getUser)();\n        case 6:\n          resUser = _context4.sent;\n          res.send(resUser);\n        case 8:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nrouter.post('/updateSettings/:id', /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var accountId, settings, accountData, resSettings;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          accountId = req.params.id;\n          settings = req.body;\n          _context5.next = 4;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 4:\n          accountData = _context5.sent;\n          _context5.next = 7;\n          return (0, _mongoDB.updateAccountSettings)(accountData._id, settings);\n        case 7:\n          resSettings = _context5.sent;\n          res.send(resSettings);\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function (_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nrouter.post('/openCrossOrders/:id', /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var accountId, ordersToOpen, accountData, userSettings, crossConfigList, step0Response;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          accountId = req.params.id;\n          ordersToOpen = req.body; // recupero dal db le informazioni relative all'utente accountId\n          _context6.next = 4;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 4:\n          accountData = _context6.sent;\n          _context6.next = 7;\n          return (0, _mongoDB.getSetting)(accountData._id);\n        case 7:\n          userSettings = _context6.sent;\n          // recupero da settings la configurazione dei cross da aprire\n          crossConfigList = userSettings.watchlist.filter(function (row) {\n            return ordersToOpen.epic.includes(row.epic);\n          }); // avvio i vari cross\n          _context6.next = 11;\n          return (0, _restV.step0)(accountData, crossConfigList);\n        case 11:\n          step0Response = _context6.sent;\n          res.send(step0Response);\n        case 13:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function (_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nrouter.post('/modificaPip/:id', /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var accountId, percentage, accountData, response, igResponse, _iterator, _step, _res;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          accountId = req.params.id;\n          percentage = req.body.percentage; // recupero dal db le informazioni relative all'utente accountId\n          _context7.next = 4;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 4:\n          accountData = _context7.sent;\n          _context7.next = 7;\n          return (0, _mongoDB.getAllIgActivities)(accountData._id);\n        case 7:\n          response = _context7.sent;\n          igResponse = [];\n          _iterator = _createForOfIteratorHelper(response);\n          _context7.prev = 10;\n          _iterator.s();\n        case 12:\n          if ((_step = _iterator.n()).done) {\n            _context7.next = 22;\n            break;\n          }\n          _res = _step.value;\n          _res.config.percentage = percentage;\n          _context7.t0 = igResponse;\n          _context7.next = 18;\n          return (0, _mongoDB.newIgActivity)(accountData, _res.step, _res.epic, _res.config, _res.orders, _res.positions);\n        case 18:\n          _context7.t1 = _context7.sent;\n          _context7.t0.push.call(_context7.t0, _context7.t1);\n        case 20:\n          _context7.next = 12;\n          break;\n        case 22:\n          _context7.next = 27;\n          break;\n        case 24:\n          _context7.prev = 24;\n          _context7.t2 = _context7[\"catch\"](10);\n          _iterator.e(_context7.t2);\n        case 27:\n          _context7.prev = 27;\n          _iterator.f();\n          return _context7.finish(27);\n        case 30:\n          res.send(igResponse);\n        case 31:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[10, 24, 27, 30]]);\n  }));\n  return function (_x13, _x14) {\n    return _ref7.apply(this, arguments);\n  };\n}());\nrouter.post('/closeSelected/:id', /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res) {\n    var accountId, epicToClose, accountData, client, igResponse;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          accountId = req.params.id;\n          epicToClose = req.body;\n          _context8.next = 4;\n          return (0, _mongoDB.userFindOne)(accountId);\n        case 4:\n          accountData = _context8.sent;\n          // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context8.next = 8;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 8:\n          _context8.next = 10;\n          return (0, _rest.closeActivity)(client, accountData, epicToClose.epic);\n        case 10:\n          igResponse = _context8.sent;\n          res.send(igResponse);\n        case 12:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return function (_x15, _x16) {\n    return _ref8.apply(this, arguments);\n  };\n}());\nrouter.post('/newUser', /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(req, res) {\n    var userData, resUser;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          userData = req.body;\n          _context9.next = 3;\n          return (0, _mongoDB.newUser)(userData);\n        case 3:\n          resUser = _context9.sent;\n          res.send(resUser);\n        case 5:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return function (_x17, _x18) {\n    return _ref9.apply(this, arguments);\n  };\n}());\nrouter.post('/test', /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(req, res) {\n    var _req$body, epic, timeframe, count, url, config, candles, result;\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          _req$body = req.body, epic = _req$body.epic, timeframe = _req$body.timeframe, count = _req$body.count;\n          url = 'https://api-fxpractice.oanda.com/v3/accounts/101-012-21964238-001/instruments/' + epic + '/candles?count=' + count + '&granularity=' + timeframe;\n          config = {\n            headers: {\n              Authorization: \"Bearer 396fc7161db2ff744bce7b0873bcdd97-1c1c0bd0e77d80bd4e8e74b5c21970d2\"\n            }\n          };\n          _context10.prev = 3;\n          _context10.next = 6;\n          return _axios[\"default\"].get(url, config);\n        case 6:\n          candles = _context10.sent;\n          result = getSupportResistance(candles.data.candles, candles.data.candles.length);\n          res.send(result);\n          _context10.next = 14;\n          break;\n        case 11:\n          _context10.prev = 11;\n          _context10.t0 = _context10[\"catch\"](3);\n          res.send(_context10.t0.response.data);\n        case 14:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10, null, [[3, 11]]);\n  }));\n  return function (_x19, _x20) {\n    return _ref10.apply(this, arguments);\n  };\n}());\nmodule.exports = router;\nfunction calculateSupportResistance(candles, period) {\n  var closePrices = candles.slice(-period).map(function (candle) {\n    return parseFloat(candle.mid.c);\n  });\n  var mean = closePrices.reduce(function (a, b) {\n    return a + b;\n  }) / period;\n  var sortedPrices = closePrices.sort(function (a, b) {\n    return a - b;\n  });\n  var q1 = sortedPrices[Math.floor(period / 4)];\n  var q3 = sortedPrices[Math.ceil(3 * period / 4)];\n  var iqr = q3 - q1;\n  var support = mean - iqr;\n  var resistance = mean + iqr;\n  return {\n    support: support,\n    resistance: resistance\n  };\n}\nfunction getSupportResistance(candles, lookback) {\n  var support = {};\n  var resistance = {};\n  for (var i = 0; i < candles.length; i++) {\n    var candle = candles[i];\n    var low = parseFloat(candle.mid.l);\n    var high = parseFloat(candle.mid.h);\n    for (var j = i - lookback; j < i; j++) {\n      if (j < 0) {\n        continue;\n      }\n      var prevCandle = candles[j];\n      var prevLow = parseFloat(prevCandle.mid.l);\n      var prevHigh = parseFloat(prevCandle.mid.h);\n      if (prevLow > low) {\n        if (!support[low]) {\n          support[low] = 1;\n        } else {\n          support[low]++;\n        }\n      } else if (prevHigh < high) {\n        if (!resistance[high]) {\n          resistance[high] = 1;\n        } else {\n          resistance[high]++;\n        }\n      }\n    }\n  }\n  var sortedSupport = Object.keys(support).sort(function (a, b) {\n    return support[b] - support[a];\n  });\n  var sortedResistance = Object.keys(resistance).sort(function (a, b) {\n    return resistance[b] - resistance[a];\n  });\n  var strongestSupport = sortedSupport[0];\n  var strongestResistance = sortedResistance[0];\n  return {\n    resistance: parseFloat(strongestResistance),\n    support: parseFloat(strongestSupport)\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwiYWNjb3VudElkIiwicGFyYW1zIiwiaWQiLCJ1c2VyRmluZE9uZSIsImFjY291bnREYXRhIiwibGlnaHRzdHJlYW1lciIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJsaWdodHN0cmVhbWVyMiIsImdldFNldHRpbmciLCJ3YXRjaGxpc3QiLCJnZXRBbGxJZ0FjdGl2aXRpZXMiLCJpZ0FjdGl2aXRpZXMiLCJsaXN0IiwiaWciLCJnZXRTZXR0aW5ncyIsInJlc1NldHRpbmdzIiwiZ2V0VXNlciIsInJlc1VzZXIiLCJwb3N0Iiwic2V0dGluZ3MiLCJib2R5IiwidXBkYXRlQWNjb3VudFNldHRpbmdzIiwiX2lkIiwib3JkZXJzVG9PcGVuIiwidXNlclNldHRpbmdzIiwiY3Jvc3NDb25maWdMaXN0IiwiZmlsdGVyIiwicm93IiwiZXBpYyIsImluY2x1ZGVzIiwic3RlcDAiLCJzdGVwMFJlc3BvbnNlIiwicGVyY2VudGFnZSIsImlnUmVzcG9uc2UiLCJjb25maWciLCJuZXdJZ0FjdGl2aXR5Iiwic3RlcCIsIm9yZGVycyIsInBvc2l0aW9ucyIsInB1c2giLCJlcGljVG9DbG9zZSIsImNsaWVudCIsIkFQSUNsaWVudCIsIlVSTF9ERU1PIiwiYXBpS2V5IiwicmVzdCIsImxvZ2luIiwiY3JlYXRlU2Vzc2lvbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJjbG9zZUFjdGl2aXR5IiwidXNlckRhdGEiLCJuZXdVc2VyIiwidGltZWZyYW1lIiwiY291bnQiLCJ1cmwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImF4aW9zIiwiY2FuZGxlcyIsInJlc3VsdCIsImdldFN1cHBvcnRSZXNpc3RhbmNlIiwiZGF0YSIsImxlbmd0aCIsIm1vZHVsZSIsImV4cG9ydHMiLCJjYWxjdWxhdGVTdXBwb3J0UmVzaXN0YW5jZSIsInBlcmlvZCIsImNsb3NlUHJpY2VzIiwic2xpY2UiLCJtYXAiLCJjYW5kbGUiLCJwYXJzZUZsb2F0IiwibWlkIiwiYyIsIm1lYW4iLCJyZWR1Y2UiLCJhIiwiYiIsInNvcnRlZFByaWNlcyIsInNvcnQiLCJxMSIsIk1hdGgiLCJmbG9vciIsInEzIiwiY2VpbCIsImlxciIsInN1cHBvcnQiLCJyZXNpc3RhbmNlIiwibG9va2JhY2siLCJpIiwibG93IiwibCIsImhpZ2giLCJoIiwiaiIsInByZXZDYW5kbGUiLCJwcmV2TG93IiwicHJldkhpZ2giLCJzb3J0ZWRTdXBwb3J0IiwiT2JqZWN0Iiwia2V5cyIsInNvcnRlZFJlc2lzdGFuY2UiLCJzdHJvbmdlc3RTdXBwb3J0Iiwic3Ryb25nZXN0UmVzaXN0YW5jZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3N2aWx1cHBvL0RvY3VtZW50cy9TdmlsdXBwbyBKYXZhc2NyaXB0L2Z4QmFja1YxL3JvdXRlci8iLCJzb3VyY2VzIjpbImFwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHtcbiAgZ2V0QWxsSWdBY3Rpdml0aWVzLFxuICBnZXRTZXR0aW5nLFxuICBnZXRTZXR0aW5ncyxcbiAgZ2V0VXNlciwgbmV3SWdBY3Rpdml0eSxcbiAgbmV3VXNlcixcbiAgdXBkYXRlQWNjb3VudFNldHRpbmdzLFxuICB1c2VyRmluZE9uZVxufSBmcm9tIFwiLi4vbGliL21vbmdvREJcIjtcbmltcG9ydCB7Y2xvc2VBY3Rpdml0eX0gZnJvbSBcIi4uL2xpYi9yZXN0XCI7XG5pbXBvcnQge0FQSUNsaWVudH0gZnJvbSBcImlnLXRyYWRpbmctYXBpXCI7XG5pbXBvcnQge3N0ZXAwfSBmcm9tIFwiLi4vbGliL3Jlc3RWM1wiO1xuaW1wb3J0IHtsaWdodHN0cmVhbWVyMn0gZnJvbSBcIi4uL2xpYi9saWdodHN0cmVhbWVyMlwiO1xuaW1wb3J0IHtsaWdodHN0cmVhbWVyfSBmcm9tIFwiLi4vbGliL2xpZ2h0c3RyZWFtZXJcIjtcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xuaW1wb3J0IG1vbWVudFRpbWVab25lIGZyb20gXCJtb21lbnQtdGltZXpvbmVcIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuXG5yb3V0ZXIuZ2V0KCcvc3RhcnQvOmlkJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc3QgYWNjb3VudElkID0gcmVxLnBhcmFtcy5pZDtcbiAgLy8gcmVjdXBlcm8gZGFsIGRiIGxlIGluZm9ybWF6aW9uaSByZWxhdGl2ZSBhbGwndXRlbnRlIGFjY291bnRJZFxuICBjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IHVzZXJGaW5kT25lKGFjY291bnRJZClcbiAgLy8gcXVpbmRpIGF2dmlvIHN1IGlnIHVubyBzdHJlYW1lciBjaGUgZ2VzdGlyw6AgdHV0dGkgZ2xpIGV2ZW50aSBsYW5jaWF0aSBkYWxsYSBwaWF0dGFmb3JtYVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxpZ2h0c3RyZWFtZXIoYWNjb3VudERhdGEpXG5cbiAgaWYgKHJlc3BvbnNlKXtcbiAgICBjb25zb2xlLmxvZyhcImF2dmlvIGxpZ2h0c3RyZWFtZXJcIilcbiAgfVxuXG4gIHJlcy5zZW5kKHJlc3BvbnNlKVxufSk7XG5cbnJvdXRlci5nZXQoJy9zdGFydDIvOmlkJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc3QgYWNjb3VudElkID0gcmVxLnBhcmFtcy5pZDtcbiAgLy8gcmVjdXBlcm8gZGFsIGRiIGxlIGluZm9ybWF6aW9uaSByZWxhdGl2ZSBhbGwndXRlbnRlIGFjY291bnRJZFxuICBjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IHVzZXJGaW5kT25lKGFjY291bnRJZClcbiAgLy8gcXVpbmRpIGF2dmlvIHN1IGlnIHVubyBzdHJlYW1lciBjaGUgZ2VzdGlyw6AgdHV0dGkgZ2xpIGV2ZW50aSBsYW5jaWF0aSBkYWxsYSBwaWF0dGFmb3JtYVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxpZ2h0c3RyZWFtZXIyKGFjY291bnREYXRhKVxuXG4gIGlmIChyZXNwb25zZSl7XG4gICAgY29uc29sZS5sb2coXCJhdnZpbyBsaWdodHN0cmVhbWVyMlwiKVxuICB9XG5cbiAgcmVzLnNlbmQocmVzcG9uc2UpXG59KTtcblxuXG5yb3V0ZXIuZ2V0KCcvd2F0Y2hMaXN0LzppZCcsIGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGFjY291bnRJZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgdHJ5e1xuICAgIGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgdXNlckZpbmRPbmUoYWNjb3VudElkKVxuICAgIGNvbnN0IHdhdGNobGlzdCA9IGF3YWl0IGdldFNldHRpbmcoYWNjb3VudERhdGEuaWQpXG4gICAgY29uc3QgaWdBY3Rpdml0aWVzID0gYXdhaXQgZ2V0QWxsSWdBY3Rpdml0aWVzKGFjY291bnREYXRhKVxuICAgIHJlcy5zZW5kKHtsaXN0OiB3YXRjaGxpc3QsIGlnOiBpZ0FjdGl2aXRpZXN9KVxuICB9Y2F0Y2ggKGVycil7XG4gICAgcmVzLnNlbmQoZXJyKVxuICB9XG59KVxuXG4vKnJvdXRlci5nZXQoJy91cGRhdGVXYXRjaExpc3QvOmlkJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc3QgYWNjb3VudElkID0gcmVxLnBhcmFtcy5pZDtcblxuICBjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IHVzZXJGaW5kT25lKGFjY291bnRJZClcbiAgaWYgKGFjY291bnREYXRhKXtcbiAgICBjb25zdCB3YXRjaGxpc3QgPSBhd2FpdCBnZXRDb21wbGV0ZVdhdGNobGlzdChhY2NvdW50RGF0YSlcbiAgICBjb25zb2xlLmxvZyh3YXRjaGxpc3QuZGF0YS5tYXJrZXRzKVxuICAgIHJlcy5zZW5kKHdhdGNobGlzdC5kYXRhLm1hcmtldHMpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXMuc2VuZChcIm9rXCIpXG59KSovXG5cbnJvdXRlci5nZXQoJy9nZXRTZXR0aW5ncy86aWQnLCBhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICBjb25zdCBhY2NvdW50SWQgPSByZXEucGFyYW1zLmlkO1xuXG4gIGNvbnN0IHJlc1NldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKVxuICBjb25zdCByZXNVc2VyID0gYXdhaXQgZ2V0VXNlcigpXG5cbiAgcmVzLnNlbmQocmVzVXNlcilcbn0pXG5cbnJvdXRlci5wb3N0KCcvdXBkYXRlU2V0dGluZ3MvOmlkJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc3QgYWNjb3VudElkID0gcmVxLnBhcmFtcy5pZDtcbiAgY29uc3Qgc2V0dGluZ3MgPSByZXEuYm9keVxuXG4gIGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgdXNlckZpbmRPbmUoYWNjb3VudElkKVxuXG4gIGNvbnN0IHJlc1NldHRpbmdzID0gYXdhaXQgdXBkYXRlQWNjb3VudFNldHRpbmdzKGFjY291bnREYXRhLl9pZCwgc2V0dGluZ3MpXG5cbiAgcmVzLnNlbmQocmVzU2V0dGluZ3MpXG59KVxuXG5yb3V0ZXIucG9zdCgnL29wZW5Dcm9zc09yZGVycy86aWQnLCBhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICBjb25zdCBhY2NvdW50SWQgPSByZXEucGFyYW1zLmlkO1xuICBjb25zdCBvcmRlcnNUb09wZW4gPSByZXEuYm9keVxuXG4gIC8vIHJlY3VwZXJvIGRhbCBkYiBsZSBpbmZvcm1hemlvbmkgcmVsYXRpdmUgYWxsJ3V0ZW50ZSBhY2NvdW50SWRcbiAgY29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCB1c2VyRmluZE9uZShhY2NvdW50SWQpXG4gIC8vIHJlY3VwZXJvIGRhbCBkYiBpIHNldHRhZ2dpIGNoZSBhdmV2YSBpbXBvc3RhdG8gbCd1dGVudGVcbiAgY29uc3QgdXNlclNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZyhhY2NvdW50RGF0YS5faWQpXG5cbiAgLy8gcmVjdXBlcm8gZGEgc2V0dGluZ3MgbGEgY29uZmlndXJhemlvbmUgZGVpIGNyb3NzIGRhIGFwcmlyZVxuICBsZXQgY3Jvc3NDb25maWdMaXN0ID0gdXNlclNldHRpbmdzLndhdGNobGlzdC5maWx0ZXIocm93PT57XG4gICAgcmV0dXJuIG9yZGVyc1RvT3Blbi5lcGljLmluY2x1ZGVzKHJvdy5lcGljKVxuICB9KTtcblxuICAvLyBhdnZpbyBpIHZhcmkgY3Jvc3NcbiAgY29uc3Qgc3RlcDBSZXNwb25zZSA9IGF3YWl0IHN0ZXAwKGFjY291bnREYXRhLCBjcm9zc0NvbmZpZ0xpc3QpXG5cbiAgcmVzLnNlbmQoc3RlcDBSZXNwb25zZSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvbW9kaWZpY2FQaXAvOmlkJywgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc3QgYWNjb3VudElkID0gcmVxLnBhcmFtcy5pZDtcblxuICBjb25zdCB7cGVyY2VudGFnZX0gPSByZXEuYm9keVxuICAvLyByZWN1cGVybyBkYWwgZGIgbGUgaW5mb3JtYXppb25pIHJlbGF0aXZlIGFsbCd1dGVudGUgYWNjb3VudElkXG4gIGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgdXNlckZpbmRPbmUoYWNjb3VudElkKVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0QWxsSWdBY3Rpdml0aWVzKGFjY291bnREYXRhLl9pZClcblxuICBjb25zdCBpZ1Jlc3BvbnNlID0gW11cblxuICBmb3IgKGNvbnN0IHJlcyBvZiByZXNwb25zZSl7XG4gICAgcmVzLmNvbmZpZy5wZXJjZW50YWdlID0gcGVyY2VudGFnZVxuICAgIGlnUmVzcG9uc2UucHVzaChhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCByZXMuc3RlcCwgcmVzLmVwaWMsIHJlcy5jb25maWcsIHJlcy5vcmRlcnMsIHJlcy5wb3NpdGlvbnMpKVxuICB9XG5cbiAgcmVzLnNlbmQoaWdSZXNwb25zZSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvY2xvc2VTZWxlY3RlZC86aWQnLCBhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICBjb25zdCBhY2NvdW50SWQgPSByZXEucGFyYW1zLmlkO1xuICBjb25zdCBlcGljVG9DbG9zZSA9IHJlcS5ib2R5XG5cbiAgY29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCB1c2VyRmluZE9uZShhY2NvdW50SWQpXG5cbiAgLy8gQ3JlbyB1bmEgc2Vzc2lvbmUgaWdcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFQSUNsaWVudChBUElDbGllbnQuVVJMX0RFTU8sIGFjY291bnREYXRhLmFwaUtleSk7XG4gIGF3YWl0IGNsaWVudC5yZXN0LmxvZ2luLmNyZWF0ZVNlc3Npb24oYWNjb3VudERhdGEudXNlcm5hbWUsIGFjY291bnREYXRhLnBhc3N3b3JkKTtcblxuICBjb25zdCBpZ1Jlc3BvbnNlID0gYXdhaXQgY2xvc2VBY3Rpdml0eShjbGllbnQsIGFjY291bnREYXRhLCBlcGljVG9DbG9zZS5lcGljKVxuXG4gIHJlcy5zZW5kKGlnUmVzcG9uc2UpXG59KVxuXG5cbnJvdXRlci5wb3N0KCcvbmV3VXNlcicsIGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gcmVxLmJvZHk7XG5cbiAgY29uc3QgcmVzVXNlciA9IGF3YWl0IG5ld1VzZXIodXNlckRhdGEpXG5cbiAgcmVzLnNlbmQocmVzVXNlcilcbn0pXG5cbnJvdXRlci5wb3N0KCcvdGVzdCcsIGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHtlcGljLCB0aW1lZnJhbWUsIGNvdW50fSA9IHJlcS5ib2R5XG5cbiAgY29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpLWZ4cHJhY3RpY2Uub2FuZGEuY29tL3YzL2FjY291bnRzLzEwMS0wMTItMjE5NjQyMzgtMDAxL2luc3RydW1lbnRzLycgKyBlcGljICsgJy9jYW5kbGVzP2NvdW50PScgKyBjb3VudCArICcmZ3JhbnVsYXJpdHk9JyArIHRpbWVmcmFtZVxuICBjb25zdCBjb25maWcgPSB7XG4gICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyIDM5NmZjNzE2MWRiMmZmNzQ0YmNlN2IwODczYmNkZDk3LTFjMWMwYmQwZTc3ZDgwYmQ0ZThlNzRiNWMyMTk3MGQyYCB9XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNhbmRsZXMgPSBhd2FpdCBheGlvcy5nZXQodXJsLCBjb25maWcpXG4gICAgY29uc3QgcmVzdWx0ID0gZ2V0U3VwcG9ydFJlc2lzdGFuY2UoY2FuZGxlcy5kYXRhLmNhbmRsZXMsIGNhbmRsZXMuZGF0YS5jYW5kbGVzLmxlbmd0aClcbiAgICByZXMuc2VuZChyZXN1bHQpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXMuc2VuZChlLnJlc3BvbnNlLmRhdGEpXG4gIH1cbn0pXG5cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXJcblxuZnVuY3Rpb24gY2FsY3VsYXRlU3VwcG9ydFJlc2lzdGFuY2UoY2FuZGxlcywgcGVyaW9kKSB7XG4gIGxldCBjbG9zZVByaWNlcyA9IGNhbmRsZXMuc2xpY2UoLXBlcmlvZCkubWFwKGNhbmRsZSA9PiBwYXJzZUZsb2F0KGNhbmRsZS5taWQuYykpO1xuICBsZXQgbWVhbiA9IGNsb3NlUHJpY2VzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpIC8gcGVyaW9kO1xuICBsZXQgc29ydGVkUHJpY2VzID0gY2xvc2VQcmljZXMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICBsZXQgcTEgPSBzb3J0ZWRQcmljZXNbTWF0aC5mbG9vcihwZXJpb2QgLyA0KV07XG4gIGxldCBxMyA9IHNvcnRlZFByaWNlc1tNYXRoLmNlaWwoMyAqIHBlcmlvZCAvIDQpXTtcbiAgbGV0IGlxciA9IHEzIC0gcTE7XG4gIGxldCBzdXBwb3J0ID0gbWVhbiAtIGlxcjtcbiAgbGV0IHJlc2lzdGFuY2UgPSBtZWFuICsgaXFyO1xuICByZXR1cm4geyBzdXBwb3J0LCByZXNpc3RhbmNlIH07XG59XG5cbmZ1bmN0aW9uIGdldFN1cHBvcnRSZXNpc3RhbmNlKGNhbmRsZXMsIGxvb2tiYWNrKSB7XG4gIGxldCBzdXBwb3J0ID0ge307XG4gIGxldCByZXNpc3RhbmNlID0ge307XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYW5kbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGNhbmRsZSA9IGNhbmRsZXNbaV07XG4gICAgbGV0IGxvdyA9IHBhcnNlRmxvYXQoY2FuZGxlLm1pZC5sKTtcbiAgICBsZXQgaGlnaCA9IHBhcnNlRmxvYXQoY2FuZGxlLm1pZC5oKTtcblxuICAgIGZvciAobGV0IGogPSBpIC0gbG9va2JhY2s7IGogPCBpOyBqKyspIHtcbiAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGxldCBwcmV2Q2FuZGxlID0gY2FuZGxlc1tqXTtcbiAgICAgIGxldCBwcmV2TG93ID0gcGFyc2VGbG9hdChwcmV2Q2FuZGxlLm1pZC5sKTtcbiAgICAgIGxldCBwcmV2SGlnaCA9IHBhcnNlRmxvYXQocHJldkNhbmRsZS5taWQuaCk7XG5cbiAgICAgIGlmIChwcmV2TG93ID4gbG93KSB7XG4gICAgICAgIGlmICghc3VwcG9ydFtsb3ddKSB7XG4gICAgICAgICAgc3VwcG9ydFtsb3ddID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdXBwb3J0W2xvd10rKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcmV2SGlnaCA8IGhpZ2gpIHtcbiAgICAgICAgaWYgKCFyZXNpc3RhbmNlW2hpZ2hdKSB7XG4gICAgICAgICAgcmVzaXN0YW5jZVtoaWdoXSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzaXN0YW5jZVtoaWdoXSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbGV0IHNvcnRlZFN1cHBvcnQgPSBPYmplY3Qua2V5cyhzdXBwb3J0KVxuICAgIC5zb3J0KChhLCBiKSA9PiBzdXBwb3J0W2JdIC0gc3VwcG9ydFthXSk7XG4gIGxldCBzb3J0ZWRSZXNpc3RhbmNlID0gT2JqZWN0LmtleXMocmVzaXN0YW5jZSlcbiAgICAuc29ydCgoYSwgYikgPT4gcmVzaXN0YW5jZVtiXSAtIHJlc2lzdGFuY2VbYV0pO1xuXG4gIGxldCBzdHJvbmdlc3RTdXBwb3J0ID0gc29ydGVkU3VwcG9ydFswXTtcbiAgbGV0IHN0cm9uZ2VzdFJlc2lzdGFuY2UgPSBzb3J0ZWRSZXNpc3RhbmNlWzBdO1xuXG4gIHJldHVybiB7XG4gICAgcmVzaXN0YW5jZTogcGFyc2VGbG9hdChzdHJvbmdlc3RSZXNpc3RhbmNlKSxcbiAgICBzdXBwb3J0OiBwYXJzZUZsb2F0KHN0cm9uZ2VzdFN1cHBvcnQpXG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQTBCO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0NBaEIxQjtBQUFBO0FBQUE7QUFrQkEsSUFBTUEsTUFBTSxHQUFHQyxtQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFL0JGLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLFlBQVk7RUFBQSxzRUFBRSxpQkFBZUMsR0FBRyxFQUFFQyxHQUFHO0lBQUE7SUFBQTtNQUFBO1FBQUE7VUFDeENDLFNBQVMsR0FBR0YsR0FBRyxDQUFDRyxNQUFNLENBQUNDLEVBQUUsRUFDL0I7VUFBQTtVQUFBLE9BQzBCLElBQUFDLG9CQUFXLEVBQUNILFNBQVMsQ0FBQztRQUFBO1VBQTFDSSxXQUFXO1VBQUE7VUFBQSxPQUVNLElBQUFDLDZCQUFhLEVBQUNELFdBQVcsQ0FBQztRQUFBO1VBQTNDRSxRQUFRO1VBRWQsSUFBSUEsUUFBUSxFQUFDO1lBQ1hDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFCQUFxQixDQUFDO1VBQ3BDO1VBRUFULEdBQUcsQ0FBQ1UsSUFBSSxDQUFDSCxRQUFRLENBQUM7UUFBQTtRQUFBO1VBQUE7TUFBQTtJQUFBO0VBQUEsQ0FDbkI7RUFBQTtJQUFBO0VBQUE7QUFBQSxJQUFDO0FBRUZaLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGFBQWE7RUFBQSx1RUFBRSxrQkFBZUMsR0FBRyxFQUFFQyxHQUFHO0lBQUE7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","map":{"version":3,"names":["router","express","Router","get","req","res","accountId","params","id","userFindOne","accountData","lightstreamer","response","console","log","send","lightstreamer2","getSetting","watchlist","getAllIgActivities","igActivities","list","ig","getSettings","resSettings","getUser","resUser","post","settings","body","updateAccountSettings","_id","ordersToOpen","userSettings","crossConfigList","filter","row","epic","includes","step0","step0Response","percentage","igResponse","config","newIgActivity","step","orders","positions","push","epicToClose","client","APIClient","URL_DEMO","apiKey","rest","login","createSession","username","password","closeActivity","userData","newUser","timeframe","count","url","headers","Authorization","axios","candles","result","getSupportResistance","data","length","module","exports","calculateSupportResistance","period","closePrices","slice","map","candle","parseFloat","mid","c","mean","reduce","a","b","sortedPrices","sort","q1","Math","floor","q3","ceil","iqr","support","resistance","lookback","i","low","l","high","h","j","prevCandle","prevLow","prevHigh","sortedSupport","Object","keys","sortedResistance","strongestSupport","strongestResistance"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/router/","sources":["api.js"],"sourcesContent":["import express from 'express'\nimport {\n  getAllIgActivities,\n  getSetting,\n  getSettings,\n  getUser, newIgActivity,\n  newUser,\n  updateAccountSettings,\n  userFindOne\n} from \"../lib/mongoDB\";\nimport {closeActivity} from \"../lib/rest\";\nimport {APIClient} from \"ig-trading-api\";\nimport {step0} from \"../lib/restV3\";\nimport {lightstreamer2} from \"../lib/lightstreamer2\";\nimport {lightstreamer} from \"../lib/lightstreamer\";\nimport moment from \"moment\";\nimport momentTimeZone from \"moment-timezone\";\nimport axios from \"axios\";\n\nconst router = express.Router()\n\nrouter.get('/start/:id', async function(req, res) {\n  const accountId = req.params.id;\n  // recupero dal db le informazioni relative all'utente accountId\n  const accountData = await userFindOne(accountId)\n  // quindi avvio su ig uno streamer che gestirà tutti gli eventi lanciati dalla piattaforma\n  const response = await lightstreamer(accountData)\n\n  if (response){\n    console.log(\"avvio lightstreamer\")\n  }\n\n  res.send(response)\n});\n\nrouter.get('/start2/:id', async function(req, res) {\n  const accountId = req.params.id;\n  // recupero dal db le informazioni relative all'utente accountId\n  const accountData = await userFindOne(accountId)\n  // quindi avvio su ig uno streamer che gestirà tutti gli eventi lanciati dalla piattaforma\n  const response = await lightstreamer2(accountData)\n\n  if (response){\n    console.log(\"avvio lightstreamer2\")\n  }\n\n  res.send(response)\n});\n\n\nrouter.get('/watchList/:id', async function(req, res) {\n  const accountId = req.params.id;\n\n  try{\n    const accountData = await userFindOne(accountId)\n    const watchlist = await getSetting(accountData.id)\n    const igActivities = await getAllIgActivities(accountData)\n    res.send({list: watchlist, ig: igActivities})\n  }catch (err){\n    res.send(err)\n  }\n})\n\n/*router.get('/updateWatchList/:id', async function(req, res) {\n  const accountId = req.params.id;\n\n  const accountData = await userFindOne(accountId)\n  if (accountData){\n    const watchlist = await getCompleteWatchlist(accountData)\n    console.log(watchlist.data.markets)\n    res.send(watchlist.data.markets)\n    return null\n  }\n  res.send(\"ok\")\n})*/\n\nrouter.get('/getSettings/:id', async function(req, res) {\n  const accountId = req.params.id;\n\n  const resSettings = await getSettings()\n  const resUser = await getUser()\n\n  res.send(resUser)\n})\n\nrouter.post('/updateSettings/:id', async function(req, res) {\n  const accountId = req.params.id;\n  const settings = req.body\n\n  const accountData = await userFindOne(accountId)\n\n  const resSettings = await updateAccountSettings(accountData._id, settings)\n\n  res.send(resSettings)\n})\n\nrouter.post('/openCrossOrders/:id', async function(req, res) {\n  const accountId = req.params.id;\n  const ordersToOpen = req.body\n\n  // recupero dal db le informazioni relative all'utente accountId\n  const accountData = await userFindOne(accountId)\n  // recupero dal db i settaggi che aveva impostato l'utente\n  const userSettings = await getSetting(accountData._id)\n\n  // recupero da settings la configurazione dei cross da aprire\n  let crossConfigList = userSettings.watchlist.filter(row=>{\n    return ordersToOpen.epic.includes(row.epic)\n  });\n\n  // avvio i vari cross\n  const step0Response = await step0(accountData, crossConfigList)\n\n  res.send(step0Response)\n})\n\nrouter.post('/modificaPip/:id', async function(req, res) {\n  const accountId = req.params.id;\n\n  const {percentage} = req.body\n  // recupero dal db le informazioni relative all'utente accountId\n  const accountData = await userFindOne(accountId)\n\n  const response = await getAllIgActivities(accountData._id)\n\n  const igResponse = []\n\n  for (const res of response){\n    res.config.percentage = percentage\n    igResponse.push(await newIgActivity(accountData, res.step, res.epic, res.config, res.orders, res.positions))\n  }\n\n  res.send(igResponse)\n})\n\nrouter.post('/closeSelected/:id', async function(req, res) {\n  const accountId = req.params.id;\n  const epicToClose = req.body\n\n  const accountData = await userFindOne(accountId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  const igResponse = await closeActivity(client, accountData, epicToClose.epic)\n\n  res.send(igResponse)\n})\n\n\nrouter.post('/newUser', async function(req, res) {\n  const userData = req.body;\n\n  const resUser = await newUser(userData)\n\n  res.send(resUser)\n})\n\nrouter.post('/test', async function(req, res) {\n  const {epic, timeframe, count} = req.body\n\n  const url = 'https://api-fxpractice.oanda.com/v3/accounts/101-012-21964238-001/instruments/' + epic + '/candles?count=' + count + '&granularity=' + timeframe\n  const config = {\n    headers: { Authorization: `Bearer 396fc7161db2ff744bce7b0873bcdd97-1c1c0bd0e77d80bd4e8e74b5c21970d2` }\n  }\n\n  try {\n    const candles = await axios.get(url, config)\n    const result = getSupportResistance(candles.data.candles, candles.data.candles.length)\n    res.send(result)\n  } catch (e) {\n    res.send(e.response.data)\n  }\n})\n\n\nmodule.exports = router\n\nfunction calculateSupportResistance(candles, period) {\n  let closePrices = candles.slice(-period).map(candle => parseFloat(candle.mid.c));\n  let mean = closePrices.reduce((a, b) => a + b) / period;\n  let sortedPrices = closePrices.sort((a, b) => a - b);\n  let q1 = sortedPrices[Math.floor(period / 4)];\n  let q3 = sortedPrices[Math.ceil(3 * period / 4)];\n  let iqr = q3 - q1;\n  let support = mean - iqr;\n  let resistance = mean + iqr;\n  return { support, resistance };\n}\n\nfunction getSupportResistance(candles, lookback) {\n  let support = {};\n  let resistance = {};\n\n  for (let i = 0; i < candles.length; i++) {\n    let candle = candles[i];\n    let low = parseFloat(candle.mid.l);\n    let high = parseFloat(candle.mid.h);\n\n    for (let j = i - lookback; j < i; j++) {\n      if (j < 0) {\n        continue;\n      }\n      let prevCandle = candles[j];\n      let prevLow = parseFloat(prevCandle.mid.l);\n      let prevHigh = parseFloat(prevCandle.mid.h);\n\n      if (prevLow > low) {\n        if (!support[low]) {\n          support[low] = 1;\n        } else {\n          support[low]++;\n        }\n      } else if (prevHigh < high) {\n        if (!resistance[high]) {\n          resistance[high] = 1;\n        } else {\n          resistance[high]++;\n        }\n      }\n    }\n  }\n\n  let sortedSupport = Object.keys(support)\n    .sort((a, b) => support[b] - support[a]);\n  let sortedResistance = Object.keys(resistance)\n    .sort((a, b) => resistance[b] - resistance[a]);\n\n  let strongestSupport = sortedSupport[0];\n  let strongestResistance = sortedResistance[0];\n\n  return {\n    resistance: parseFloat(strongestResistance),\n    support: parseFloat(strongestSupport)\n  };\n}\n"],"mappings":"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"}},"mtime":1678179652697},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/lightstreamer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nvar _lightstreamerClientNode = require(\"lightstreamer-client-node\");\nvar _rest = require(\"./rest\");\nvar _mongoDB = require(\"./mongoDB\");\nvar _restV = require(\"./restV3\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar reconnectIntervalId = null;\nvar isConnected = false;\nfunction lightstreamer(_x) {\n  return _lightstreamer.apply(this, arguments);\n}\nfunction _lightstreamer() {\n  _lightstreamer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountData) {\n    var security, lsClient, subscription;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!isConnected) {\n            _context2.next = 2;\n            break;\n          }\n          return _context2.abrupt(\"return\");\n        case 2:\n          _context2.next = 4;\n          return (0, _rest.igSession)(accountData.username, accountData.password, accountData.apiKey);\n        case 4:\n          security = _context2.sent;\n          _context2.next = 7;\n          return (0, _mongoDB.connectToDb)(security.accountId);\n        case 7:\n          // Instantiate Lightstreamer client instance\n          lsClient = new _lightstreamerClientNode.LightstreamerClient(security.lightstreamerEndpoint); // Set up login credentials\n          lsClient.connectionDetails.setUser(security.accountId);\n          lsClient.connectionDetails.setPassword(\"CST-\".concat(security.cst, \"|XST-\").concat(security.xSecurityToken));\n          lsClient.addListener({\n            onListenStart: function onListenStart() {\n              console.log('IG ListenStart');\n            },\n            onStatusChange: function onStatusChange(status) {\n              console.log('IG connection status:', status);\n              if (status === 'CONNECTED:STREAM-SENSING') {\n                isConnected = true;\n                //stopReconnectInterval();\n              } else if (status === 'DISCONNECTED') {\n                isConnected = false;\n                //startReconnectInterval(lsClient);\n              }\n            },\n\n            onServerError: function onServerError(code, message) {\n              console.log(\"Server error: \".concat(code, \" message: \").concat(message));\n            },\n            onSubscriptionError: function onSubscriptionError(code, message) {\n              console.log(\"Subscription error: \".concat(code, \" message: \").concat(message));\n            }\n          });\n\n          // Connect to Lightstreamer\n          lsClient.connect();\n          subscription = new _lightstreamerClientNode.Subscription('DISTINCT', [\"TRADE:\".concat(security.accountId)], ['OPU']);\n          subscription.addListener({\n            onSubscription: function onSubscription() {\n              console.log('subscribed');\n            },\n            onUnsubscription: function onUnsubscription() {\n              console.log('unsubscribed');\n            },\n            onSubscriptionError: function onSubscriptionError(code, message) {\n              console.log(\"subscription failure: \".concat(code, \" message: \").concat(message));\n            },\n            onItemUpdate: function onItemUpdate(updateInfo) {\n              // Lightstreamer published some data\n              updateInfo.forEachField( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(fieldName, fieldPos, value) {\n                  var confirm, activities, refOrder, _refOrder;\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        confirm = JSON.parse(value);\n                        if (!(confirm && confirm.channel === 'OSAutoStopFill' && confirm.status === 'OPEN')) {\n                          _context.next = 43;\n                          break;\n                        }\n                        _context.next = 4;\n                        return (0, _mongoDB.getIgActivities)(accountData, confirm.epic);\n                      case 4:\n                        activities = _context.sent;\n                        _context.t0 = activities[0].step;\n                        _context.next = _context.t0 === \"A0\" ? 8 : _context.t0 === \"A1\" ? 13 : _context.t0 === \"A2\" ? 25 : _context.t0 === \"A3\" ? 37 : 42;\n                        break;\n                      case 8:\n                        // casistica A0\n                        console.group(\"A0 - \" + confirm.epic);\n                        // eseguo la funzione step1\n                        _context.next = 11;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 11:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 13:\n                        // casistica A0\n                        console.group(\"A1 - \" + confirm.epic);\n                        // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n                        // che si deve svolgere\n                        refOrder = activities[0].orders.find(function (order) {\n                          return order.dealId === confirm.dealId;\n                        }); // se A1\n                        if (!(refOrder.nextStep === \"A1\")) {\n                          _context.next = 19;\n                          break;\n                        }\n                        console.log(\"next step\", refOrder.nextStep);\n                        // eseguo la funzione step1\n                        _context.next = 19;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 19:\n                        if (!(refOrder.nextStep === \"A2\")) {\n                          _context.next = 23;\n                          break;\n                        }\n                        console.log(\"next step\", refOrder.nextStep);\n                        // eseguo la funzione step2\n                        _context.next = 23;\n                        return (0, _restV.step2)(activities[0], accountData, confirm);\n                      case 23:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 25:\n                        console.group(\"A2 - \" + confirm.epic);\n                        // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n                        // che si deve svolgere\n                        _refOrder = activities[0].orders.find(function (order) {\n                          return order.dealId === confirm.dealId;\n                        }); // se A1\n                        if (!(_refOrder.nextStep === \"A1\")) {\n                          _context.next = 31;\n                          break;\n                        }\n                        console.log(\"next step\", _refOrder.nextStep);\n                        // eseguo la funzione step1\n                        _context.next = 31;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 31:\n                        if (!(_refOrder.nextStep === \"A3\")) {\n                          _context.next = 35;\n                          break;\n                        }\n                        console.log(\"next step\", _refOrder.nextStep);\n                        // eseguo la funzione step3\n                        _context.next = 35;\n                        return (0, _restV.step3)(activities[0], accountData, confirm);\n                      case 35:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 37:\n                        console.group(\"A3 - \" + confirm.epic);\n                        // eseguo la funzione step1\n                        _context.next = 40;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 40:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 42:\n                        return _context.abrupt(\"return\", null);\n                      case 43:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n                return function (_x2, _x3, _x4) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n            }\n          });\n          // Subscribe to Lightstreamer\n          lsClient.subscribe(subscription);\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _lightstreamer.apply(this, arguments);\n}\nfunction startReconnectInterval(lsClient) {\n  reconnectIntervalId = setInterval(function () {\n    if (!isConnected) {\n      console.log('Stiamo tentando di riconnetterci...');\n      lsClient.connect();\n    }\n  }, 21600000);\n}\nfunction stopReconnectInterval() {\n  clearInterval(reconnectIntervalId);\n}\nmodule.exports = {\n  lightstreamer: lightstreamer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWNvbm5lY3RJbnRlcnZhbElkIiwiaXNDb25uZWN0ZWQiLCJsaWdodHN0cmVhbWVyIiwiYWNjb3VudERhdGEiLCJpZ1Nlc3Npb24iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYXBpS2V5Iiwic2VjdXJpdHkiLCJjb25uZWN0VG9EYiIsImFjY291bnRJZCIsImxzQ2xpZW50IiwiTGlnaHRzdHJlYW1lckNsaWVudCIsImxpZ2h0c3RyZWFtZXJFbmRwb2ludCIsImNvbm5lY3Rpb25EZXRhaWxzIiwic2V0VXNlciIsInNldFBhc3N3b3JkIiwiY3N0IiwieFNlY3VyaXR5VG9rZW4iLCJhZGRMaXN0ZW5lciIsIm9uTGlzdGVuU3RhcnQiLCJjb25zb2xlIiwibG9nIiwib25TdGF0dXNDaGFuZ2UiLCJzdGF0dXMiLCJvblNlcnZlckVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJvblN1YnNjcmlwdGlvbkVycm9yIiwiY29ubmVjdCIsInN1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsIm9uU3Vic2NyaXB0aW9uIiwib25VbnN1YnNjcmlwdGlvbiIsIm9uSXRlbVVwZGF0ZSIsInVwZGF0ZUluZm8iLCJmb3JFYWNoRmllbGQiLCJmaWVsZE5hbWUiLCJmaWVsZFBvcyIsInZhbHVlIiwiY29uZmlybSIsIkpTT04iLCJwYXJzZSIsImNoYW5uZWwiLCJnZXRJZ0FjdGl2aXRpZXMiLCJlcGljIiwiYWN0aXZpdGllcyIsInN0ZXAiLCJncm91cCIsInN0ZXAxIiwiZ3JvdXBFbmQiLCJyZWZPcmRlciIsIm9yZGVycyIsImZpbmQiLCJvcmRlciIsImRlYWxJZCIsIm5leHRTdGVwIiwic3RlcDIiLCJzdGVwMyIsInN1YnNjcmliZSIsInN0YXJ0UmVjb25uZWN0SW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInN0b3BSZWNvbm5lY3RJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvc3ZpbHVwcG8vRG9jdW1lbnRzL1N2aWx1cHBvIEphdmFzY3JpcHQvZnhCYWNrVjEvbGliLyIsInNvdXJjZXMiOlsibGlnaHRzdHJlYW1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0xpZ2h0c3RyZWFtZXJDbGllbnQsIFN1YnNjcmlwdGlvbn0gZnJvbSBcImxpZ2h0c3RyZWFtZXItY2xpZW50LW5vZGVcIjtcblxuaW1wb3J0IHtpZ1Nlc3Npb259IGZyb20gJy4vcmVzdCdcbmltcG9ydCB7Y29ubmVjdFRvRGIsIGdldElnQWN0aXZpdGllc30gZnJvbSBcIi4vbW9uZ29EQlwiO1xuaW1wb3J0IHtzdGVwMSwgc3RlcDIsIHN0ZXAzfSBmcm9tIFwiLi9yZXN0VjNcIjtcblxubGV0IHJlY29ubmVjdEludGVydmFsSWQgPSBudWxsO1xubGV0IGlzQ29ubmVjdGVkID0gZmFsc2VcblxuYXN5bmMgZnVuY3Rpb24gbGlnaHRzdHJlYW1lcihhY2NvdW50RGF0YSkge1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGxldCBzZWN1cml0eSA9IGF3YWl0IGlnU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQsIGFjY291bnREYXRhLmFwaUtleSlcblxuICBhd2FpdCBjb25uZWN0VG9EYihzZWN1cml0eS5hY2NvdW50SWQpXG5cbiAgLy8gSW5zdGFudGlhdGUgTGlnaHRzdHJlYW1lciBjbGllbnQgaW5zdGFuY2VcbiAgY29uc3QgbHNDbGllbnQgPSBuZXcgTGlnaHRzdHJlYW1lckNsaWVudChzZWN1cml0eS5saWdodHN0cmVhbWVyRW5kcG9pbnQpXG5cbiAgLy8gU2V0IHVwIGxvZ2luIGNyZWRlbnRpYWxzXG4gIGxzQ2xpZW50LmNvbm5lY3Rpb25EZXRhaWxzLnNldFVzZXIoc2VjdXJpdHkuYWNjb3VudElkKVxuICBsc0NsaWVudC5jb25uZWN0aW9uRGV0YWlscy5zZXRQYXNzd29yZChgQ1NULSR7c2VjdXJpdHkuY3N0fXxYU1QtJHtzZWN1cml0eS54U2VjdXJpdHlUb2tlbn1gKVxuXG4gIGxzQ2xpZW50LmFkZExpc3RlbmVyKHtcbiAgICBvbkxpc3RlblN0YXJ0OiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnSUcgTGlzdGVuU3RhcnQnKVxuICAgIH0sXG4gICAgb25TdGF0dXNDaGFuZ2U6IChzdGF0dXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdJRyBjb25uZWN0aW9uIHN0YXR1czonLCBzdGF0dXMpXG4gICAgICBpZiAoc3RhdHVzID09PSAnQ09OTkVDVEVEOlNUUkVBTS1TRU5TSU5HJykge1xuICAgICAgICBpc0Nvbm5lY3RlZCA9IHRydWVcbiAgICAgICAgLy9zdG9wUmVjb25uZWN0SW50ZXJ2YWwoKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnRElTQ09OTkVDVEVEJykge1xuICAgICAgICBpc0Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICAgIC8vc3RhcnRSZWNvbm5lY3RJbnRlcnZhbChsc0NsaWVudCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvblNlcnZlckVycm9yOiAoY29kZSwgbWVzc2FnZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFNlcnZlciBlcnJvcjogJHtjb2RlfSBtZXNzYWdlOiAke21lc3NhZ2V9YClcbiAgICB9LFxuICAgIG9uU3Vic2NyaXB0aW9uRXJyb3I6IChjb2RlLCBtZXNzYWdlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGVycm9yOiAke2NvZGV9IG1lc3NhZ2U6ICR7bWVzc2FnZX1gKVxuICAgIH1cbiAgfSlcblxuICAvLyBDb25uZWN0IHRvIExpZ2h0c3RyZWFtZXJcbiAgbHNDbGllbnQuY29ubmVjdCgpXG5cbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbignRElTVElOQ1QnLCBbYFRSQURFOiR7c2VjdXJpdHkuYWNjb3VudElkfWBdLCBbJ09QVSddKVxuXG4gIHN1YnNjcmlwdGlvbi5hZGRMaXN0ZW5lcih7XG4gICAgb25TdWJzY3JpcHRpb246ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdzdWJzY3JpYmVkJylcbiAgICB9LFxuICAgIG9uVW5zdWJzY3JpcHRpb246ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCd1bnN1YnNjcmliZWQnKVxuICAgIH0sXG4gICAgb25TdWJzY3JpcHRpb25FcnJvcjogKGNvZGUsIG1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBzdWJzY3JpcHRpb24gZmFpbHVyZTogJHtjb2RlfSBtZXNzYWdlOiAke21lc3NhZ2V9YClcbiAgICB9LFxuICAgIG9uSXRlbVVwZGF0ZTogKHVwZGF0ZUluZm8pID0+IHtcbiAgICAgIC8vIExpZ2h0c3RyZWFtZXIgcHVibGlzaGVkIHNvbWUgZGF0YVxuICAgICAgdXBkYXRlSW5mby5mb3JFYWNoRmllbGQoYXN5bmMgKGZpZWxkTmFtZSwgZmllbGRQb3MsIHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbmZpcm0gPSBKU09OLnBhcnNlKHZhbHVlKVxuXG4gICAgICAgIGlmIChjb25maXJtICYmIGNvbmZpcm0uY2hhbm5lbCA9PT0gJ09TQXV0b1N0b3BGaWxsJyAmJiBjb25maXJtLnN0YXR1cyA9PT0gJ09QRU4nKXtcbiAgICAgICAgICAvLyBxdWFuZG8gc2kgdmVyaWZpY2EgdW4gZXZlbnRvIHN1IGlnLCBhbnppdHV0dG8gY2VyY28gbGUgaW5mb3JtYXppb25pIHJlbGF0aXZlIGEgcXVlbGwnZXBpYyBzYWx2YXRlIHN1bCBkYlxuICAgICAgICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBhd2FpdCBnZXRJZ0FjdGl2aXRpZXMoYWNjb3VudERhdGEsIGNvbmZpcm0uZXBpYylcblxuICAgICAgICAgIC8vcXVpbmRpLCB2ZXJpZmljbyBpbiBxdWFsZSBjYXNpc3RpY2EgY2kgdHJvdmlhbW9cbiAgICAgICAgICBzd2l0Y2ggKGFjdGl2aXRpZXNbMF0uc3RlcCkge1xuICAgICAgICAgICAgLy8gZGEgQTAgcGFzc28gYWQgQTFcbiAgICAgICAgICAgIGNhc2UgXCJBMFwiOiB7XG4gICAgICAgICAgICAgIC8vIGNhc2lzdGljYSBBMFxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwKFwiQTAgLSBcIiArIGNvbmZpcm0uZXBpYylcbiAgICAgICAgICAgICAgLy8gZXNlZ3VvIGxhIGZ1bnppb25lIHN0ZXAxXG4gICAgICAgICAgICAgIGF3YWl0IHN0ZXAxKGFjdGl2aXRpZXNbMF0sIGFjY291bnREYXRhLCBjb25maXJtKVxuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGEgQTEgcGFzc28gYWQgQTEgbyBBMlxuICAgICAgICAgICAgY2FzZSBcIkExXCI6IHtcbiAgICAgICAgICAgICAgLy8gY2FzaXN0aWNhIEEwXG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXAoXCJBMSAtIFwiICsgY29uZmlybS5lcGljKVxuICAgICAgICAgICAgICAvLyBjb250cm9sbG8gc3VsIGRiIHF1YWxlIG9yZGluZSDDqCBhcHBlbmEgc3RhdG8gZXNlZ3VpdG8sIGFsIHN1byBpbnRlcm5vIGhvIHNhbHZhdG8gaWwgcGFzc2FnZ2lvIHN1Y2Nlc3Npdm9cbiAgICAgICAgICAgICAgLy8gY2hlIHNpIGRldmUgc3ZvbGdlcmVcbiAgICAgICAgICAgICAgY29uc3QgcmVmT3JkZXIgPSBhY3Rpdml0aWVzWzBdLm9yZGVycy5maW5kKG9yZGVyID0+IG9yZGVyLmRlYWxJZCA9PT0gY29uZmlybS5kZWFsSWQpXG5cbiAgICAgICAgICAgICAgLy8gc2UgQTFcbiAgICAgICAgICAgICAgaWYgKHJlZk9yZGVyLm5leHRTdGVwID09PSBcIkExXCIpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmV4dCBzdGVwXCIsIHJlZk9yZGVyLm5leHRTdGVwKVxuICAgICAgICAgICAgICAgIC8vIGVzZWd1byBsYSBmdW56aW9uZSBzdGVwMVxuICAgICAgICAgICAgICAgIGF3YWl0IHN0ZXAxKGFjdGl2aXRpZXNbMF0sIGFjY291bnREYXRhLCBjb25maXJtKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gc2UgQTJcbiAgICAgICAgICAgICAgaWYgKHJlZk9yZGVyLm5leHRTdGVwID09PSBcIkEyXCIpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmV4dCBzdGVwXCIsIHJlZk9yZGVyLm5leHRTdGVwKVxuICAgICAgICAgICAgICAgIC8vIGVzZWd1byBsYSBmdW56aW9uZSBzdGVwMlxuICAgICAgICAgICAgICAgIGF3YWl0IHN0ZXAyKGFjdGl2aXRpZXNbMF0sIGFjY291bnREYXRhLCBjb25maXJtKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkYSBBMSBwYXNzbyBhZCBBMSBvIEEzXG4gICAgICAgICAgICBjYXNlIFwiQTJcIjoge1xuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwKFwiQTIgLSBcIitjb25maXJtLmVwaWMpXG4gICAgICAgICAgICAgIC8vIGNvbnRyb2xsbyBzdWwgZGIgcXVhbGUgb3JkaW5lIMOoIGFwcGVuYSBzdGF0byBlc2VndWl0bywgYWwgc3VvIGludGVybm8gaG8gc2FsdmF0byBpbCBwYXNzYWdnaW8gc3VjY2Vzc2l2b1xuICAgICAgICAgICAgICAvLyBjaGUgc2kgZGV2ZSBzdm9sZ2VyZVxuICAgICAgICAgICAgICBjb25zdCByZWZPcmRlciA9IGFjdGl2aXRpZXNbMF0ub3JkZXJzLmZpbmQob3JkZXIgPT4gb3JkZXIuZGVhbElkID09PSBjb25maXJtLmRlYWxJZClcblxuICAgICAgICAgICAgICAvLyBzZSBBMVxuICAgICAgICAgICAgICBpZiAocmVmT3JkZXIubmV4dFN0ZXAgPT09IFwiQTFcIil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJuZXh0IHN0ZXBcIiwgcmVmT3JkZXIubmV4dFN0ZXApXG4gICAgICAgICAgICAgICAgLy8gZXNlZ3VvIGxhIGZ1bnppb25lIHN0ZXAxXG4gICAgICAgICAgICAgICAgYXdhaXQgc3RlcDEoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gc2UgQTNcbiAgICAgICAgICAgICAgaWYgKHJlZk9yZGVyLm5leHRTdGVwID09PSBcIkEzXCIpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmV4dCBzdGVwXCIsIHJlZk9yZGVyLm5leHRTdGVwKVxuICAgICAgICAgICAgICAgIC8vIGVzZWd1byBsYSBmdW56aW9uZSBzdGVwM1xuICAgICAgICAgICAgICAgIGF3YWl0IHN0ZXAzKGFjdGl2aXRpZXNbMF0sIGFjY291bnREYXRhLCBjb25maXJtKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkYSBBMSBwYXNzbyBhZCBBMVxuICAgICAgICAgICAgY2FzZSBcIkEzXCI6IHtcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cChcIkEzIC0gXCIrY29uZmlybS5lcGljKVxuICAgICAgICAgICAgICAvLyBlc2VndW8gbGEgZnVuemlvbmUgc3RlcDFcbiAgICAgICAgICAgICAgYXdhaXQgc3RlcDEoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIC8vIFN1YnNjcmliZSB0byBMaWdodHN0cmVhbWVyXG4gIGxzQ2xpZW50LnN1YnNjcmliZShzdWJzY3JpcHRpb24pXG59XG5cbmZ1bmN0aW9uIHN0YXJ0UmVjb25uZWN0SW50ZXJ2YWwobHNDbGllbnQpIHtcbiAgcmVjb25uZWN0SW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAoIWlzQ29ubmVjdGVkKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RpYW1vIHRlbnRhbmRvIGRpIHJpY29ubmV0dGVyY2kuLi4nKTtcbiAgICAgIGxzQ2xpZW50LmNvbm5lY3QoKTtcbiAgICB9XG4gIH0sIDIxNjAwMDAwKTtcbn1cblxuZnVuY3Rpb24gc3RvcFJlY29ubmVjdEludGVydmFsKCkge1xuICBjbGVhckludGVydmFsKHJlY29ubmVjdEludGVydmFsSWQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbGlnaHRzdHJlYW1lclxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQTZDO0FBQUEsK0NBSDdDO0FBQUE7QUFBQTtBQUtBLElBQUlBLG1CQUFtQixHQUFHLElBQUk7QUFDOUIsSUFBSUMsV0FBVyxHQUFHLEtBQUs7QUFBQSxTQUVSQyxhQUFhO0VBQUE7QUFBQTtBQUFBO0VBQUEsNEVBQTVCLGtCQUE2QkMsV0FBVztJQUFBO0lBQUE7TUFBQTtRQUFBO1VBQUEsS0FDbENGLFdBQVc7WUFBQTtZQUFBO1VBQUE7VUFBQTtRQUFBO1VBQUE7VUFBQSxPQUlNLElBQUFHLGVBQVMsRUFBQ0QsV0FBVyxDQUFDRSxRQUFRLEVBQUVGLFdBQVcsQ0FBQ0csUUFBUSxFQUFFSCxXQUFXLENBQUNJLE1BQU0sQ0FBQztRQUFBO1VBQTFGQyxRQUFRO1VBQUE7VUFBQSxPQUVOLElBQUFDLG9CQUFXLEVBQUNELFFBQVEsQ0FBQ0UsU0FBUyxDQUFDO1FBQUE7VUFFckM7VUFDTUMsUUFBUSxHQUFHLElBQUlDLDRDQUFtQixDQUFDSixRQUFRLENBQUNLLHFCQUFxQixDQUFDLEVBRXhFO1VBQ0FGLFFBQVEsQ0FBQ0csaUJBQWlCLENBQUNDLE9BQU8sQ0FBQ1AsUUFBUSxDQUFDRSxTQUFTLENBQUM7VUFDdERDLFFBQVEsQ0FBQ0csaUJBQWlCLENBQUNFLFdBQVcsZUFBUVIsUUFBUSxDQUFDUyxHQUFHLGtCQUFRVCxRQUFRLENBQUNVLGNBQWMsRUFBRztVQUU1RlAsUUFBUSxDQUFDUSxXQUFXLENBQUM7WUFDbkJDLGFBQWEsRUFBRSx5QkFBTTtjQUNuQkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7WUFDL0IsQ0FBQztZQUNEQyxjQUFjLEVBQUUsd0JBQUNDLE1BQU0sRUFBSztjQUMxQkgsT0FBTyxDQUFDQyxHQUFHLENBQUMsdUJBQXVCLEVBQUVFLE1BQU0sQ0FBQztjQUM1QyxJQUFJQSxNQUFNLEtBQUssMEJBQTBCLEVBQUU7Z0JBQ3pDdkIsV0FBVyxHQUFHLElBQUk7Z0JBQ2xCO2NBQ0YsQ0FBQyxNQUFNLElBQUl1QixNQUFNLEtBQUssY0FBYyxFQUFFO2dCQUNwQ3ZCLFdBQVcsR0FBRyxLQUFLO2dCQUNuQjtjQUNGO1lBQ0YsQ0FBQzs7WUFDRHdCLGFBQWEsRUFBRSx1QkFBQ0MsSUFBSSxFQUFFQyxPQUFPLEVBQUs7Y0FDaENOLE9BQU8sQ0FBQ0MsR0FBRyx5QkFBa0JJLElBQUksdUJBQWFDLE9BQU8sRUFBRztZQUMxRCxDQUFDO1lBQ0RDLG1CQUFtQixFQUFFLDZCQUFDRixJQUFJLEVBQUVDLE9BQU8sRUFBSztjQUN0Q04sT0FBTyxDQUFDQyxHQUFHLCtCQUF3QkksSUFBSSx1QkFBYUMsT0FBTyxFQUFHO1lBQ2hFO1VBQ0YsQ0FBQyxDQUFDOztVQUVGO1VBQ0FoQixRQUFRLENBQUNrQixPQUFPLEVBQUU7VUFFWkMsWUFBWSxHQUFHLElBQUlDLHFDQUFZLENBQUMsVUFBVSxFQUFFLGlCQUFVdkIsUUFBUSxDQUFDRSxTQUFTLEVBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO1VBRTNGb0IsWUFBWSxDQUFDWCxXQUFXLENBQUM7WUFDdkJhLGNBQWMsRUFBRSwwQkFBTTtjQUNwQlgsT0FBTyxDQUFDQyxHQUFHLENBQUMsWUFBWSxDQUFDO1lBQzNCLENBQUM7WUFDRFcsZ0JBQWdCLEVBQUUsNEJBQU07Y0FDdEJaLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGNBQWMsQ0FBQztZQUM3QixDQUFDO1lBQ0RNLG1CQUFtQixFQUFFLDZCQUFDRixJQUFJLEVBQUVDLE9BQU8sRUFBSztjQUN0Q04sT0FBTyxDQUFDQyxHQUFHLGlDQUEwQkksSUFBSSx1QkFBYUMsT0FBTyxFQUFHO1lBQ2xFLENBQUM7WUFDRE8sWUFBWSxFQUFFLHNCQUFDQyxVQUFVLEVBQUs7Y0FDNUI7Y0FDQUEsVUFBVSxDQUFDQyxZQUFZO2dCQUFBLHNFQUFDLGlCQUFPQyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsS0FBSztrQkFBQTtrQkFBQTtvQkFBQTtzQkFBQTt3QkFDakRDLE9BQU8sR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNILEtBQUssQ0FBQzt3QkFBQSxNQUU3QkMsT0FBTyxJQUFJQSxPQUFPLENBQUNHLE9BQU8sS0FBSyxnQkFBZ0IsSUFBSUgsT0FBTyxDQUFDaEIsTUFBTSxLQUFLLE1BQU07MEJBQUE7MEJBQUE7d0JBQUE7d0JBQUE7d0JBQUEsT0FFckQsSUFBQW9CLHdCQUFlLEVBQUN6QyxXQUFXLEVBQUVxQyxPQUFPLENBQUNLLElBQUksQ0FBQztzQkFBQTt3QkFBN0RDLFVBQVU7d0JBQUEsY0FHUkEsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJO3dCQUFBLGdDQUVuQixJQUFJLHVCQVVKLElBQUksd0JBeUJKLElBQUksd0JBdUJKLElBQUk7d0JBQUE7c0JBQUE7d0JBekRQO3dCQUNBMUIsT0FBTyxDQUFDMkIsS0FBSyxDQUFDLE9BQU8sR0FBR1IsT0FBTyxDQUFDSyxJQUFJLENBQUM7d0JBQ3JDO3dCQUFBO3dCQUFBLE9BQ00sSUFBQUksWUFBSyxFQUFDSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUzQyxXQUFXLEVBQUVxQyxPQUFPLENBQUM7c0JBQUE7d0JBQ2hEbkIsT0FBTyxDQUFDNkIsUUFBUSxFQUFFO3dCQUFBO3NCQUFBO3dCQU1sQjt3QkFDQTdCLE9BQU8sQ0FBQzJCLEtBQUssQ0FBQyxPQUFPLEdBQUdSLE9BQU8sQ0FBQ0ssSUFBSSxDQUFDO3dCQUNyQzt3QkFDQTt3QkFDTU0sUUFBUSxHQUFHTCxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNNLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLFVBQUFDLEtBQUs7MEJBQUEsT0FBSUEsS0FBSyxDQUFDQyxNQUFNLEtBQUtmLE9BQU8sQ0FBQ2UsTUFBTTt3QkFBQSxFQUFDLEVBRXBGO3dCQUFBLE1BQ0lKLFFBQVEsQ0FBQ0ssUUFBUSxLQUFLLElBQUk7MEJBQUE7MEJBQUE7d0JBQUE7d0JBQzVCbkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFNkIsUUFBUSxDQUFDSyxRQUFRLENBQUM7d0JBQzNDO3dCQUFBO3dCQUFBLE9BQ00sSUFBQVAsWUFBSyxFQUFDSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUzQyxXQUFXLEVBQUVxQyxPQUFPLENBQUM7c0JBQUE7d0JBQUEsTUFJOUNXLFFBQVEsQ0FBQ0ssUUFBUSxLQUFLLElBQUk7MEJBQUE7MEJBQUE7d0JBQUE7d0JBQzVCbkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFNkIsUUFBUSxDQUFDSyxRQUFRLENBQUM7d0JBQzNDO3dCQUFBO3dCQUFBLE9BQ00sSUFBQUMsWUFBSyxFQUFDWCxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUzQyxXQUFXLEVBQUVxQyxPQUFPLENBQUM7c0JBQUE7d0JBRWxEbkIsT0FBTyxDQUFDNkIsUUFBUSxFQUFFO3dCQUFBO3NCQUFBO3dCQU1sQjdCLE9BQU8sQ0FBQzJCLEtBQUssQ0FBQyxPQUFPLEdBQUNSLE9BQU8sQ0FBQ0ssSUFBSSxDQUFDO3dCQUNuQzt3QkFDQTt3QkFDTU0sU0FBUSxHQUFHTCxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNNLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLFVBQUFDLEtBQUs7MEJBQUEsT0FBSUEsS0FBSyxDQUFDQyxNQUFNLEtBQUtmLE9BQU8sQ0FBQ2UsTUFBTTt3QkFBQSxFQUFDLEVBRXBGO3dCQUFBLE1BQ0lKLFNBQVEsQ0FBQ0ssUUFBUSxLQUFLLElBQUk7MEJBQUE7MEJBQUE7d0JBQUE7d0JBQzVCbkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFNkIsU0FBUSxDQUFDSyxRQUFRLENBQUM7d0JBQzNDO3dCQUFBO3dCQUFBLE9BQ00sSUFBQVAsWUFBSyxFQUFDSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUzQyxXQUFXLEVBQUVxQyxPQUFPLENBQUM7c0JBQUE7d0JBQUEsTUFHOUNXLFNBQVEsQ0FBQ0ssUUFBUSxLQUFLLElBQUk7MEJBQUE7MEJBQUE7d0JBQUE7d0JBQzVCbkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFNkIsU0FBUSxDQUFDSyxRQUFRLENBQUM7d0JBQzNDO3dCQUFBO3dCQUFBLE9BQ00sSUFBQUUsWUFBSyxFQUFDWixVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUzQyxXQUFXLEVBQUVxQyxPQUFPLENBQUM7c0JBQUE7d0JBRWxEbkIsT0FBTyxDQUFDNkIsUUFBUSxFQUFFO3dCQUFBO3NCQUFBO3dCQU1sQjdCLE9BQU8sQ0FBQzJCLEtBQUssQ0FBQyxPQUFPLEdBQUNSLE9BQU8sQ0FBQ0ssSUFBSSxDQUFDO3dCQUNuQzt3QkFBQTt3QkFBQSxPQUNNLElBQUFJLFlBQUssRUFBQ0gsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFM0MsV0FBVyxFQUFFcUMsT0FBTyxDQUFDO3NCQUFBO3dCQUNoRG5CLE9BQU8sQ0FBQzZCLFFBQVEsRUFBRTt3QkFBQTtzQkFBQTt3QkFBQSxpQ0FJSixJQUFJO3NCQUFBO3NCQUFBO3dCQUFBO29CQUFBO2tCQUFBO2dCQUFBLENBR3pCO2dCQUFBO2tCQUFBO2dCQUFBO2NBQUEsSUFBQztZQUNKO1VBQ0YsQ0FBQyxDQUFDO1VBQ0Y7VUFDQXZDLFFBQVEsQ0FBQ2dELFNBQVMsQ0FBQzdCLFlBQVksQ0FBQztRQUFBO1FBQUE7VUFBQTtNQUFBO0lBQUE7RUFBQSxDQUNqQztFQUFBO0FBQUE7QUFFRCxTQUFTOEIsc0JBQXNCLENBQUNqRCxRQUFRLEVBQUU7RUFDeENYLG1CQUFtQixHQUFHNkQsV0FBVyxDQUFDLFlBQU07SUFDdEMsSUFBSSxDQUFDNUQsV0FBVyxFQUFFO01BQ2hCb0IsT0FBTyxDQUFDQyxHQUFHLENBQUMscUNBQXFDLENBQUM7TUFDbERYLFFBQVEsQ0FBQ2tCLE9BQU8sRUFBRTtJQUNwQjtFQUNGLENBQUMsRUFBRSxRQUFRLENBQUM7QUFDZDtBQUVBLFNBQVNpQyxxQkFBcUIsR0FBRztFQUMvQkMsYUFBYSxDQUFDL0QsbUJBQW1CLENBQUM7QUFDcEM7QUFFQWdFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2YvRCxhQUFhLEVBQWJBO0FBQ0YsQ0FBQyJ9","map":{"version":3,"names":["reconnectIntervalId","isConnected","lightstreamer","accountData","igSession","username","password","apiKey","security","connectToDb","accountId","lsClient","LightstreamerClient","lightstreamerEndpoint","connectionDetails","setUser","setPassword","cst","xSecurityToken","addListener","onListenStart","console","log","onStatusChange","status","onServerError","code","message","onSubscriptionError","connect","subscription","Subscription","onSubscription","onUnsubscription","onItemUpdate","updateInfo","forEachField","fieldName","fieldPos","value","confirm","JSON","parse","channel","getIgActivities","epic","activities","step","group","step1","groupEnd","refOrder","orders","find","order","dealId","nextStep","step2","step3","subscribe","startReconnectInterval","setInterval","stopReconnectInterval","clearInterval","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["lightstreamer.js"],"sourcesContent":["import {LightstreamerClient, Subscription} from \"lightstreamer-client-node\";\n\nimport {igSession} from './rest'\nimport {connectToDb, getIgActivities} from \"./mongoDB\";\nimport {step1, step2, step3} from \"./restV3\";\n\nlet reconnectIntervalId = null;\nlet isConnected = false\n\nasync function lightstreamer(accountData) {\n  if (isConnected) {\n    return\n  }\n\n  let security = await igSession(accountData.username, accountData.password, accountData.apiKey)\n\n  await connectToDb(security.accountId)\n\n  // Instantiate Lightstreamer client instance\n  const lsClient = new LightstreamerClient(security.lightstreamerEndpoint)\n\n  // Set up login credentials\n  lsClient.connectionDetails.setUser(security.accountId)\n  lsClient.connectionDetails.setPassword(`CST-${security.cst}|XST-${security.xSecurityToken}`)\n\n  lsClient.addListener({\n    onListenStart: () => {\n      console.log('IG ListenStart')\n    },\n    onStatusChange: (status) => {\n      console.log('IG connection status:', status)\n      if (status === 'CONNECTED:STREAM-SENSING') {\n        isConnected = true\n        //stopReconnectInterval();\n      } else if (status === 'DISCONNECTED') {\n        isConnected = false\n        //startReconnectInterval(lsClient);\n      }\n    },\n    onServerError: (code, message) => {\n      console.log(`Server error: ${code} message: ${message}`)\n    },\n    onSubscriptionError: (code, message) => {\n      console.log(`Subscription error: ${code} message: ${message}`)\n    }\n  })\n\n  // Connect to Lightstreamer\n  lsClient.connect()\n\n  const subscription = new Subscription('DISTINCT', [`TRADE:${security.accountId}`], ['OPU'])\n\n  subscription.addListener({\n    onSubscription: () => {\n      console.log('subscribed')\n    },\n    onUnsubscription: () => {\n      console.log('unsubscribed')\n    },\n    onSubscriptionError: (code, message) => {\n      console.log(`subscription failure: ${code} message: ${message}`)\n    },\n    onItemUpdate: (updateInfo) => {\n      // Lightstreamer published some data\n      updateInfo.forEachField(async (fieldName, fieldPos, value) => {\n        const confirm = JSON.parse(value)\n\n        if (confirm && confirm.channel === 'OSAutoStopFill' && confirm.status === 'OPEN'){\n          // quando si verifica un evento su ig, anzitutto cerco le informazioni relative a quell'epic salvate sul db\n          const activities = await getIgActivities(accountData, confirm.epic)\n\n          //quindi, verifico in quale casistica ci troviamo\n          switch (activities[0].step) {\n            // da A0 passo ad A1\n            case \"A0\": {\n              // casistica A0\n              console.group(\"A0 - \" + confirm.epic)\n              // eseguo la funzione step1\n              await step1(activities[0], accountData, confirm)\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1 o A2\n            case \"A1\": {\n              // casistica A0\n              console.group(\"A1 - \" + confirm.epic)\n              // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n              // che si deve svolgere\n              const refOrder = activities[0].orders.find(order => order.dealId === confirm.dealId)\n\n              // se A1\n              if (refOrder.nextStep === \"A1\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step1\n                await step1(activities[0], accountData, confirm)\n              }\n\n              // se A2\n              if (refOrder.nextStep === \"A2\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step2\n                await step2(activities[0], accountData, confirm)\n              }\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1 o A3\n            case \"A2\": {\n              console.group(\"A2 - \"+confirm.epic)\n              // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n              // che si deve svolgere\n              const refOrder = activities[0].orders.find(order => order.dealId === confirm.dealId)\n\n              // se A1\n              if (refOrder.nextStep === \"A1\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step1\n                await step1(activities[0], accountData, confirm)\n              }\n              // se A3\n              if (refOrder.nextStep === \"A3\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step3\n                await step3(activities[0], accountData, confirm)\n              }\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1\n            case \"A3\": {\n              console.group(\"A3 - \"+confirm.epic)\n              // eseguo la funzione step1\n              await step1(activities[0], accountData, confirm)\n              console.groupEnd()\n              break\n            }\n\n            default: return null\n          }\n        }\n      })\n    }\n  })\n  // Subscribe to Lightstreamer\n  lsClient.subscribe(subscription)\n}\n\nfunction startReconnectInterval(lsClient) {\n  reconnectIntervalId = setInterval(() => {\n    if (!isConnected) {\n      console.log('Stiamo tentando di riconnetterci...');\n      lsClient.connect();\n    }\n  }, 21600000);\n}\n\nfunction stopReconnectInterval() {\n  clearInterval(reconnectIntervalId);\n}\n\nmodule.exports = {\n  lightstreamer\n}\n"],"mappings":"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"}},"mtime":1678181994009},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/rest.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.closePosition = void 0;\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _igTradingApi = require(\"ig-trading-api\");\nvar _mongoDB = require(\"./mongoDB\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar baseURL = \"https://demo-api.ig.com/gateway/deal\";\nvar igSession = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(identifier, password, apiKey) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _axios[\"default\"].post(baseURL + '/session', {\n            identifier: identifier,\n            password: password\n          }, {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(apiKey),\n              'Version': 2\n            }\n          });\n        case 2:\n          response = _context.sent;\n          if (!response) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            accountId: response.data.currentAccountId,\n            clientId: response.data.clientId,\n            lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n            cst: response.headers.cst,\n            xSecurityToken: response.headers['x-security-token']\n          });\n        case 5:\n          return _context.abrupt(\"return\", {\n            error: \"session error\"\n          });\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function igSession(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nvar stepA0 = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountData, crossList) {\n    var client, epicArray, _iterator, _step, cross, marketDetails, _iterator2, _step2, _loop;\n    return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          // apro una nuova sessione\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context3.next = 3;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 3:\n          epicArray = [];\n          _iterator = _createForOfIteratorHelper(crossList);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              cross = _step.value;\n              // creo un array contenente solo gli epic, così da fare una chiamata unica\n              epicArray.push(cross.epic);\n            }\n\n            //recupero il dettaglio di tutti i cross\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          _context3.next = 8;\n          return client.rest.market.getMarketDetails(epicArray);\n        case 8:\n          marketDetails = _context3.sent;\n          //Per ogni cross apro la poosizione A0\n          _iterator2 = _createForOfIteratorHelper(marketDetails.marketDetails);\n          _context3.prev = 10;\n          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n            var market, crossConfig, averagePrice, pip, buyOrderResponse, sellOrderResponse, orders, responseIgActivity;\n            return _regeneratorRuntime().wrap(function _loop$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  market = _step2.value;\n                  crossConfig = crossList.find(function (cross) {\n                    return cross.epic === market.instrument.epic;\n                  });\n                  averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(market.snapshot.scalingFactor.toString().length);\n                  pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) / market.snapshot.scalingFactor; // Apro i nuovi ordini\n                  _context2.next = 6;\n                  return newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice + pip, \"STOP\", crossConfig.currencies, null, null);\n                case 6:\n                  buyOrderResponse = _context2.sent;\n                  _context2.next = 9;\n                  return newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice - pip, \"STOP\", crossConfig.currencies, null, null);\n                case 9:\n                  sellOrderResponse = _context2.sent;\n                  orders = [{\n                    dealId: buyOrderResponse.dealId,\n                    dealReference: buyOrderResponse.dealReference,\n                    direction: buyOrderResponse.direction,\n                    size: buyOrderResponse.size,\n                    level: buyOrderResponse.level,\n                    limitLevel: buyOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }, {\n                    dealId: sellOrderResponse.dealId,\n                    dealReference: sellOrderResponse.dealReference,\n                    direction: sellOrderResponse.direction,\n                    size: sellOrderResponse.size,\n                    level: sellOrderResponse.level,\n                    limitLevel: sellOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }];\n                  _context2.next = 13;\n                  return (0, _mongoDB.newIgActivity)(accountData, 'A0', crossConfig, orders, []);\n                case 13:\n                  responseIgActivity = _context2.sent;\n                  console.group(\"Ig Activity\");\n                  console.log(\"orders:\", responseIgActivity.orders);\n                  console.log(\"positions:\", responseIgActivity.positions);\n                  console.log(\"step:\", responseIgActivity.step);\n                  console.groupEnd();\n                case 19:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }, _loop);\n          });\n          _iterator2.s();\n        case 13:\n          if ((_step2 = _iterator2.n()).done) {\n            _context3.next = 17;\n            break;\n          }\n          return _context3.delegateYield(_loop(), \"t0\", 15);\n        case 15:\n          _context3.next = 13;\n          break;\n        case 17:\n          _context3.next = 22;\n          break;\n        case 19:\n          _context3.prev = 19;\n          _context3.t1 = _context3[\"catch\"](10);\n          _iterator2.e(_context3.t1);\n        case 22:\n          _context3.prev = 22;\n          _iterator2.f();\n          return _context3.finish(22);\n        case 25:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee2, null, [[10, 19, 22, 25]]);\n  }));\n  return function stepA0(_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar stepA1 = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(activities, accountData, event) {\n    var refOrder, client, responseDeleteOrder, pip, levelStop, levelLimit, stopOrderResponse, limitOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context4.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context4.prev = 4;\n          _context4.next = 7;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 7:\n          responseDeleteOrder = _context4.sent;\n          // await restartCross(client, accountData, activities)\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop = event.direction === \"BUY\" ? event.level + pip / 2 : event.level - pip / 2;\n          levelLimit = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context4.next = 14;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 14:\n          stopOrderResponse = _context4.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n          _context4.next = 19;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level);\n        case 19:\n          limitOrderResponse = _context4.sent;\n          console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus);\n          console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A2\"\n          }, {\n            dealId: limitOrderResponse.dealId,\n            dealReference: limitOrderResponse.dealReference,\n            direction: limitOrderResponse.direction,\n            size: limitOrderResponse.size,\n            level: limitOrderResponse.level,\n            limitLevel: limitOrderResponse.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context4.next = 27;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities, orders, positions);\n        case 27:\n          responseIgActivity = _context4.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context4.next = 38;\n          break;\n        case 35:\n          _context4.prev = 35;\n          _context4.t0 = _context4[\"catch\"](4);\n          console.log(_context4.t0);\n        case 38:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee3, null, [[4, 35]]);\n  }));\n  return function stepA1(_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar stepA2 = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(activities, accountData, event) {\n    var refOrder, client, responseClosePosition, responseDeleteOrder, pip, levelStop, levelLimit, stopOrderResponse, limitOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee4$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context5.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context5.prev = 4;\n          // Take profit posizione aperta (1 contrato)\n          console.group(\"Chiusura posizione\");\n          _context5.next = 8;\n          return closePosition(client, activities.positions[0].dealId, activities.positions[0].direction, activities.positions[0].size, false);\n        case 8:\n          responseClosePosition = _context5.sent;\n          console.log(\"dealStatus: \", responseClosePosition.dealStatus);\n          console.log(\"affectedDeals: \", responseClosePosition.affectedDeals);\n          console.log(\"profit: \", responseClosePosition.profit);\n          console.groupEnd();\n\n          // Chiudo l'ordine non eseguito\n          _context5.next = 15;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 15:\n          responseDeleteOrder = _context5.sent;\n          // await restartCross(client, accountData, activities)\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop = event.direction === \"BUY\" ? event.level + pip / 2 : event.level - pip / 2;\n          levelLimit = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context5.next = 22;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 22:\n          stopOrderResponse = _context5.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n          _context5.next = 27;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level);\n        case 27:\n          limitOrderResponse = _context5.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A2\"\n          }, {\n            dealId: limitOrderResponse.dealId,\n            dealReference: limitOrderResponse.dealReference,\n            direction: limitOrderResponse.direction,\n            size: limitOrderResponse.size,\n            level: limitOrderResponse.level,\n            limitLevel: limitOrderResponse.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context5.next = 35;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities, orders, positions);\n        case 35:\n          responseIgActivity = _context5.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context5.next = 46;\n          break;\n        case 43:\n          _context5.prev = 43;\n          _context5.t0 = _context5[\"catch\"](4);\n          console.log(_context5.t0);\n        case 46:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee4, null, [[4, 43]]);\n  }));\n  return function stepA2(_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar stepA3 = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(activities, accountData, event) {\n    var refOrder, client, responseClosePosition, responseDeleteOrder, pip, levelStop, direction, stopOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee5$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context6.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context6.prev = 4;\n          // Chiudo metà della posizione aperta più distante (0.5 contratti)\n          console.group(\"Chiusura posizione parziale\");\n          _context6.next = 8;\n          return closePosition(client, activities.positions[0].dealId, activities.positions[0].direction, activities.positions[0].size, true);\n        case 8:\n          responseClosePosition = _context6.sent;\n          console.log(\"dealStatus: \", responseClosePosition.dealStatus);\n          console.log(\"affectedDeals: \", responseClosePosition.affectedDeals);\n          console.log(\"profit: \", responseClosePosition.profit);\n          console.groupEnd();\n\n          // Chiudo l'ordine non eseguito\n          _context6.next = 15;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 15:\n          responseDeleteOrder = _context6.sent;\n          // await restartCross(client, accountData, activities)\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine stop\n          levelStop = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Definisco la direzione del nuovo ordine\n          direction = event.direction === \"BUY\" ? \"SELL\" : \"BUY\"; // Apro i nuovi ordini\n          console.group(\"Nuovo Ordine\");\n          _context6.next = 22;\n          return newOrder(client, activities.epic, direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 22:\n          stopOrderResponse = _context6.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A4\"\n          }];\n          positions = [{\n            dealId: activities.positions[0].dealId,\n            dealReference: activities.positions[0].dealReference,\n            direction: activities.positions[0].direction,\n            size: activities.positions[0].size / 2,\n            level: activities.positions[0].level,\n            limitLevel: activities.positions[0].limitLevel,\n            nextStep: null\n          }, {\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: \"A1\"\n          }];\n          _context6.next = 30;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A3', activities, orders, positions);\n        case 30:\n          responseIgActivity = _context6.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context6.next = 41;\n          break;\n        case 38:\n          _context6.prev = 38;\n          _context6.t0 = _context6[\"catch\"](4);\n          console.log(_context6.t0);\n        case 41:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee5, null, [[4, 38]]);\n  }));\n  return function stepA3(_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar stepA4 = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(activities, accountData, event) {\n    var client, _iterator3, _step3, position, responseClosePosition, pip, levelLimit1, levelLimit2, directionLimit1, directionLimit2, limitOrder1Response, limitOrder2Response, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee6$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context7.next = 3;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 3:\n          _context7.prev = 3;\n          // Chiudo tutte le posizioni aperte (-2 contratti)\n          console.group(\"Chiusura posizioni\");\n          _iterator3 = _createForOfIteratorHelper(activities.positions);\n          _context7.prev = 6;\n          _iterator3.s();\n        case 8:\n          if ((_step3 = _iterator3.n()).done) {\n            _context7.next = 18;\n            break;\n          }\n          position = _step3.value;\n          _context7.next = 12;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 12:\n          responseClosePosition = _context7.sent;\n          console.log(\"dealStatus: \", responseClosePosition.dealStatus);\n          console.log(\"affectedDeals: \", responseClosePosition.affectedDeals);\n          console.log(\"profit: \", responseClosePosition.profit);\n        case 16:\n          _context7.next = 8;\n          break;\n        case 18:\n          _context7.next = 23;\n          break;\n        case 20:\n          _context7.prev = 20;\n          _context7.t0 = _context7[\"catch\"](6);\n          _iterator3.e(_context7.t0);\n        case 23:\n          _context7.prev = 23;\n          _iterator3.f();\n          return _context7.finish(23);\n        case 26:\n          console.groupEnd();\n\n          // await restartCross(client, accountData, activities)\n\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine limit\n          levelLimit1 = event.direction === \"SELL\" ? event.level - pip : event.level + pip;\n          levelLimit2 = event.direction === \"SELL\" ? event.level + pip : event.level - pip; // Definisco la direzione del nuovo ordine Limit\n          directionLimit1 = event.direction === \"SELL\" ? \"BUY\" : \"SELL\";\n          directionLimit2 = event.direction; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context7.next = 35;\n          return newOrder(client, activities.epic, directionLimit1, activities.config.contracts, levelLimit1, \"LIMIT\", activities.config.currencies, null, null);\n        case 35:\n          limitOrder1Response = _context7.sent;\n          console.log(\"limitOrder1Response dealStatus: \", limitOrder1Response.dealStatus);\n          console.log(\"limitOrder1Response: \", limitOrder1Response.affectedDeals);\n          _context7.next = 40;\n          return newOrder(client, activities.epic, directionLimit2, activities.config.contracts, levelLimit2, \"LIMIT\", activities.config.currencies, null, event.level);\n        case 40:\n          limitOrder2Response = _context7.sent;\n          console.log(\"limitOrder2Response dealStatus: \", limitOrder2Response.dealStatus);\n          console.log(\"limitOrder2Response: \", limitOrder2Response.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: limitOrder1Response.dealId,\n            dealReference: limitOrder1Response.dealReference,\n            direction: limitOrder1Response.direction,\n            size: limitOrder1Response.size,\n            level: limitOrder1Response.level,\n            limitLevel: limitOrder1Response.limitLevel,\n            nextStep: \"A5\"\n          }, {\n            dealId: limitOrder2Response.dealId,\n            dealReference: limitOrder2Response.dealReference,\n            direction: limitOrder2Response.direction,\n            size: limitOrder2Response.size,\n            level: limitOrder2Response.level,\n            limitLevel: limitOrder2Response.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: \"A4\"\n          }];\n          _context7.next = 48;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A4', activities, orders, positions);\n        case 48:\n          responseIgActivity = _context7.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context7.next = 59;\n          break;\n        case 56:\n          _context7.prev = 56;\n          _context7.t1 = _context7[\"catch\"](3);\n          console.log(_context7.t1);\n        case 59:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee6, null, [[3, 56], [6, 20, 23, 26]]);\n  }));\n  return function stepA4(_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar stepA5 = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(activities, accountData, event) {\n    var refOrder, client, responseDeleteOrder, pip, levelSpot1, levelSpot2, directionLimit1, directionLimit2, limitOrder1Response, limitOrder2Response, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee7$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context8.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context8.prev = 4;\n          _context8.next = 7;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 7:\n          responseDeleteOrder = _context8.sent;\n          // await restartCross(client, accountData, activities)\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine spot\n          levelSpot1 = event.direction === \"BUY\" ? event.level - pip : event.level + pip;\n          levelSpot2 = event.direction === \"BUY\" ? activities.positions[0].level + pip : activities.positions[0].level - pip; // Definisco la direzione del nuovo ordine Limit\n          directionLimit1 = event.direction === \"BUY\" ? \"SELL\" : \"BUY\";\n          directionLimit2 = event.direction; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context8.next = 16;\n          return newOrder(client, activities.epic, directionLimit1, activities.config.contracts, levelSpot1, \"STOP\", activities.config.currencies, null, null);\n        case 16:\n          limitOrder1Response = _context8.sent;\n          console.log(\"limitOrder1Response dealStatus: \", limitOrder1Response.dealStatus);\n          console.log(\"limitOrder1Response: \", limitOrder1Response.affectedDeals);\n          _context8.next = 21;\n          return newOrder(client, activities.epic, directionLimit2, activities.config.contracts, levelSpot2, \"STOP\", activities.config.currencies, null, null);\n        case 21:\n          limitOrder2Response = _context8.sent;\n          console.log(\"limitOrder2Response dealStatus: \", limitOrder2Response.dealStatus);\n          console.log(\"limitOrder2Response: \", limitOrder2Response.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: limitOrder1Response.dealId,\n            dealReference: limitOrder1Response.dealReference,\n            direction: limitOrder1Response.direction,\n            size: limitOrder1Response.size,\n            level: limitOrder1Response.level,\n            limitLevel: limitOrder1Response.limitLevel,\n            nextStep: \"A5\"\n          }, {\n            dealId: limitOrder2Response.dealId,\n            dealReference: limitOrder2Response.dealReference,\n            direction: limitOrder2Response.direction,\n            size: limitOrder2Response.size,\n            level: limitOrder2Response.level,\n            limitLevel: limitOrder2Response.limitLevel,\n            nextStep: \"A5\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }, {\n            dealId: activities.positions[0].dealId,\n            dealReference: activities.positions[0].dealReference,\n            direction: activities.positions[0].direction,\n            size: activities.positions[0].size,\n            level: activities.positions[0].level,\n            limitLevel: activities.positions[0].limitLevel,\n            nextStep: null\n          }];\n          _context8.next = 29;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A5', activities, orders, positions);\n        case 29:\n          responseIgActivity = _context8.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context8.next = 40;\n          break;\n        case 37:\n          _context8.prev = 37;\n          _context8.t0 = _context8[\"catch\"](4);\n          console.log(_context8.t0);\n        case 40:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee7, null, [[4, 37]]);\n  }));\n  return function stepA5(_x18, _x19, _x20) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar stepA6 = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(activities, accountData, event) {\n    var refOrder, client, responseCloseOrder, _iterator4, _step4, position, responseClosePosition, pip, levelStop, levelLimit, stopOrderResponse, limitOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee8$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          });\n          console.log(\"refOrder: \", refOrder);\n\n          // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context9.next = 5;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 5:\n          _context9.prev = 5;\n          _context9.next = 8;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 8:\n          responseCloseOrder = _context9.sent;\n          // Chudo tutto le posizioni (+1 contratto)\n          console.group(\"Chiusura posizioni\");\n          _iterator4 = _createForOfIteratorHelper(activities.positions);\n          _context9.prev = 11;\n          _iterator4.s();\n        case 13:\n          if ((_step4 = _iterator4.n()).done) {\n            _context9.next = 23;\n            break;\n          }\n          position = _step4.value;\n          _context9.next = 17;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 17:\n          responseClosePosition = _context9.sent;\n          console.log(\"dealStatus: \", responseClosePosition.dealStatus);\n          console.log(\"affectedDeals: \", responseClosePosition.affectedDeals);\n          console.log(\"profit: \", responseClosePosition.profit);\n        case 21:\n          _context9.next = 13;\n          break;\n        case 23:\n          _context9.next = 28;\n          break;\n        case 25:\n          _context9.prev = 25;\n          _context9.t0 = _context9[\"catch\"](11);\n          _iterator4.e(_context9.t0);\n        case 28:\n          _context9.prev = 28;\n          _iterator4.f();\n          return _context9.finish(28);\n        case 31:\n          console.groupEnd();\n\n          // await restartCross(client, accountData, activities)\n\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop = event.direction === \"BUY\" ? event.level + pip / 2 : event.level - pip / 2;\n          levelLimit = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context9.next = 38;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 38:\n          stopOrderResponse = _context9.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n          _context9.next = 43;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level);\n        case 43:\n          limitOrderResponse = _context9.sent;\n          console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus);\n          console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A2\"\n          }, {\n            dealId: limitOrderResponse.dealId,\n            dealReference: limitOrderResponse.dealReference,\n            direction: limitOrderResponse.direction,\n            size: limitOrderResponse.size,\n            level: limitOrderResponse.level,\n            limitLevel: limitOrderResponse.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context9.next = 51;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities, orders, positions);\n        case 51:\n          responseIgActivity = _context9.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context9.next = 62;\n          break;\n        case 59:\n          _context9.prev = 59;\n          _context9.t1 = _context9[\"catch\"](5);\n          console.log(_context9.t1);\n        case 62:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee8, null, [[5, 59], [11, 25, 28, 31]]);\n  }));\n  return function stepA6(_x21, _x22, _x23) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar stepA1Bis = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(activities, accountData, event) {\n    var client, responseCloseOrder, pip, levelStop, levelLimit, stopOrderResponse, limitOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee9$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context10.next = 3;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 3:\n          _context10.prev = 3;\n          _context10.next = 6;\n          return client.rest.dealing.deleteOrder(activities.orders[0].dealId);\n        case 6:\n          responseCloseOrder = _context10.sent;\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop = event.direction === \"BUY\" ? event.level + pip / 2 : event.level - pip / 2;\n          levelLimit = event.direction === \"BUY\" ? event.level - pip : event.level + pip; //await restartCross(client, accountData, activities)\n          // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context10.next = 13;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 13:\n          stopOrderResponse = _context10.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals);\n\n          /*if (stopOrderResponse.dealStatus === \"REJECTED\"){\n            await restartCross(accountData, activities)\n            return null\n          }*/\n          _context10.next = 18;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level);\n        case 18:\n          limitOrderResponse = _context10.sent;\n          console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus);\n          console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A2\"\n          }, {\n            dealId: limitOrderResponse.dealId,\n            dealReference: limitOrderResponse.dealReference,\n            direction: limitOrderResponse.direction,\n            size: limitOrderResponse.size,\n            level: limitOrderResponse.level,\n            limitLevel: limitOrderResponse.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: activities.positions[0].dealId,\n            dealReference: activities.positions[0].dealReference,\n            direction: activities.positions[0].direction,\n            size: activities.positions[0].size,\n            level: activities.positions[0].level,\n            limitLevel: activities.positions[0].limitLevel,\n            nextStep: null\n          }];\n          _context10.next = 26;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities, orders, positions);\n        case 26:\n          responseIgActivity = _context10.sent;\n          console.group(\"Ig Activity\");\n          console.log(\"orders:\", responseIgActivity.orders);\n          console.log(\"positions:\", responseIgActivity.positions);\n          console.log(\"step:\", responseIgActivity.step);\n          console.groupEnd();\n          _context10.next = 37;\n          break;\n        case 34:\n          _context10.prev = 34;\n          _context10.t0 = _context10[\"catch\"](3);\n          console.log(_context10.t0);\n        case 37:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee9, null, [[3, 34]]);\n  }));\n  return function stepA1Bis(_x24, _x25, _x26) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar closeActivity = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(client, accountData, epic) {\n    var allOrders, allPositions, ordersToDelete, positionsToDelete, _iterator5, _step5, order, _iterator6, _step6, position;\n    return _regeneratorRuntime().wrap(function _callee10$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return client.rest.dealing.getAllOrders();\n        case 2:\n          allOrders = _context11.sent;\n          _context11.next = 5;\n          return client.rest.dealing.getAllOpenPositions();\n        case 5:\n          allPositions = _context11.sent;\n          ordersToDelete = allOrders.workingOrders.filter(function (row) {\n            return row.workingOrderData.epic === epic;\n          });\n          positionsToDelete = allPositions.positions.filter(function (row) {\n            return row.market.epic === epic;\n          });\n          _iterator5 = _createForOfIteratorHelper(ordersToDelete);\n          _context11.prev = 9;\n          _iterator5.s();\n        case 11:\n          if ((_step5 = _iterator5.n()).done) {\n            _context11.next = 17;\n            break;\n          }\n          order = _step5.value;\n          _context11.next = 15;\n          return client.rest.dealing.deleteOrder(order.workingOrderData.dealId);\n        case 15:\n          _context11.next = 11;\n          break;\n        case 17:\n          _context11.next = 22;\n          break;\n        case 19:\n          _context11.prev = 19;\n          _context11.t0 = _context11[\"catch\"](9);\n          _iterator5.e(_context11.t0);\n        case 22:\n          _context11.prev = 22;\n          _iterator5.f();\n          return _context11.finish(22);\n        case 25:\n          _iterator6 = _createForOfIteratorHelper(positionsToDelete);\n          _context11.prev = 26;\n          _iterator6.s();\n        case 28:\n          if ((_step6 = _iterator6.n()).done) {\n            _context11.next = 34;\n            break;\n          }\n          position = _step6.value;\n          _context11.next = 32;\n          return closePosition(client, position.position.dealId, position.position.direction, position.position.size, false);\n        case 32:\n          _context11.next = 28;\n          break;\n        case 34:\n          _context11.next = 39;\n          break;\n        case 36:\n          _context11.prev = 36;\n          _context11.t1 = _context11[\"catch\"](26);\n          _iterator6.e(_context11.t1);\n        case 39:\n          _context11.prev = 39;\n          _iterator6.f();\n          return _context11.finish(39);\n        case 42:\n          _context11.next = 44;\n          return (0, _mongoDB.deleteIgActivity)(accountData, epic);\n        case 44:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee10, null, [[9, 19, 22, 25], [26, 36, 39, 42]]);\n  }));\n  return function closeActivity(_x27, _x28, _x29) {\n    return _ref10.apply(this, arguments);\n  };\n}();\nvar restartCross = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(client, accountData, crossConfig) {\n    return _regeneratorRuntime().wrap(function _callee11$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee11);\n  }));\n  return function restartCross(_x30, _x31, _x32) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nvar newOrder = /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) {\n    var orderData, dealReference, responseConfirmTrade;\n    return _regeneratorRuntime().wrap(function _callee12$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          orderData = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            level: level,\n            forceOpen: 'true',\n            type: type,\n            currencyCode: currencyCode,\n            timeInForce: 'GOOD_TILL_CANCELLED',\n            goodTillDate: null,\n            guaranteedStop: 'false',\n            stopLevel: stopLevel,\n            stopDistance: null,\n            limitLevel: limitLevel,\n            limitDistance: null\n          };\n          console.log(\"orderData\", orderData);\n          _context13.prev = 2;\n          _context13.next = 5;\n          return client.rest.dealing.createOrder(orderData);\n        case 5:\n          dealReference = _context13.sent;\n          _context13.next = 8;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 8:\n          responseConfirmTrade = _context13.sent;\n          console.log(\"full order response\", responseConfirmTrade);\n          return _context13.abrupt(\"return\", responseConfirmTrade);\n        case 13:\n          _context13.prev = 13;\n          _context13.t0 = _context13[\"catch\"](2);\n          console.log(_context13.t0);\n          return _context13.abrupt(\"return\", _context13.t0);\n        case 17:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee12, null, [[2, 13]]);\n  }));\n  return function newOrder(_x33, _x34, _x35, _x36, _x37, _x38, _x39, _x40, _x41) {\n    return _ref12.apply(this, arguments);\n  };\n}();\nvar closePosition = /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(client, dealId, direction, size, partial) {\n    var data, dealReference;\n    return _regeneratorRuntime().wrap(function _callee13$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          data = {\n            dealId: dealId,\n            epic: null,\n            expiry: null,\n            direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n            size: partial ? size / 2 : size,\n            level: null,\n            orderType: \"MARKET\",\n            timeInForce: \"EXECUTE_AND_ELIMINATE\",\n            quoteId: null\n          };\n          _context14.next = 3;\n          return client.rest.dealing.closePosition(data);\n        case 3:\n          dealReference = _context14.sent;\n          _context14.next = 6;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 6:\n          return _context14.abrupt(\"return\", _context14.sent);\n        case 7:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee13);\n  }));\n  return function closePosition(_x42, _x43, _x44, _x45, _x46) {\n    return _ref13.apply(this, arguments);\n  };\n}();\nexports.closePosition = closePosition;\nvar getCompleteWatchlist = /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(accountData) {\n    var sessionResponse, headerGet, watchlistsReposnse, watchlistId, watchlist;\n    return _regeneratorRuntime().wrap(function _callee14$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return igSession(accountData.username, accountData.password, accountData.apiKey);\n        case 2:\n          sessionResponse = _context15.sent;\n          if (!sessionResponse) {\n            _context15.next = 13;\n            break;\n          }\n          headerGet = {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(accountData.apiKey),\n              'Version': 1,\n              'CST': \"\".concat(sessionResponse.cst),\n              'X-SECURITY-TOKEN': \"\".concat(sessionResponse.xSecurityToken)\n            }\n          };\n          _context15.next = 7;\n          return _axios[\"default\"].get(baseURL + '/watchlists', headerGet);\n        case 7:\n          watchlistsReposnse = _context15.sent;\n          watchlistId = watchlistsReposnse.data.watchlists.find(function (list) {\n            return list.name === \"macchinetta\";\n          });\n          _context15.next = 11;\n          return getWatchlist(watchlistId.id, sessionResponse.cst, sessionResponse.xSecurityToken, accountData.apiKey);\n        case 11:\n          watchlist = _context15.sent;\n          return _context15.abrupt(\"return\", watchlist);\n        case 13:\n          return _context15.abrupt(\"return\", null);\n        case 14:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee14);\n  }));\n  return function getCompleteWatchlist(_x47) {\n    return _ref14.apply(this, arguments);\n  };\n}();\nvar getWatchlist = /*#__PURE__*/function () {\n  var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(watchlistId, cst, xSecurityToken, apiKey) {\n    var headerGet;\n    return _regeneratorRuntime().wrap(function _callee15$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          headerGet = {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(apiKey),\n              'Version': 1,\n              'CST': \"\".concat(cst),\n              'X-SECURITY-TOKEN': \"\".concat(xSecurityToken)\n            }\n          };\n          _context16.next = 3;\n          return _axios[\"default\"].get(baseURL + '/watchlists/' + watchlistId, headerGet);\n        case 3:\n          return _context16.abrupt(\"return\", _context16.sent);\n        case 4:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee15);\n  }));\n  return function getWatchlist(_x48, _x49, _x50, _x51) {\n    return _ref15.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  igSession: igSession,\n  closeActivity: closeActivity,\n  getCompleteWatchlist: getCompleteWatchlist,\n  newOrder: newOrder,\n  stepA0: stepA0,\n  stepA1: stepA1,\n  stepA1Bis: stepA1Bis,\n  stepA2: stepA2,\n  stepA3: stepA3,\n  stepA4: stepA4,\n  stepA5: stepA5,\n  stepA6: stepA6\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlVVJMIiwiaWdTZXNzaW9uIiwiaWRlbnRpZmllciIsInBhc3N3b3JkIiwiYXBpS2V5IiwiYXhpb3MiLCJwb3N0IiwiaGVhZGVycyIsInJlc3BvbnNlIiwiYWNjb3VudElkIiwiZGF0YSIsImN1cnJlbnRBY2NvdW50SWQiLCJjbGllbnRJZCIsImxpZ2h0c3RyZWFtZXJFbmRwb2ludCIsImNzdCIsInhTZWN1cml0eVRva2VuIiwiZXJyb3IiLCJzdGVwQTAiLCJhY2NvdW50RGF0YSIsImNyb3NzTGlzdCIsImNsaWVudCIsIkFQSUNsaWVudCIsIlVSTF9ERU1PIiwicmVzdCIsImxvZ2luIiwiY3JlYXRlU2Vzc2lvbiIsInVzZXJuYW1lIiwiZXBpY0FycmF5IiwiY3Jvc3MiLCJwdXNoIiwiZXBpYyIsIm1hcmtldCIsImdldE1hcmtldERldGFpbHMiLCJtYXJrZXREZXRhaWxzIiwiY3Jvc3NDb25maWciLCJmaW5kIiwiaW5zdHJ1bWVudCIsImF2ZXJhZ2VQcmljZSIsInNuYXBzaG90IiwiYmlkIiwib2ZmZXIiLCJ0b0ZpeGVkIiwic2NhbGluZ0ZhY3RvciIsInRvU3RyaW5nIiwibGVuZ3RoIiwicGlwIiwiTWF0aCIsInJvdW5kIiwicGVyY2VudGFnZSIsIm5ld09yZGVyIiwiY29udHJhY3RzIiwiY3VycmVuY2llcyIsImJ1eU9yZGVyUmVzcG9uc2UiLCJzZWxsT3JkZXJSZXNwb25zZSIsIm9yZGVycyIsImRlYWxJZCIsImRlYWxSZWZlcmVuY2UiLCJkaXJlY3Rpb24iLCJzaXplIiwibGV2ZWwiLCJsaW1pdExldmVsIiwibmV4dFN0ZXAiLCJuZXdJZ0FjdGl2aXR5IiwicmVzcG9uc2VJZ0FjdGl2aXR5IiwiY29uc29sZSIsImdyb3VwIiwibG9nIiwicG9zaXRpb25zIiwic3RlcCIsImdyb3VwRW5kIiwic3RlcEExIiwiYWN0aXZpdGllcyIsImV2ZW50IiwicmVmT3JkZXIiLCJvcmRlciIsImRlYWxpbmciLCJkZWxldGVPcmRlciIsInJlc3BvbnNlRGVsZXRlT3JkZXIiLCJjb25maWciLCJsZXZlbFN0b3AiLCJsZXZlbExpbWl0Iiwic3RvcE9yZGVyUmVzcG9uc2UiLCJkZWFsU3RhdHVzIiwiYWZmZWN0ZWREZWFscyIsImxpbWl0T3JkZXJSZXNwb25zZSIsInN0ZXBBMiIsImNsb3NlUG9zaXRpb24iLCJyZXNwb25zZUNsb3NlUG9zaXRpb24iLCJwcm9maXQiLCJzdGVwQTMiLCJzdGVwQTQiLCJwb3NpdGlvbiIsImxldmVsTGltaXQxIiwibGV2ZWxMaW1pdDIiLCJkaXJlY3Rpb25MaW1pdDEiLCJkaXJlY3Rpb25MaW1pdDIiLCJsaW1pdE9yZGVyMVJlc3BvbnNlIiwibGltaXRPcmRlcjJSZXNwb25zZSIsInN0ZXBBNSIsImxldmVsU3BvdDEiLCJsZXZlbFNwb3QyIiwic3RlcEE2IiwicmVzcG9uc2VDbG9zZU9yZGVyIiwic3RlcEExQmlzIiwiY2xvc2VBY3Rpdml0eSIsImdldEFsbE9yZGVycyIsImFsbE9yZGVycyIsImdldEFsbE9wZW5Qb3NpdGlvbnMiLCJhbGxQb3NpdGlvbnMiLCJvcmRlcnNUb0RlbGV0ZSIsIndvcmtpbmdPcmRlcnMiLCJmaWx0ZXIiLCJyb3ciLCJ3b3JraW5nT3JkZXJEYXRhIiwicG9zaXRpb25zVG9EZWxldGUiLCJkZWxldGVJZ0FjdGl2aXR5IiwicmVzdGFydENyb3NzIiwidHlwZSIsImN1cnJlbmN5Q29kZSIsInN0b3BMZXZlbCIsIm9yZGVyRGF0YSIsImV4cGlyeSIsImZvcmNlT3BlbiIsInRpbWVJbkZvcmNlIiwiZ29vZFRpbGxEYXRlIiwiZ3VhcmFudGVlZFN0b3AiLCJzdG9wRGlzdGFuY2UiLCJsaW1pdERpc3RhbmNlIiwiY3JlYXRlT3JkZXIiLCJjb25maXJtVHJhZGUiLCJyZXNwb25zZUNvbmZpcm1UcmFkZSIsInBhcnRpYWwiLCJvcmRlclR5cGUiLCJxdW90ZUlkIiwiZ2V0Q29tcGxldGVXYXRjaGxpc3QiLCJzZXNzaW9uUmVzcG9uc2UiLCJoZWFkZXJHZXQiLCJnZXQiLCJ3YXRjaGxpc3RzUmVwb3Nuc2UiLCJ3YXRjaGxpc3RJZCIsIndhdGNobGlzdHMiLCJsaXN0IiwibmFtZSIsImdldFdhdGNobGlzdCIsImlkIiwid2F0Y2hsaXN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3N2aWx1cHBvL0RvY3VtZW50cy9TdmlsdXBwbyBKYXZhc2NyaXB0L2Z4QmFja1YxL2xpYi8iLCJzb3VyY2VzIjpbInJlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHtBUElDbGllbnR9IGZyb20gXCJpZy10cmFkaW5nLWFwaVwiO1xuaW1wb3J0IHtkZWxldGVJZ0FjdGl2aXR5LCBnZXRJZ0FjdGl2aXRpZXMsIG5ld0lnQWN0aXZpdHl9IGZyb20gXCIuL21vbmdvREJcIjtcblxuY29uc3QgYmFzZVVSTCA9IFwiaHR0cHM6Ly9kZW1vLWFwaS5pZy5jb20vZ2F0ZXdheS9kZWFsXCJcblxuY29uc3QgaWdTZXNzaW9uID0gYXN5bmMgKGlkZW50aWZpZXIsIHBhc3N3b3JkLCBhcGlLZXkpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc1xuICAgIC5wb3N0KGJhc2VVUkwrJy9zZXNzaW9uJywge1xuICAgICAgaWRlbnRpZmllcixcbiAgICAgIHBhc3N3b3JkXG4gICAgfSwge2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLCAnWC1JRy1BUEktS0VZJzogYCR7YXBpS2V5fWAsICdWZXJzaW9uJzogMn19KVxuXG4gIGlmIChyZXNwb25zZSkge1xuICAgIHJldHVybiB7XG4gICAgICBhY2NvdW50SWQ6IHJlc3BvbnNlLmRhdGEuY3VycmVudEFjY291bnRJZCxcbiAgICAgIGNsaWVudElkOiByZXNwb25zZS5kYXRhLmNsaWVudElkLFxuICAgICAgbGlnaHRzdHJlYW1lckVuZHBvaW50OiByZXNwb25zZS5kYXRhLmxpZ2h0c3RyZWFtZXJFbmRwb2ludCxcbiAgICAgIGNzdDogcmVzcG9uc2UuaGVhZGVycy5jc3QsXG4gICAgICB4U2VjdXJpdHlUb2tlbjogcmVzcG9uc2UuaGVhZGVyc1sneC1zZWN1cml0eS10b2tlbiddXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtlcnJvcjogXCJzZXNzaW9uIGVycm9yXCJ9XG59XG5cbi8qKlxuICogRmFzZSAwXG4gKlxuICogQXBlcnR1cmEgZGkgZHVlIG9yZGluaSBkaSBzZWdubyBvcHBvc3RvIGFsIHByZXp6byBkaSBtZXJjYXRvICstIHggcGlwIGRpIGRpc3RhbnphXG4gKiAqL1xuY29uc3Qgc3RlcEEwID0gYXN5bmMgKGFjY291bnREYXRhLCBjcm9zc0xpc3QpID0+e1xuICAvLyBhcHJvIHVuYSBudW92YSBzZXNzaW9uZVxuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIGNvbnN0IGVwaWNBcnJheSA9IFtdXG4gIGZvciAoY29uc3QgY3Jvc3Mgb2YgY3Jvc3NMaXN0KXtcbiAgICAvLyBjcmVvIHVuIGFycmF5IGNvbnRlbmVudGUgc29sbyBnbGkgZXBpYywgY29zw6wgZGEgZmFyZSB1bmEgY2hpYW1hdGEgdW5pY2FcbiAgICBlcGljQXJyYXkucHVzaChjcm9zcy5lcGljKVxuICB9XG5cbiAgLy9yZWN1cGVybyBpbCBkZXR0YWdsaW8gZGkgdHV0dGkgaSBjcm9zc1xuICBjb25zdCBtYXJrZXREZXRhaWxzID0gYXdhaXQgY2xpZW50LnJlc3QubWFya2V0LmdldE1hcmtldERldGFpbHMoZXBpY0FycmF5KVxuXG4gIC8vUGVyIG9nbmkgY3Jvc3MgYXBybyBsYSBwb29zaXppb25lIEEwXG4gIGZvciAoY29uc3QgbWFya2V0IG9mIG1hcmtldERldGFpbHMubWFya2V0RGV0YWlscyl7XG4gICAgY29uc3QgY3Jvc3NDb25maWcgPSBjcm9zc0xpc3QuZmluZChjcm9zcyA9PiBjcm9zcy5lcGljID09PSBtYXJrZXQuaW5zdHJ1bWVudC5lcGljKVxuXG4gICAgY29uc3QgYXZlcmFnZVByaWNlID0gKygobWFya2V0LnNuYXBzaG90LmJpZCArIG1hcmtldC5zbmFwc2hvdC5vZmZlcikgLyAyKS50b0ZpeGVkKFxuICAgICAgbWFya2V0LnNuYXBzaG90LnNjYWxpbmdGYWN0b3IudG9TdHJpbmcoKS5sZW5ndGgsXG4gICAgKVxuXG4gICAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChhdmVyYWdlUHJpY2UgKiAoY3Jvc3NDb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgbWFya2V0LnNuYXBzaG90LnNjYWxpbmdGYWN0b3JcblxuICAgIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgICBjb25zdCBidXlPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIkJVWVwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZStwaXAsIFwiU1RPUFwiLCBjcm9zc0NvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgIGNvbnN0IHNlbGxPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIlNFTExcIiwgY3Jvc3NDb25maWcuY29udHJhY3RzLCBhdmVyYWdlUHJpY2UtcGlwLCBcIlNUT1BcIiwgY3Jvc3NDb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcblxuICAgIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgICBkZWFsSWQ6IGJ1eU9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogYnV5T3JkZXJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBidXlPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGJ1eU9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBidXlPcmRlclJlc3BvbnNlLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogYnV5T3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgIH0sIHtcbiAgICAgIGRlYWxJZDogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc2VsbE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc2VsbE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBzZWxsT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHNlbGxPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMVwiXG4gICAgfV1cblxuICAgIGNvbnN0IHJlc3BvbnNlSWdBY3Rpdml0eSA9IGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBMCcsICBjcm9zc0NvbmZpZywgb3JkZXJzLCBbXSlcbiAgICBjb25zb2xlLmdyb3VwKFwiSWcgQWN0aXZpdHlcIilcbiAgICBjb25zb2xlLmxvZyhcIm9yZGVyczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5Lm9yZGVycylcbiAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnBvc2l0aW9ucylcbiAgICBjb25zb2xlLmxvZyhcInN0ZXA6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5zdGVwKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICB9XG59XG5cbmNvbnN0IHN0ZXBBMSA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcbiAgLy8gQ2VyY28gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllcy5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgIT09IGV2ZW50LmRlYWxJZClcblxuICAvLyBDcmVvIHVuYSBzZXNzaW9uZSBpZ1xuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hpdWRvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICAgIGNvbnN0IHJlc3BvbnNlRGVsZXRlT3JkZXIgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmRlbGV0ZU9yZGVyKHJlZk9yZGVyLmRlYWxJZClcblxuICAgIC8vIGF3YWl0IHJlc3RhcnRDcm9zcyhjbGllbnQsIGFjY291bnREYXRhLCBhY3Rpdml0aWVzKVxuXG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG4gICAgLy8gRGVmaW5pc2NvIGkgbGl2ZWxsaSBkaSBwcmV6em8gcGVyIGwnb3JkaW5lIFNUT1AgZSBMSU1JVFxuICAgIGNvbnN0IGxldmVsU3RvcCA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsKyhwaXAvMikgOiBldmVudC5sZXZlbC0ocGlwLzIpXG4gICAgY29uc3QgbGV2ZWxMaW1pdCA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsLXBpcCA6IGV2ZW50LmxldmVsK3BpcFxuXG4gICAgLy8gQXBybyBpIG51b3ZpIG9yZGluaVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJOdW92aSBPcmRpbmlcIilcbiAgICBjb25zdCBzdG9wT3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxTdG9wLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2U6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuXG4gICAgY29uc3QgbGltaXRPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbExpbWl0LCBcIkxJTUlUXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIGV2ZW50LmxldmVsKVxuICAgIGNvbnNvbGUubG9nKFwibGltaXRPcmRlclJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBsaW1pdE9yZGVyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXJSZXNwb25zZTogXCIsIGxpbWl0T3JkZXJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICAgIGRlYWxJZDogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc3RvcE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMlwiXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBsaW1pdE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogbGltaXRPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGxpbWl0T3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBsaW1pdE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkEzXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gW3tcbiAgICAgIGRlYWxJZDogZXZlbnQuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogZXZlbnQuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogZXZlbnQuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogZXZlbnQuc2l6ZSxcbiAgICAgIGxldmVsOiBldmVudC5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGV2ZW50LmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH1dXG5cbiAgICBjb25zdCByZXNwb25zZUlnQWN0aXZpdHkgPSBhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCAnQTEnLCAgYWN0aXZpdGllcywgb3JkZXJzLCBwb3NpdGlvbnMpXG4gICAgY29uc29sZS5ncm91cChcIklnIEFjdGl2aXR5XCIpXG4gICAgY29uc29sZS5sb2coXCJvcmRlcnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5vcmRlcnMpXG4gICAgY29uc29sZS5sb2coXCJwb3NpdGlvbnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5wb3NpdGlvbnMpXG4gICAgY29uc29sZS5sb2coXCJzdGVwOlwiLCByZXNwb25zZUlnQWN0aXZpdHkuc3RlcClcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpXG4gIH1cbn1cblxuY29uc3Qgc3RlcEEyID0gYXN5bmMgKGFjdGl2aXRpZXMsIGFjY291bnREYXRhLCBldmVudCkgPT4ge1xuICAvLyBDZXJjbyBsJ29yZGluZSBub24gZXNlZ3VpdG9cbiAgY29uc3QgcmVmT3JkZXIgPSBhY3Rpdml0aWVzLm9yZGVycy5maW5kKG9yZGVyID0+IG9yZGVyLmRlYWxJZCAhPT0gZXZlbnQuZGVhbElkKVxuXG4gIC8vIENyZW8gdW5hIHNlc3Npb25lIGlnXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBUElDbGllbnQoQVBJQ2xpZW50LlVSTF9ERU1PLCBhY2NvdW50RGF0YS5hcGlLZXkpO1xuICBhd2FpdCBjbGllbnQucmVzdC5sb2dpbi5jcmVhdGVTZXNzaW9uKGFjY291bnREYXRhLnVzZXJuYW1lLCBhY2NvdW50RGF0YS5wYXNzd29yZCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBUYWtlIHByb2ZpdCBwb3NpemlvbmUgYXBlcnRhICgxIGNvbnRyYXRvKVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJDaGl1c3VyYSBwb3NpemlvbmVcIilcbiAgICBjb25zdCByZXNwb25zZUNsb3NlUG9zaXRpb24gPSBhd2FpdCBjbG9zZVBvc2l0aW9uKGNsaWVudCwgYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGVhbElkLCBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5kaXJlY3Rpb24sIGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLnNpemUsIGZhbHNlKVxuICAgIGNvbnNvbGUubG9nKFwiZGVhbFN0YXR1czogXCIsIHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUubG9nKFwiYWZmZWN0ZWREZWFsczogXCIsIHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUubG9nKFwicHJvZml0OiBcIiwgcmVzcG9uc2VDbG9zZVBvc2l0aW9uLnByb2ZpdClcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICAgIC8vIENoaXVkbyBsJ29yZGluZSBub24gZXNlZ3VpdG9cbiAgICBjb25zdCByZXNwb25zZURlbGV0ZU9yZGVyID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihyZWZPcmRlci5kZWFsSWQpXG5cbiAgICAvLyBhd2FpdCByZXN0YXJ0Q3Jvc3MoY2xpZW50LCBhY2NvdW50RGF0YSwgYWN0aXZpdGllcylcblxuICAgIC8vIENhbGNvbG8gbGEgZGlzdGFuemEgaW4gcGlwIGRhdGEgbGEgY29uZmlndXJhemlvbmUgZGVsIGNyb3NzXG4gICAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChldmVudC5sZXZlbCAqIChhY3Rpdml0aWVzLmNvbmZpZy5wZXJjZW50YWdlIC8gMTAwKSAqIGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3IpIC9cbiAgICAgIGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3JcblxuICAgIC8vIERlZmluaXNjbyBpIGxpdmVsbGkgZGkgcHJlenpvIHBlciBsJ29yZGluZSBTVE9QIGUgTElNSVRcbiAgICBjb25zdCBsZXZlbFN0b3AgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbCsocGlwLzIpIDogZXZlbnQubGV2ZWwtKHBpcC8yKVxuICAgIGNvbnN0IGxldmVsTGltaXQgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbC1waXAgOiBldmVudC5sZXZlbCtwaXBcblxuICAgIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgICBjb25zb2xlLmdyb3VwKFwiTnVvdmkgT3JkaW5pXCIpXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZXZlbnQuZGlyZWN0aW9uLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGxldmVsU3RvcCwgXCJTVE9QXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZSBkZWFsU3RhdHVzOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcblxuICAgIGNvbnN0IGxpbWl0T3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxMaW1pdCwgXCJMSU1JVFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBldmVudC5sZXZlbClcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2U6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICAgIGRlYWxJZDogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc3RvcE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMlwiXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBsaW1pdE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogbGltaXRPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGxpbWl0T3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBsaW1pdE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkEzXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gW3tcbiAgICAgIGRlYWxJZDogZXZlbnQuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogZXZlbnQuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogZXZlbnQuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogZXZlbnQuc2l6ZSxcbiAgICAgIGxldmVsOiBldmVudC5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGV2ZW50LmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH1dXG5cbiAgICBjb25zdCByZXNwb25zZUlnQWN0aXZpdHkgPSBhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCAnQTEnLCAgYWN0aXZpdGllcywgb3JkZXJzLCBwb3NpdGlvbnMpXG4gICAgY29uc29sZS5ncm91cChcIklnIEFjdGl2aXR5XCIpXG4gICAgY29uc29sZS5sb2coXCJvcmRlcnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5vcmRlcnMpXG4gICAgY29uc29sZS5sb2coXCJwb3NpdGlvbnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5wb3NpdGlvbnMpXG4gICAgY29uc29sZS5sb2coXCJzdGVwOlwiLCByZXNwb25zZUlnQWN0aXZpdHkuc3RlcClcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgfVxufVxuXG5jb25zdCBzdGVwQTMgPSBhc3luYyAoYWN0aXZpdGllcywgYWNjb3VudERhdGEsIGV2ZW50KSA9PiB7XG4gIC8vIENlcmNvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICBjb25zdCByZWZPcmRlciA9IGFjdGl2aXRpZXMub3JkZXJzLmZpbmQob3JkZXIgPT4gb3JkZXIuZGVhbElkICE9PSBldmVudC5kZWFsSWQpXG5cbiAgLy8gQ3JlbyB1bmEgc2Vzc2lvbmUgaWdcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFQSUNsaWVudChBUElDbGllbnQuVVJMX0RFTU8sIGFjY291bnREYXRhLmFwaUtleSk7XG4gIGF3YWl0IGNsaWVudC5yZXN0LmxvZ2luLmNyZWF0ZVNlc3Npb24oYWNjb3VudERhdGEudXNlcm5hbWUsIGFjY291bnREYXRhLnBhc3N3b3JkKTtcblxuICB0cnkge1xuICAgIC8vIENoaXVkbyBtZXTDoCBkZWxsYSBwb3NpemlvbmUgYXBlcnRhIHBpw7kgZGlzdGFudGUgKDAuNSBjb250cmF0dGkpXG4gICAgY29uc29sZS5ncm91cChcIkNoaXVzdXJhIHBvc2l6aW9uZSBwYXJ6aWFsZVwiKVxuICAgIGNvbnN0IHJlc3BvbnNlQ2xvc2VQb3NpdGlvbiA9IGF3YWl0IGNsb3NlUG9zaXRpb24oY2xpZW50LCBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5kZWFsSWQsIGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmRpcmVjdGlvbiwgYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uc2l6ZSwgdHJ1ZSlcbiAgICBjb25zb2xlLmxvZyhcImRlYWxTdGF0dXM6IFwiLCByZXNwb25zZUNsb3NlUG9zaXRpb24uZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcImFmZmVjdGVkRGVhbHM6IFwiLCByZXNwb25zZUNsb3NlUG9zaXRpb24uYWZmZWN0ZWREZWFscylcbiAgICBjb25zb2xlLmxvZyhcInByb2ZpdDogXCIsIHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5wcm9maXQpXG4gICAgY29uc29sZS5ncm91cEVuZCgpXG5cbiAgICAvLyBDaGl1ZG8gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gICAgY29uc3QgcmVzcG9uc2VEZWxldGVPcmRlciA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZGVsZXRlT3JkZXIocmVmT3JkZXIuZGVhbElkKVxuXG4gICAgLy8gYXdhaXQgcmVzdGFydENyb3NzKGNsaWVudCwgYWNjb3VudERhdGEsIGFjdGl2aXRpZXMpXG5cbiAgICAvLyBDYWxjb2xvIGxhIGRpc3RhbnphIGluIHBpcCBkYXRhIGxhIGNvbmZpZ3VyYXppb25lIGRlbCBjcm9zc1xuICAgIGNvbnN0IHBpcCA9IE1hdGgucm91bmQoZXZlbnQubGV2ZWwgKiAoYWN0aXZpdGllcy5jb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yKSAvXG4gICAgICBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yXG5cbiAgICAvLyBEZWZpbmlzY28gaSBsaXZlbGxpIGRpIHByZXp6byBwZXIgbCdvcmRpbmUgc3RvcFxuICAgIGNvbnN0IGxldmVsU3RvcCA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsLXBpcCA6IGV2ZW50LmxldmVsK3BpcFxuICAgIC8vIERlZmluaXNjbyBsYSBkaXJlemlvbmUgZGVsIG51b3ZvIG9yZGluZVxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIlxuXG4gICAgLy8gQXBybyBpIG51b3ZpIG9yZGluaVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJOdW92byBPcmRpbmVcIilcbiAgICBjb25zdCBzdG9wT3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBkaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxTdG9wLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2U6IFwiLCBzdG9wT3JkZXJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICAgIGRlYWxJZDogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc3RvcE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBNFwiXG4gICAgfV1cblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFt7XG4gICAgICBkZWFsSWQ6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLnNpemUvMixcbiAgICAgIGxldmVsOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH0se1xuICAgICAgZGVhbElkOiBldmVudC5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBldmVudC5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBldmVudC5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBldmVudC5zaXplLFxuICAgICAgbGV2ZWw6IGV2ZW50LmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogZXZlbnQubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkExXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcmVzcG9uc2VJZ0FjdGl2aXR5ID0gYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0EzJywgIGFjdGl2aXRpZXMsIG9yZGVycywgcG9zaXRpb25zKVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJJZyBBY3Rpdml0eVwiKVxuICAgIGNvbnNvbGUubG9nKFwib3JkZXJzOlwiLCByZXNwb25zZUlnQWN0aXZpdHkub3JkZXJzKVxuICAgIGNvbnNvbGUubG9nKFwicG9zaXRpb25zOlwiLCByZXNwb25zZUlnQWN0aXZpdHkucG9zaXRpb25zKVxuICAgIGNvbnNvbGUubG9nKFwic3RlcDpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnN0ZXApXG4gICAgY29uc29sZS5ncm91cEVuZCgpXG5cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpXG4gIH1cbn1cblxuY29uc3Qgc3RlcEE0ID0gYXN5bmMgKGFjdGl2aXRpZXMsIGFjY291bnREYXRhLCBldmVudCkgPT4ge1xuICAvLyBDcmVvIHVuYSBzZXNzaW9uZSBpZ1xuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIC8vIGF3YWl0IHJlc3RhcnRDcm9zcyhjbGllbnQsIGFjY291bnREYXRhLCBhY3Rpdml0aWVzKVxuICB0cnkge1xuICAgIC8vIENoaXVkbyB0dXR0ZSBsZSBwb3NpemlvbmkgYXBlcnRlICgtMiBjb250cmF0dGkpXG4gICAgY29uc29sZS5ncm91cChcIkNoaXVzdXJhIHBvc2l6aW9uaVwiKVxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgYWN0aXZpdGllcy5wb3NpdGlvbnMpe1xuICAgICAgY29uc3QgcmVzcG9uc2VDbG9zZVBvc2l0aW9uID0gYXdhaXQgY2xvc2VQb3NpdGlvbihjbGllbnQsIHBvc2l0aW9uLmRlYWxJZCwgcG9zaXRpb24uZGlyZWN0aW9uLCBwb3NpdGlvbi5zaXplLCBmYWxzZSlcbiAgICAgIGNvbnNvbGUubG9nKFwiZGVhbFN0YXR1czogXCIsIHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5kZWFsU3RhdHVzKVxuICAgICAgY29uc29sZS5sb2coXCJhZmZlY3RlZERlYWxzOiBcIiwgcmVzcG9uc2VDbG9zZVBvc2l0aW9uLmFmZmVjdGVkRGVhbHMpXG4gICAgICBjb25zb2xlLmxvZyhcInByb2ZpdDogXCIsIHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5wcm9maXQpXG4gICAgfVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgLy8gYXdhaXQgcmVzdGFydENyb3NzKGNsaWVudCwgYWNjb3VudERhdGEsIGFjdGl2aXRpZXMpXG5cbiAgICAvLyBDYWxjb2xvIGxhIGRpc3RhbnphIGluIHBpcCBkYXRhIGxhIGNvbmZpZ3VyYXppb25lIGRlbCBjcm9zc1xuICAgIGNvbnN0IHBpcCA9IE1hdGgucm91bmQoZXZlbnQubGV2ZWwgKiAoYWN0aXZpdGllcy5jb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yKSAvXG4gICAgICBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yXG5cbiAgICAvLyBEZWZpbmlzY28gaSBsaXZlbGxpIGRpIHByZXp6byBwZXIgbCdvcmRpbmUgbGltaXRcbiAgICBjb25zdCBsZXZlbExpbWl0MSA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJTRUxMXCIgPyBldmVudC5sZXZlbC1waXAgOiBldmVudC5sZXZlbCtwaXBcbiAgICBjb25zdCBsZXZlbExpbWl0MiA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJTRUxMXCIgPyBldmVudC5sZXZlbCtwaXAgOiBldmVudC5sZXZlbC1waXBcbiAgICAvLyBEZWZpbmlzY28gbGEgZGlyZXppb25lIGRlbCBudW92byBvcmRpbmUgTGltaXRcbiAgICBjb25zdCBkaXJlY3Rpb25MaW1pdDEgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiU0VMTFwiID8gXCJCVVlcIiA6IFwiU0VMTFwiXG4gICAgY29uc3QgZGlyZWN0aW9uTGltaXQyID0gZXZlbnQuZGlyZWN0aW9uXG5cbiAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgY29uc29sZS5ncm91cChcIk51b3ZpIE9yZGluaVwiKVxuICAgIGNvbnN0IGxpbWl0T3JkZXIxUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZGlyZWN0aW9uTGltaXQxLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGxldmVsTGltaXQxLCBcIkxJTUlUXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJsaW1pdE9yZGVyMVJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBsaW1pdE9yZGVyMVJlc3BvbnNlLmRlYWxTdGF0dXMpXG4gICAgY29uc29sZS5sb2coXCJsaW1pdE9yZGVyMVJlc3BvbnNlOiBcIiwgbGltaXRPcmRlcjFSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuXG4gICAgY29uc3QgbGltaXRPcmRlcjJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBkaXJlY3Rpb25MaW1pdDIsIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxMaW1pdDIsIFwiTElNSVRcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgZXZlbnQubGV2ZWwpXG4gICAgY29uc29sZS5sb2coXCJsaW1pdE9yZGVyMlJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBsaW1pdE9yZGVyMlJlc3BvbnNlLmRlYWxTdGF0dXMpXG4gICAgY29uc29sZS5sb2coXCJsaW1pdE9yZGVyMlJlc3BvbnNlOiBcIiwgbGltaXRPcmRlcjJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICAgIGRlYWxJZDogbGltaXRPcmRlcjFSZXNwb25zZS5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBsaW1pdE9yZGVyMVJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGxpbWl0T3JkZXIxUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogbGltaXRPcmRlcjFSZXNwb25zZS5zaXplLFxuICAgICAgbGV2ZWw6IGxpbWl0T3JkZXIxUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBsaW1pdE9yZGVyMVJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBNVwiXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBsaW1pdE9yZGVyMlJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGxpbWl0T3JkZXIyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogbGltaXRPcmRlcjJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBsaW1pdE9yZGVyMlJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogbGltaXRPcmRlcjJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGxpbWl0T3JkZXIyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkEzXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gW3tcbiAgICAgIGRlYWxJZDogZXZlbnQuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogZXZlbnQuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogZXZlbnQuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogZXZlbnQuc2l6ZSxcbiAgICAgIGxldmVsOiBldmVudC5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGV2ZW50LmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBNFwiXG4gICAgfV1cblxuICAgIGNvbnN0IHJlc3BvbnNlSWdBY3Rpdml0eSA9IGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBNCcsICBhY3Rpdml0aWVzLCBvcmRlcnMsIHBvc2l0aW9ucylcbiAgICBjb25zb2xlLmdyb3VwKFwiSWcgQWN0aXZpdHlcIilcbiAgICBjb25zb2xlLmxvZyhcIm9yZGVyczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5Lm9yZGVycylcbiAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnBvc2l0aW9ucylcbiAgICBjb25zb2xlLmxvZyhcInN0ZXA6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5zdGVwKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICB9XG59XG5cbmNvbnN0IHN0ZXBBNSA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcbiAgLy8gQ2VyY28gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllcy5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgIT09IGV2ZW50LmRlYWxJZClcblxuICAvLyBDcmVvIHVuYSBzZXNzaW9uZSBpZ1xuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hpdWRvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICAgIGNvbnN0IHJlc3BvbnNlRGVsZXRlT3JkZXIgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmRlbGV0ZU9yZGVyKHJlZk9yZGVyLmRlYWxJZClcblxuICAgIC8vIGF3YWl0IHJlc3RhcnRDcm9zcyhjbGllbnQsIGFjY291bnREYXRhLCBhY3Rpdml0aWVzKVxuXG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG4gICAgLy8gRGVmaW5pc2NvIGkgbGl2ZWxsaSBkaSBwcmV6em8gcGVyIGwnb3JkaW5lIHNwb3RcbiAgICBjb25zdCBsZXZlbFNwb3QxID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gZXZlbnQubGV2ZWwtcGlwIDogZXZlbnQubGV2ZWwrcGlwXG4gICAgY29uc3QgbGV2ZWxTcG90MiA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxldmVsK3BpcCA6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxldmVsLXBpcFxuICAgIC8vIERlZmluaXNjbyBsYSBkaXJlemlvbmUgZGVsIG51b3ZvIG9yZGluZSBMaW1pdFxuICAgIGNvbnN0IGRpcmVjdGlvbkxpbWl0MSA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIlxuICAgIGNvbnN0IGRpcmVjdGlvbkxpbWl0MiA9IGV2ZW50LmRpcmVjdGlvblxuXG4gICAgLy8gQXBybyBpIG51b3ZpIG9yZGluaVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJOdW92aSBPcmRpbmlcIilcbiAgICBjb25zdCBsaW1pdE9yZGVyMVJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGRpcmVjdGlvbkxpbWl0MSwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFNwb3QxLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXIxUmVzcG9uc2UgZGVhbFN0YXR1czogXCIsIGxpbWl0T3JkZXIxUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXIxUmVzcG9uc2U6IFwiLCBsaW1pdE9yZGVyMVJlc3BvbnNlLmFmZmVjdGVkRGVhbHMpXG5cbiAgICBjb25zdCBsaW1pdE9yZGVyMlJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGRpcmVjdGlvbkxpbWl0MiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFNwb3QyLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXIyUmVzcG9uc2UgZGVhbFN0YXR1czogXCIsIGxpbWl0T3JkZXIyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXIyUmVzcG9uc2U6IFwiLCBsaW1pdE9yZGVyMlJlc3BvbnNlLmFmZmVjdGVkRGVhbHMpXG4gICAgY29uc29sZS5ncm91cEVuZCgpXG5cbiAgICBjb25zdCBvcmRlcnMgPSBbe1xuICAgICAgZGVhbElkOiBsaW1pdE9yZGVyMVJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGxpbWl0T3JkZXIxUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogbGltaXRPcmRlcjFSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBsaW1pdE9yZGVyMVJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogbGltaXRPcmRlcjFSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGxpbWl0T3JkZXIxUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkE1XCJcbiAgICB9LCB7XG4gICAgICBkZWFsSWQ6IGxpbWl0T3JkZXIyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogbGltaXRPcmRlcjJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBsaW1pdE9yZGVyMlJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGxpbWl0T3JkZXIyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBsaW1pdE9yZGVyMlJlc3BvbnNlLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogbGltaXRPcmRlcjJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTVcIlxuICAgIH1dXG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbe1xuICAgICAgZGVhbElkOiBldmVudC5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBldmVudC5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBldmVudC5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBldmVudC5zaXplLFxuICAgICAgbGV2ZWw6IGV2ZW50LmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogZXZlbnQubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBudWxsXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5zaXplLFxuICAgICAgbGV2ZWw6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0ubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBudWxsXG4gICAgfV1cblxuICAgIGNvbnN0IHJlc3BvbnNlSWdBY3Rpdml0eSA9IGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBNScsICBhY3Rpdml0aWVzLCBvcmRlcnMsIHBvc2l0aW9ucylcbiAgICBjb25zb2xlLmdyb3VwKFwiSWcgQWN0aXZpdHlcIilcbiAgICBjb25zb2xlLmxvZyhcIm9yZGVyczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5Lm9yZGVycylcbiAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnBvc2l0aW9ucylcbiAgICBjb25zb2xlLmxvZyhcInN0ZXA6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5zdGVwKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICB9XG59XG5cbmNvbnN0IHN0ZXBBNiA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcbiAgLy8gQ2VyY28gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllcy5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgIT09IGV2ZW50LmRlYWxJZClcbiAgY29uc29sZS5sb2coXCJyZWZPcmRlcjogXCIsIHJlZk9yZGVyKVxuXG4gIC8vIENyZW8gdW5hIHNlc3Npb25lIGlnXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBUElDbGllbnQoQVBJQ2xpZW50LlVSTF9ERU1PLCBhY2NvdW50RGF0YS5hcGlLZXkpO1xuICBhd2FpdCBjbGllbnQucmVzdC5sb2dpbi5jcmVhdGVTZXNzaW9uKGFjY291bnREYXRhLnVzZXJuYW1lLCBhY2NvdW50RGF0YS5wYXNzd29yZCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBDaGl1ZG8gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gICAgY29uc3QgcmVzcG9uc2VDbG9zZU9yZGVyID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihyZWZPcmRlci5kZWFsSWQpXG5cbiAgICAvLyBDaHVkbyB0dXR0byBsZSBwb3NpemlvbmkgKCsxIGNvbnRyYXR0bylcbiAgICBjb25zb2xlLmdyb3VwKFwiQ2hpdXN1cmEgcG9zaXppb25pXCIpXG4gICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBhY3Rpdml0aWVzLnBvc2l0aW9ucyl7XG4gICAgICBjb25zdCByZXNwb25zZUNsb3NlUG9zaXRpb24gPSBhd2FpdCBjbG9zZVBvc2l0aW9uKGNsaWVudCwgcG9zaXRpb24uZGVhbElkLCBwb3NpdGlvbi5kaXJlY3Rpb24sIHBvc2l0aW9uLnNpemUsIGZhbHNlKVxuICAgICAgY29uc29sZS5sb2coXCJkZWFsU3RhdHVzOiBcIiwgcmVzcG9uc2VDbG9zZVBvc2l0aW9uLmRlYWxTdGF0dXMpXG4gICAgICBjb25zb2xlLmxvZyhcImFmZmVjdGVkRGVhbHM6IFwiLCByZXNwb25zZUNsb3NlUG9zaXRpb24uYWZmZWN0ZWREZWFscylcbiAgICAgIGNvbnNvbGUubG9nKFwicHJvZml0OiBcIiwgcmVzcG9uc2VDbG9zZVBvc2l0aW9uLnByb2ZpdClcbiAgICB9XG4gICAgY29uc29sZS5ncm91cEVuZCgpXG5cbiAgICAvLyBhd2FpdCByZXN0YXJ0Q3Jvc3MoY2xpZW50LCBhY2NvdW50RGF0YSwgYWN0aXZpdGllcylcblxuICAgIC8vIENhbGNvbG8gbGEgZGlzdGFuemEgaW4gcGlwIGRhdGEgbGEgY29uZmlndXJhemlvbmUgZGVsIGNyb3NzXG4gICAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChldmVudC5sZXZlbCAqIChhY3Rpdml0aWVzLmNvbmZpZy5wZXJjZW50YWdlIC8gMTAwKSAqIGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3IpIC9cbiAgICAgIGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3JcblxuICAgIC8vIERlZmluaXNjbyBpIGxpdmVsbGkgZGkgcHJlenpvIHBlciBsJ29yZGluZSBTVE9QIGUgTElNSVRcbiAgICBjb25zdCBsZXZlbFN0b3AgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbCsocGlwLzIpIDogZXZlbnQubGV2ZWwtKHBpcC8yKVxuICAgIGNvbnN0IGxldmVsTGltaXQgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbC1waXAgOiBldmVudC5sZXZlbCtwaXBcblxuICAgIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgICBjb25zb2xlLmdyb3VwKFwiTnVvdmkgT3JkaW5pXCIpXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZXZlbnQuZGlyZWN0aW9uLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGxldmVsU3RvcCwgXCJTVE9QXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZSBkZWFsU3RhdHVzOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcblxuICAgIGNvbnN0IGxpbWl0T3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxMaW1pdCwgXCJMSU1JVFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBldmVudC5sZXZlbClcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXJSZXNwb25zZSBkZWFsU3RhdHVzOiBcIiwgbGltaXRPcmRlclJlc3BvbnNlLmRlYWxTdGF0dXMpXG4gICAgY29uc29sZS5sb2coXCJsaW1pdE9yZGVyUmVzcG9uc2U6IFwiLCBsaW1pdE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICAgIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgICBkZWFsSWQ6IHN0b3BPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IHN0b3BPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IHN0b3BPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IHN0b3BPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogc3RvcE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTJcIlxuICAgIH0sIHtcbiAgICAgIGRlYWxJZDogbGltaXRPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGxpbWl0T3JkZXJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBsaW1pdE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogbGltaXRPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogbGltaXRPcmRlclJlc3BvbnNlLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogbGltaXRPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBM1wiXG4gICAgfV1cblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFt7XG4gICAgICBkZWFsSWQ6IGV2ZW50LmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGV2ZW50LmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGV2ZW50LmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGV2ZW50LnNpemUsXG4gICAgICBsZXZlbDogZXZlbnQubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBldmVudC5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IG51bGxcbiAgICB9XVxuXG4gICAgY29uc3QgcmVzcG9uc2VJZ0FjdGl2aXR5ID0gYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0ExJywgIGFjdGl2aXRpZXMsIG9yZGVycywgcG9zaXRpb25zKVxuICAgIGNvbnNvbGUuZ3JvdXAoXCJJZyBBY3Rpdml0eVwiKVxuICAgIGNvbnNvbGUubG9nKFwib3JkZXJzOlwiLCByZXNwb25zZUlnQWN0aXZpdHkub3JkZXJzKVxuICAgIGNvbnNvbGUubG9nKFwicG9zaXRpb25zOlwiLCByZXNwb25zZUlnQWN0aXZpdHkucG9zaXRpb25zKVxuICAgIGNvbnNvbGUubG9nKFwic3RlcDpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnN0ZXApXG4gICAgY29uc29sZS5ncm91cEVuZCgpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICB9XG59XG5cbmNvbnN0IHN0ZXBBMUJpcyA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcblxuICAvLyBDcmVvIHVuYSBzZXNzaW9uZSBpZ1xuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hpdWRvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICAgIGNvbnN0IHJlc3BvbnNlQ2xvc2VPcmRlciA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZGVsZXRlT3JkZXIoYWN0aXZpdGllcy5vcmRlcnNbMF0uZGVhbElkKVxuXG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG4gICAgLy8gRGVmaW5pc2NvIGkgbGl2ZWxsaSBkaSBwcmV6em8gcGVyIGwnb3JkaW5lIFNUT1AgZSBMSU1JVFxuICAgIGNvbnN0IGxldmVsU3RvcCA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsKyhwaXAvMikgOiBldmVudC5sZXZlbC0ocGlwLzIpXG4gICAgY29uc3QgbGV2ZWxMaW1pdCA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsLXBpcCA6IGV2ZW50LmxldmVsK3BpcFxuXG4gICAgLy9hd2FpdCByZXN0YXJ0Q3Jvc3MoY2xpZW50LCBhY2NvdW50RGF0YSwgYWN0aXZpdGllcylcblxuICAgIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgICBjb25zb2xlLmdyb3VwKFwiTnVvdmkgT3JkaW5pXCIpXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZXZlbnQuZGlyZWN0aW9uLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGxldmVsU3RvcCwgXCJTVE9QXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZSBkZWFsU3RhdHVzOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcblxuICAgIC8qaWYgKHN0b3BPcmRlclJlc3BvbnNlLmRlYWxTdGF0dXMgPT09IFwiUkVKRUNURURcIil7XG4gICAgICBhd2FpdCByZXN0YXJ0Q3Jvc3MoYWNjb3VudERhdGEsIGFjdGl2aXRpZXMpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0qL1xuXG4gICAgY29uc3QgbGltaXRPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbExpbWl0LCBcIkxJTUlUXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIGV2ZW50LmxldmVsKVxuICAgIGNvbnNvbGUubG9nKFwibGltaXRPcmRlclJlc3BvbnNlIGRlYWxTdGF0dXM6IFwiLCBsaW1pdE9yZGVyUmVzcG9uc2UuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhcImxpbWl0T3JkZXJSZXNwb25zZTogXCIsIGxpbWl0T3JkZXJSZXNwb25zZS5hZmZlY3RlZERlYWxzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICAgIGRlYWxJZDogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc3RvcE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMlwiXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBsaW1pdE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogbGltaXRPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGxpbWl0T3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBsaW1pdE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgIGxldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBsaW1pdE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkEzXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gW3tcbiAgICAgIGRlYWxJZDogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uc2l6ZSxcbiAgICAgIGxldmVsOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH1dXG5cbiAgICBjb25zdCByZXNwb25zZUlnQWN0aXZpdHkgPSBhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCAnQTEnLCAgYWN0aXZpdGllcywgb3JkZXJzLCBwb3NpdGlvbnMpXG4gICAgY29uc29sZS5ncm91cChcIklnIEFjdGl2aXR5XCIpXG4gICAgY29uc29sZS5sb2coXCJvcmRlcnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5vcmRlcnMpXG4gICAgY29uc29sZS5sb2coXCJwb3NpdGlvbnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5wb3NpdGlvbnMpXG4gICAgY29uc29sZS5sb2coXCJzdGVwOlwiLCByZXNwb25zZUlnQWN0aXZpdHkuc3RlcClcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgfVxufVxuXG5jb25zdCBjbG9zZUFjdGl2aXR5ID0gYXN5bmMgKGNsaWVudCwgYWNjb3VudERhdGEsIGVwaWMpID0+IHtcbiAgY29uc3QgYWxsT3JkZXJzID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5nZXRBbGxPcmRlcnMoKVxuICBjb25zdCBhbGxQb3NpdGlvbnMgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmdldEFsbE9wZW5Qb3NpdGlvbnMoKVxuXG4gIGxldCBvcmRlcnNUb0RlbGV0ZSA9IGFsbE9yZGVycy53b3JraW5nT3JkZXJzLmZpbHRlcihyb3c9PiByb3cud29ya2luZ09yZGVyRGF0YS5lcGljID09PSBlcGljKTtcbiAgbGV0IHBvc2l0aW9uc1RvRGVsZXRlID0gYWxsUG9zaXRpb25zLnBvc2l0aW9ucy5maWx0ZXIocm93PT4gcm93Lm1hcmtldC5lcGljID09PSBlcGljKTtcblxuICBmb3IgKGNvbnN0IG9yZGVyIG9mIG9yZGVyc1RvRGVsZXRlKXtcbiAgICBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmRlbGV0ZU9yZGVyKG9yZGVyLndvcmtpbmdPcmRlckRhdGEuZGVhbElkKVxuICB9XG5cbiAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnNUb0RlbGV0ZSl7XG4gICAgYXdhaXQgY2xvc2VQb3NpdGlvbihjbGllbnQsIHBvc2l0aW9uLnBvc2l0aW9uLmRlYWxJZCwgcG9zaXRpb24ucG9zaXRpb24uZGlyZWN0aW9uLCBwb3NpdGlvbi5wb3NpdGlvbi5zaXplLCBmYWxzZSlcbiAgfVxuXG4gIGF3YWl0IGRlbGV0ZUlnQWN0aXZpdHkoYWNjb3VudERhdGEsIGVwaWMpXG59XG5cbmNvbnN0IHJlc3RhcnRDcm9zcyA9IGFzeW5jIChjbGllbnQsIGFjY291bnREYXRhLCBjcm9zc0NvbmZpZykgPT4ge1xuXG4gIC8vIGF3YWl0IGNsb3NlQWN0aXZpdHkoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljKVxuXG4gIC8qY29uc3QgYXZlcmFnZVByaWNlID0gKygobWFya2V0LnNuYXBzaG90LmJpZCArIG1hcmtldC5zbmFwc2hvdC5vZmZlcikgLyAyKS50b0ZpeGVkKFxuICAgIG1hcmtldC5zbmFwc2hvdC5zY2FsaW5nRmFjdG9yLnRvU3RyaW5nKCkubGVuZ3RoLFxuICApXG5cbiAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChhdmVyYWdlUHJpY2UgKiAoY3Jvc3NDb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvcikgL1xuICAgIG1hcmtldC5zbmFwc2hvdC5zY2FsaW5nRmFjdG9yXG5cbiAgLy8gQXBybyBpIG51b3ZpIG9yZGluaVxuICBjb25zdCBidXlPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIkJVWVwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZStwaXAsIFwiU1RPUFwiLCBjcm9zc0NvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICBjb25zdCBzZWxsT3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgY3Jvc3NDb25maWcuZXBpYywgXCJTRUxMXCIsIGNyb3NzQ29uZmlnLmNvbnRyYWN0cywgYXZlcmFnZVByaWNlLXBpcCwgXCJTVE9QXCIsIGNyb3NzQ29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG5cbiAgY29uc3Qgb3JkZXJzID0gW3tcbiAgICBkZWFsSWQ6IGJ1eU9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgIGRlYWxSZWZlcmVuY2U6IGJ1eU9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICBkaXJlY3Rpb246IGJ1eU9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgIHNpemU6IGJ1eU9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICBsZXZlbDogYnV5T3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICBsaW1pdExldmVsOiBidXlPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgbmV4dFN0ZXA6IFwiQTFcIlxuICB9LCB7XG4gICAgZGVhbElkOiBzZWxsT3JkZXJSZXNwb25zZS5kZWFsSWQsXG4gICAgZGVhbFJlZmVyZW5jZTogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICBkaXJlY3Rpb246IHNlbGxPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICBzaXplOiBzZWxsT3JkZXJSZXNwb25zZS5zaXplLFxuICAgIGxldmVsOiBzZWxsT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICBsaW1pdExldmVsOiBzZWxsT3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgIG5leHRTdGVwOiBcIkExXCJcbiAgfV1cblxuICBjb25zdCByZXNwb25zZUlnQWN0aXZpdHkgPSBhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCAnQTAnLCAgY3Jvc3NDb25maWcsIG9yZGVycywgW10pXG4gIGNvbnNvbGUuZ3JvdXAoXCJJZyBBY3Rpdml0eVwiKVxuICBjb25zb2xlLmxvZyhcIm9yZGVyczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5Lm9yZGVycylcbiAgY29uc29sZS5sb2coXCJwb3NpdGlvbnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5wb3NpdGlvbnMpXG4gIGNvbnNvbGUubG9nKFwic3RlcDpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnN0ZXApXG4gIGNvbnNvbGUuZ3JvdXBFbmQoKSovXG5cbn1cblxuY29uc3QgbmV3T3JkZXIgPSBhc3luYyAoY2xpZW50LCBlcGljLCBkaXJlY3Rpb24sIHNpemUsIGxldmVsLCB0eXBlLCBjdXJyZW5jeUNvZGUsIHN0b3BMZXZlbCwgbGltaXRMZXZlbCkgPT4ge1xuICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgZXBpYzogZXBpYyxcbiAgICBleHBpcnk6ICctJyxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvbixcbiAgICBzaXplOiBzaXplLFxuICAgIGxldmVsOiBsZXZlbCxcbiAgICBmb3JjZU9wZW46ICd0cnVlJyxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGN1cnJlbmN5Q29kZTogY3VycmVuY3lDb2RlLFxuICAgIHRpbWVJbkZvcmNlOiAnR09PRF9USUxMX0NBTkNFTExFRCcsXG4gICAgZ29vZFRpbGxEYXRlOiBudWxsLFxuICAgIGd1YXJhbnRlZWRTdG9wOiAnZmFsc2UnLFxuICAgIHN0b3BMZXZlbDogc3RvcExldmVsLFxuICAgIHN0b3BEaXN0YW5jZTogbnVsbCxcbiAgICBsaW1pdExldmVsOiBsaW1pdExldmVsLFxuICAgIGxpbWl0RGlzdGFuY2U6IG51bGxcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFwib3JkZXJEYXRhXCIsIG9yZGVyRGF0YSlcblxuICB0cnkge1xuICAgIGNvbnN0IGRlYWxSZWZlcmVuY2UgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNyZWF0ZU9yZGVyKG9yZGVyRGF0YSlcbiAgICBjb25zdCByZXNwb25zZUNvbmZpcm1UcmFkZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gICAgY29uc29sZS5sb2coXCJmdWxsIG9yZGVyIHJlc3BvbnNlXCIsIHJlc3BvbnNlQ29uZmlybVRyYWRlKVxuICAgIHJldHVybiByZXNwb25zZUNvbmZpcm1UcmFkZVxuICB9Y2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKVxuICAgIHJldHVybiBlXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNsb3NlUG9zaXRpb24gPSBhc3luYyAoY2xpZW50LCBkZWFsSWQsIGRpcmVjdGlvbiwgc2l6ZSwgcGFydGlhbCkgPT4ge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGRlYWxJZDogZGVhbElkLFxuICAgIGVwaWM6IG51bGwsXG4gICAgZXhwaXJ5OiBudWxsLFxuICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uID09PSBcIkJVWVwiID8gXCJTRUxMXCIgOiBcIkJVWVwiLFxuICAgIHNpemU6IHBhcnRpYWwgPyBzaXplLzIgOiBzaXplLFxuICAgIGxldmVsOiBudWxsLFxuICAgIG9yZGVyVHlwZTogXCJNQVJLRVRcIixcbiAgICB0aW1lSW5Gb3JjZTogXCJFWEVDVVRFX0FORF9FTElNSU5BVEVcIixcbiAgICBxdW90ZUlkOiBudWxsXG4gIH1cblxuICBjb25zdCBkZWFsUmVmZXJlbmNlID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5jbG9zZVBvc2l0aW9uKGRhdGEpXG4gIHJldHVybiBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxufVxuXG5jb25zdCBnZXRDb21wbGV0ZVdhdGNobGlzdCA9IGFzeW5jIChhY2NvdW50RGF0YSkgPT4ge1xuICBjb25zdCBzZXNzaW9uUmVzcG9uc2UgPSBhd2FpdCBpZ1Nlc3Npb24oYWNjb3VudERhdGEudXNlcm5hbWUsIGFjY291bnREYXRhLnBhc3N3b3JkLCBhY2NvdW50RGF0YS5hcGlLZXkpXG5cbiAgaWYgKHNlc3Npb25SZXNwb25zZSkge1xuICAgIGNvbnN0IGhlYWRlckdldCA9IHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JyxcbiAgICAgICAgJ1gtSUctQVBJLUtFWSc6IGAke2FjY291bnREYXRhLmFwaUtleX1gLFxuICAgICAgICAnVmVyc2lvbic6IDEsXG4gICAgICAgICdDU1QnOiBgJHtzZXNzaW9uUmVzcG9uc2UuY3N0fWAsXG4gICAgICAgICdYLVNFQ1VSSVRZLVRPS0VOJzogYCR7c2Vzc2lvblJlc3BvbnNlLnhTZWN1cml0eVRva2VufWBcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgd2F0Y2hsaXN0c1JlcG9zbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGJhc2VVUkwgKyAnL3dhdGNobGlzdHMnLCBoZWFkZXJHZXQpXG5cbiAgICBjb25zdCB3YXRjaGxpc3RJZCA9ICB3YXRjaGxpc3RzUmVwb3Nuc2UuZGF0YS53YXRjaGxpc3RzLmZpbmQobGlzdCA9PiBsaXN0Lm5hbWUgPT09IFwibWFjY2hpbmV0dGFcIilcblxuICAgIGNvbnN0IHdhdGNobGlzdCA9IGF3YWl0IGdldFdhdGNobGlzdCh3YXRjaGxpc3RJZC5pZCwgc2Vzc2lvblJlc3BvbnNlLmNzdCwgc2Vzc2lvblJlc3BvbnNlLnhTZWN1cml0eVRva2VuLCBhY2NvdW50RGF0YS5hcGlLZXkpXG5cbiAgICByZXR1cm4gd2F0Y2hsaXN0XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuY29uc3QgZ2V0V2F0Y2hsaXN0ID0gYXN5bmMgKHdhdGNobGlzdElkLCBjc3QsIHhTZWN1cml0eVRva2VuLCBhcGlLZXkpID0+IHtcbiAgY29uc3QgaGVhZGVyR2V0ID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXG4gICAgICAnWC1JRy1BUEktS0VZJzogYCR7YXBpS2V5fWAsXG4gICAgICAnVmVyc2lvbic6IDEsXG4gICAgICAnQ1NUJzogYCR7Y3N0fWAsXG4gICAgICAnWC1TRUNVUklUWS1UT0tFTic6IGAke3hTZWN1cml0eVRva2VufWBcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KGJhc2VVUkwgKyAnL3dhdGNobGlzdHMvJyt3YXRjaGxpc3RJZCwgaGVhZGVyR2V0KVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaWdTZXNzaW9uLFxuICBjbG9zZUFjdGl2aXR5LFxuICBnZXRDb21wbGV0ZVdhdGNobGlzdCxcbiAgbmV3T3JkZXIsXG4gIHN0ZXBBMCxcbiAgc3RlcEExLFxuICBzdGVwQTFCaXMsXG4gIHN0ZXBBMixcbiAgc3RlcEEzLFxuICBzdGVwQTQsXG4gIHN0ZXBBNSxcbiAgc3RlcEE2XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBMkU7QUFBQTtBQUFBO0FBQUE7QUFBQSwrQ0FEM0U7QUFBQTtBQUFBO0FBR0EsSUFBTUEsT0FBTyxHQUFHLHNDQUFzQztBQUV0RCxJQUFNQyxTQUFTO0VBQUEsc0VBQUcsaUJBQU9DLFVBQVUsRUFBRUMsUUFBUSxFQUFFQyxNQUFNO0lBQUE7SUFBQTtNQUFBO1FBQUE7VUFBQTtVQUFBLE9BQzVCQyxpQkFBSyxDQUN6QkMsSUFBSSxDQUFDTixPQUFPLEdBQUMsVUFBVSxFQUFFO1lBQ3hCRSxVQUFVLEVBQVZBLFVBQVU7WUFDVkMsUUFBUSxFQUFSQTtVQUNGLENBQUMsRUFBRTtZQUFDSSxPQUFPLEVBQUU7Y0FBQyxjQUFjLEVBQUUsaUNBQWlDO2NBQUUsY0FBYyxZQUFLSCxNQUFNLENBQUU7Y0FBRSxTQUFTLEVBQUU7WUFBQztV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","map":{"version":3,"names":["baseURL","igSession","identifier","password","apiKey","axios","post","headers","response","accountId","data","currentAccountId","clientId","lightstreamerEndpoint","cst","xSecurityToken","error","stepA0","accountData","crossList","client","APIClient","URL_DEMO","rest","login","createSession","username","epicArray","cross","push","epic","market","getMarketDetails","marketDetails","crossConfig","find","instrument","averagePrice","snapshot","bid","offer","toFixed","scalingFactor","toString","length","pip","Math","round","percentage","newOrder","contracts","currencies","buyOrderResponse","sellOrderResponse","orders","dealId","dealReference","direction","size","level","limitLevel","nextStep","newIgActivity","responseIgActivity","console","group","log","positions","step","groupEnd","stepA1","activities","event","refOrder","order","dealing","deleteOrder","responseDeleteOrder","config","levelStop","levelLimit","stopOrderResponse","dealStatus","affectedDeals","limitOrderResponse","stepA2","closePosition","responseClosePosition","profit","stepA3","stepA4","position","levelLimit1","levelLimit2","directionLimit1","directionLimit2","limitOrder1Response","limitOrder2Response","stepA5","levelSpot1","levelSpot2","stepA6","responseCloseOrder","stepA1Bis","closeActivity","getAllOrders","allOrders","getAllOpenPositions","allPositions","ordersToDelete","workingOrders","filter","row","workingOrderData","positionsToDelete","deleteIgActivity","restartCross","type","currencyCode","stopLevel","orderData","expiry","forceOpen","timeInForce","goodTillDate","guaranteedStop","stopDistance","limitDistance","createOrder","confirmTrade","responseConfirmTrade","partial","orderType","quoteId","getCompleteWatchlist","sessionResponse","headerGet","get","watchlistsReposnse","watchlistId","watchlists","list","name","getWatchlist","id","watchlist","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["rest.js"],"sourcesContent":["import axios from \"axios\";\nimport {APIClient} from \"ig-trading-api\";\nimport {deleteIgActivity, getIgActivities, newIgActivity} from \"./mongoDB\";\n\nconst baseURL = \"https://demo-api.ig.com/gateway/deal\"\n\nconst igSession = async (identifier, password, apiKey) => {\n  const response = await axios\n    .post(baseURL+'/session', {\n      identifier,\n      password\n    }, {headers: {'Content-Type': 'application/json; charset=UTF-8', 'X-IG-API-KEY': `${apiKey}`, 'Version': 2}})\n\n  if (response) {\n    return {\n      accountId: response.data.currentAccountId,\n      clientId: response.data.clientId,\n      lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n      cst: response.headers.cst,\n      xSecurityToken: response.headers['x-security-token']\n    }\n  }\n\n  return {error: \"session error\"}\n}\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nconst stepA0 = async (accountData, crossList) =>{\n  // apro una nuova sessione\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  const epicArray = []\n  for (const cross of crossList){\n    // creo un array contenente solo gli epic, così da fare una chiamata unica\n    epicArray.push(cross.epic)\n  }\n\n  //recupero il dettaglio di tutti i cross\n  const marketDetails = await client.rest.market.getMarketDetails(epicArray)\n\n  //Per ogni cross apro la poosizione A0\n  for (const market of marketDetails.marketDetails){\n    const crossConfig = crossList.find(cross => cross.epic === market.instrument.epic)\n\n    const averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(\n      market.snapshot.scalingFactor.toString().length,\n    )\n\n    const pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) /\n      market.snapshot.scalingFactor\n\n    // Apro i nuovi ordini\n    const buyOrderResponse = await newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice+pip, \"STOP\", crossConfig.currencies, null, null)\n    const sellOrderResponse = await newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice-pip, \"STOP\", crossConfig.currencies, null, null)\n\n    const orders = [{\n      dealId: buyOrderResponse.dealId,\n      dealReference: buyOrderResponse.dealReference,\n      direction: buyOrderResponse.direction,\n      size: buyOrderResponse.size,\n      level: buyOrderResponse.level,\n      limitLevel: buyOrderResponse.limitLevel,\n      nextStep: \"A1\"\n    }, {\n      dealId: sellOrderResponse.dealId,\n      dealReference: sellOrderResponse.dealReference,\n      direction: sellOrderResponse.direction,\n      size: sellOrderResponse.size,\n      level: sellOrderResponse.level,\n      limitLevel: sellOrderResponse.limitLevel,\n      nextStep: \"A1\"\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A0',  crossConfig, orders, [])\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n  }\n}\n\nconst stepA1 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo l'ordine non eseguito\n    const responseDeleteOrder = await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop = event.direction === \"BUY\" ? event.level+(pip/2) : event.level-(pip/2)\n    const levelLimit = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n\n    const limitOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level)\n    console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus)\n    console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A2\"\n    }, {\n      dealId: limitOrderResponse.dealId,\n      dealReference: limitOrderResponse.dealReference,\n      direction: limitOrderResponse.direction,\n      size: limitOrderResponse.size,\n      level: limitOrderResponse.level,\n      limitLevel: limitOrderResponse.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A1',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA2 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Take profit posizione aperta (1 contrato)\n    console.group(\"Chiusura posizione\")\n    const responseClosePosition = await closePosition(client, activities.positions[0].dealId, activities.positions[0].direction, activities.positions[0].size, false)\n    console.log(\"dealStatus: \", responseClosePosition.dealStatus)\n    console.log(\"affectedDeals: \", responseClosePosition.affectedDeals)\n    console.log(\"profit: \", responseClosePosition.profit)\n    console.groupEnd()\n\n    // Chiudo l'ordine non eseguito\n    const responseDeleteOrder = await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop = event.direction === \"BUY\" ? event.level+(pip/2) : event.level-(pip/2)\n    const levelLimit = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n\n    const limitOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A2\"\n    }, {\n      dealId: limitOrderResponse.dealId,\n      dealReference: limitOrderResponse.dealReference,\n      direction: limitOrderResponse.direction,\n      size: limitOrderResponse.size,\n      level: limitOrderResponse.level,\n      limitLevel: limitOrderResponse.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A1',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA3 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo metà della posizione aperta più distante (0.5 contratti)\n    console.group(\"Chiusura posizione parziale\")\n    const responseClosePosition = await closePosition(client, activities.positions[0].dealId, activities.positions[0].direction, activities.positions[0].size, true)\n    console.log(\"dealStatus: \", responseClosePosition.dealStatus)\n    console.log(\"affectedDeals: \", responseClosePosition.affectedDeals)\n    console.log(\"profit: \", responseClosePosition.profit)\n    console.groupEnd()\n\n    // Chiudo l'ordine non eseguito\n    const responseDeleteOrder = await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine stop\n    const levelStop = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n    // Definisco la direzione del nuovo ordine\n    const direction = event.direction === \"BUY\" ? \"SELL\" : \"BUY\"\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovo Ordine\")\n    const stopOrderResponse = await newOrder(client, activities.epic, direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A4\"\n    }]\n\n    const positions = [{\n      dealId: activities.positions[0].dealId,\n      dealReference: activities.positions[0].dealReference,\n      direction: activities.positions[0].direction,\n      size: activities.positions[0].size/2,\n      level: activities.positions[0].level,\n      limitLevel: activities.positions[0].limitLevel,\n      nextStep: null\n    },{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: \"A1\"\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A3',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA4 = async (activities, accountData, event) => {\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  // await restartCross(client, accountData, activities)\n  try {\n    // Chiudo tutte le posizioni aperte (-2 contratti)\n    console.group(\"Chiusura posizioni\")\n    for (const position of activities.positions){\n      const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n      console.log(\"dealStatus: \", responseClosePosition.dealStatus)\n      console.log(\"affectedDeals: \", responseClosePosition.affectedDeals)\n      console.log(\"profit: \", responseClosePosition.profit)\n    }\n    console.groupEnd()\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine limit\n    const levelLimit1 = event.direction === \"SELL\" ? event.level-pip : event.level+pip\n    const levelLimit2 = event.direction === \"SELL\" ? event.level+pip : event.level-pip\n    // Definisco la direzione del nuovo ordine Limit\n    const directionLimit1 = event.direction === \"SELL\" ? \"BUY\" : \"SELL\"\n    const directionLimit2 = event.direction\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const limitOrder1Response = await newOrder(client, activities.epic, directionLimit1, activities.config.contracts, levelLimit1, \"LIMIT\", activities.config.currencies, null, null)\n    console.log(\"limitOrder1Response dealStatus: \", limitOrder1Response.dealStatus)\n    console.log(\"limitOrder1Response: \", limitOrder1Response.affectedDeals)\n\n    const limitOrder2Response = await newOrder(client, activities.epic, directionLimit2, activities.config.contracts, levelLimit2, \"LIMIT\", activities.config.currencies, null, event.level)\n    console.log(\"limitOrder2Response dealStatus: \", limitOrder2Response.dealStatus)\n    console.log(\"limitOrder2Response: \", limitOrder2Response.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: limitOrder1Response.dealId,\n      dealReference: limitOrder1Response.dealReference,\n      direction: limitOrder1Response.direction,\n      size: limitOrder1Response.size,\n      level: limitOrder1Response.level,\n      limitLevel: limitOrder1Response.limitLevel,\n      nextStep: \"A5\"\n    }, {\n      dealId: limitOrder2Response.dealId,\n      dealReference: limitOrder2Response.dealReference,\n      direction: limitOrder2Response.direction,\n      size: limitOrder2Response.size,\n      level: limitOrder2Response.level,\n      limitLevel: limitOrder2Response.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: \"A4\"\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A4',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA5 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo l'ordine non eseguito\n    const responseDeleteOrder = await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine spot\n    const levelSpot1 = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n    const levelSpot2 = event.direction === \"BUY\" ? activities.positions[0].level+pip : activities.positions[0].level-pip\n    // Definisco la direzione del nuovo ordine Limit\n    const directionLimit1 = event.direction === \"BUY\" ? \"SELL\" : \"BUY\"\n    const directionLimit2 = event.direction\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const limitOrder1Response = await newOrder(client, activities.epic, directionLimit1, activities.config.contracts, levelSpot1, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"limitOrder1Response dealStatus: \", limitOrder1Response.dealStatus)\n    console.log(\"limitOrder1Response: \", limitOrder1Response.affectedDeals)\n\n    const limitOrder2Response = await newOrder(client, activities.epic, directionLimit2, activities.config.contracts, levelSpot2, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"limitOrder2Response dealStatus: \", limitOrder2Response.dealStatus)\n    console.log(\"limitOrder2Response: \", limitOrder2Response.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: limitOrder1Response.dealId,\n      dealReference: limitOrder1Response.dealReference,\n      direction: limitOrder1Response.direction,\n      size: limitOrder1Response.size,\n      level: limitOrder1Response.level,\n      limitLevel: limitOrder1Response.limitLevel,\n      nextStep: \"A5\"\n    }, {\n      dealId: limitOrder2Response.dealId,\n      dealReference: limitOrder2Response.dealReference,\n      direction: limitOrder2Response.direction,\n      size: limitOrder2Response.size,\n      level: limitOrder2Response.level,\n      limitLevel: limitOrder2Response.limitLevel,\n      nextStep: \"A5\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }, {\n      dealId: activities.positions[0].dealId,\n      dealReference: activities.positions[0].dealReference,\n      direction: activities.positions[0].direction,\n      size: activities.positions[0].size,\n      level: activities.positions[0].level,\n      limitLevel: activities.positions[0].limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A5',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA6 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n  console.log(\"refOrder: \", refOrder)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo l'ordine non eseguito\n    const responseCloseOrder = await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // Chudo tutto le posizioni (+1 contratto)\n    console.group(\"Chiusura posizioni\")\n    for (const position of activities.positions){\n      const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n      console.log(\"dealStatus: \", responseClosePosition.dealStatus)\n      console.log(\"affectedDeals: \", responseClosePosition.affectedDeals)\n      console.log(\"profit: \", responseClosePosition.profit)\n    }\n    console.groupEnd()\n\n    // await restartCross(client, accountData, activities)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop = event.direction === \"BUY\" ? event.level+(pip/2) : event.level-(pip/2)\n    const levelLimit = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n\n    const limitOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level)\n    console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus)\n    console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A2\"\n    }, {\n      dealId: limitOrderResponse.dealId,\n      dealReference: limitOrderResponse.dealReference,\n      direction: limitOrderResponse.direction,\n      size: limitOrderResponse.size,\n      level: limitOrderResponse.level,\n      limitLevel: limitOrderResponse.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A1',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst stepA1Bis = async (activities, accountData, event) => {\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo l'ordine non eseguito\n    const responseCloseOrder = await client.rest.dealing.deleteOrder(activities.orders[0].dealId)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop = event.direction === \"BUY\" ? event.level+(pip/2) : event.level-(pip/2)\n    const levelLimit = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    //await restartCross(client, accountData, activities)\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n\n    /*if (stopOrderResponse.dealStatus === \"REJECTED\"){\n      await restartCross(accountData, activities)\n      return null\n    }*/\n\n    const limitOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, event.level)\n    console.log(\"limitOrderResponse dealStatus: \", limitOrderResponse.dealStatus)\n    console.log(\"limitOrderResponse: \", limitOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A2\"\n    }, {\n      dealId: limitOrderResponse.dealId,\n      dealReference: limitOrderResponse.dealReference,\n      direction: limitOrderResponse.direction,\n      size: limitOrderResponse.size,\n      level: limitOrderResponse.level,\n      limitLevel: limitOrderResponse.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: activities.positions[0].dealId,\n      dealReference: activities.positions[0].dealReference,\n      direction: activities.positions[0].direction,\n      size: activities.positions[0].size,\n      level: activities.positions[0].level,\n      limitLevel: activities.positions[0].limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A1',  activities, orders, positions)\n    console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()\n\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nconst closeActivity = async (client, accountData, epic) => {\n  const allOrders = await client.rest.dealing.getAllOrders()\n  const allPositions = await client.rest.dealing.getAllOpenPositions()\n\n  let ordersToDelete = allOrders.workingOrders.filter(row=> row.workingOrderData.epic === epic);\n  let positionsToDelete = allPositions.positions.filter(row=> row.market.epic === epic);\n\n  for (const order of ordersToDelete){\n    await client.rest.dealing.deleteOrder(order.workingOrderData.dealId)\n  }\n\n  for (const position of positionsToDelete){\n    await closePosition(client, position.position.dealId, position.position.direction, position.position.size, false)\n  }\n\n  await deleteIgActivity(accountData, epic)\n}\n\nconst restartCross = async (client, accountData, crossConfig) => {\n\n  // await closeActivity(client, crossConfig.epic)\n\n  /*const averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(\n    market.snapshot.scalingFactor.toString().length,\n  )\n\n  const pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) /\n    market.snapshot.scalingFactor\n\n  // Apro i nuovi ordini\n  const buyOrderResponse = await newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice+pip, \"STOP\", crossConfig.currencies, null, null)\n  const sellOrderResponse = await newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice-pip, \"STOP\", crossConfig.currencies, null, null)\n\n  const orders = [{\n    dealId: buyOrderResponse.dealId,\n    dealReference: buyOrderResponse.dealReference,\n    direction: buyOrderResponse.direction,\n    size: buyOrderResponse.size,\n    level: buyOrderResponse.level,\n    limitLevel: buyOrderResponse.limitLevel,\n    nextStep: \"A1\"\n  }, {\n    dealId: sellOrderResponse.dealId,\n    dealReference: sellOrderResponse.dealReference,\n    direction: sellOrderResponse.direction,\n    size: sellOrderResponse.size,\n    level: sellOrderResponse.level,\n    limitLevel: sellOrderResponse.limitLevel,\n    nextStep: \"A1\"\n  }]\n\n  const responseIgActivity = await newIgActivity(accountData, 'A0',  crossConfig, orders, [])\n  console.group(\"Ig Activity\")\n  console.log(\"orders:\", responseIgActivity.orders)\n  console.log(\"positions:\", responseIgActivity.positions)\n  console.log(\"step:\", responseIgActivity.step)\n  console.groupEnd()*/\n\n}\n\nconst newOrder = async (client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) => {\n  const orderData = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    level: level,\n    forceOpen: 'true',\n    type: type,\n    currencyCode: currencyCode,\n    timeInForce: 'GOOD_TILL_CANCELLED',\n    goodTillDate: null,\n    guaranteedStop: 'false',\n    stopLevel: stopLevel,\n    stopDistance: null,\n    limitLevel: limitLevel,\n    limitDistance: null\n  }\n\n  console.log(\"orderData\", orderData)\n\n  try {\n    const dealReference = await client.rest.dealing.createOrder(orderData)\n    const responseConfirmTrade = await client.rest.dealing.confirmTrade(dealReference)\n    console.log(\"full order response\", responseConfirmTrade)\n    return responseConfirmTrade\n  }catch (e) {\n    console.log(e)\n    return e\n  }\n}\n\nexport const closePosition = async (client, dealId, direction, size, partial) => {\n  const data = {\n    dealId: dealId,\n    epic: null,\n    expiry: null,\n    direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n    size: partial ? size/2 : size,\n    level: null,\n    orderType: \"MARKET\",\n    timeInForce: \"EXECUTE_AND_ELIMINATE\",\n    quoteId: null\n  }\n\n  const dealReference = await client.rest.dealing.closePosition(data)\n  return await client.rest.dealing.confirmTrade(dealReference)\n}\n\nconst getCompleteWatchlist = async (accountData) => {\n  const sessionResponse = await igSession(accountData.username, accountData.password, accountData.apiKey)\n\n  if (sessionResponse) {\n    const headerGet = {\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n        'X-IG-API-KEY': `${accountData.apiKey}`,\n        'Version': 1,\n        'CST': `${sessionResponse.cst}`,\n        'X-SECURITY-TOKEN': `${sessionResponse.xSecurityToken}`\n      }\n    }\n    const watchlistsReposnse = await axios.get(baseURL + '/watchlists', headerGet)\n\n    const watchlistId =  watchlistsReposnse.data.watchlists.find(list => list.name === \"macchinetta\")\n\n    const watchlist = await getWatchlist(watchlistId.id, sessionResponse.cst, sessionResponse.xSecurityToken, accountData.apiKey)\n\n    return watchlist\n  }\n  return null\n}\n\nconst getWatchlist = async (watchlistId, cst, xSecurityToken, apiKey) => {\n  const headerGet = {\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n      'X-IG-API-KEY': `${apiKey}`,\n      'Version': 1,\n      'CST': `${cst}`,\n      'X-SECURITY-TOKEN': `${xSecurityToken}`\n    }\n  }\n\n  return await axios.get(baseURL + '/watchlists/'+watchlistId, headerGet)\n}\n\nmodule.exports = {\n  igSession,\n  closeActivity,\n  getCompleteWatchlist,\n  newOrder,\n  stepA0,\n  stepA1,\n  stepA1Bis,\n  stepA2,\n  stepA3,\n  stepA4,\n  stepA5,\n  stepA6\n}\n"],"mappings":"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"}},"mtime":1673624850086},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/restV2.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CreatePosition = exports.CreateOrder = exports.CloseUnusedOrders = exports.ClosePosition = exports.CloseAllPositions = exports.CheckOrderType = void 0;\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n/**\n * CheckOrderType\n *\n * Props: ordersBook, dealId, direction\n * Cerco all'interno della lista ordini, l'ordine appena eseguito per identificarne il tipo\n *\n * Return: OrderType\n * */\nvar CheckOrderType = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ordersBook, level) {\n    var orderType, _iterator, _step, order;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _iterator = _createForOfIteratorHelper(ordersBook.orders);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              order = _step.value;\n              if (order.level === level) {\n                orderType = order.type;\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          return _context.abrupt(\"return\", orderType);\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function CheckOrderType(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n **/\nexports.CheckOrderType = CheckOrderType;\nvar CloseUnusedOrders = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ordersBook, openPrice, client) {\n    var _iterator2, _step2, order;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          console.log(\"-- CloseUnusedOrders start--\");\n          if (!(ordersBook.orders.length > 0)) {\n            _context2.next = 26;\n            break;\n          }\n          _iterator2 = _createForOfIteratorHelper(ordersBook.orders);\n          _context2.prev = 3;\n          _iterator2.s();\n        case 5:\n          if ((_step2 = _iterator2.n()).done) {\n            _context2.next = 18;\n            break;\n          }\n          order = _step2.value;\n          if (!(order.level !== openPrice)) {\n            _context2.next = 16;\n            break;\n          }\n          _context2.prev = 8;\n          _context2.next = 11;\n          return client.rest.dealing.deleteOrder(order.dealId).then(function (res) {\n            console.log(\"chiuso ordine | dealReference::\", res);\n          });\n        case 11:\n          _context2.next = 16;\n          break;\n        case 13:\n          _context2.prev = 13;\n          _context2.t0 = _context2[\"catch\"](8);\n          console.log(\"errore chiusura ordine\", _context2.t0);\n        case 16:\n          _context2.next = 5;\n          break;\n        case 18:\n          _context2.next = 23;\n          break;\n        case 20:\n          _context2.prev = 20;\n          _context2.t1 = _context2[\"catch\"](3);\n          _iterator2.e(_context2.t1);\n        case 23:\n          _context2.prev = 23;\n          _iterator2.f();\n          return _context2.finish(23);\n        case 26:\n          console.log(\"-- CloseUnusedOrders end--\");\n        case 27:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[3, 20, 23, 26], [8, 13]]);\n  }));\n  return function CloseUnusedOrders(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n/**\n * */\nexports.CloseUnusedOrders = CloseUnusedOrders;\nvar CloseAllPositions = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(positionsBook, client) {\n    var _iterator3, _step3, position, _iterator4, _step4, _position;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          console.log(\"-- CloseAllPositions --\");\n          if (positionsBook.trendPositions.length > 0) {\n            _iterator3 = _createForOfIteratorHelper(positionsBook.trendPositions);\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                position = _step3.value;\n                ClosePosition(position, client).then(function (res) {\n                  console.log(\"chiusa posizione | dealReference::\", res);\n                });\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n          if (positionsBook.coverPositions.length > 0) {\n            _iterator4 = _createForOfIteratorHelper(positionsBook.coverPositions);\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                _position = _step4.value;\n                ClosePosition(_position, client).then(function (res) {\n                  console.log(\"Chiusa posizione | dealReference::\", res);\n                });\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n          }\n          //console.log(\"----\")\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function CloseAllPositions(_x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n/**\n * CreatePosition\n *\n * */\nexports.CloseAllPositions = CloseAllPositions;\nvar CreatePosition = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(epic, direction, size, currency, client) {\n    var data, dealReference, res;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          data = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            forceOpen: 'true',\n            orderType: 'MARKET',\n            currencyCode: currency,\n            timeInForce: 'EXECUTE_AND_ELIMINATE',\n            guaranteedStop: 'false',\n            stopLevel: null,\n            stopDistance: null,\n            limitLevel: null,\n            limitDistance: null\n          };\n          console.log(\"-- CreatePosition --\");\n          _context4.next = 4;\n          return client.rest.dealing.createPosition(data);\n        case 4:\n          dealReference = _context4.sent;\n          console.log(\"Apro nuova posizione | dealReference:\", dealReference);\n          _context4.next = 8;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 8:\n          res = _context4.sent;\n          console.log(\"---\");\n          return _context4.abrupt(\"return\", res);\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function CreatePosition(_x8, _x9, _x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n/**\n * */\nexports.CreatePosition = CreatePosition;\nvar CreateOrder = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(direction, epic, currency, level, limitlevel, stopLevel, size, type, client) {\n    var data, dealReference, res;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          data = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            level: level.toFixed(4),\n            forceOpen: 'true',\n            type: type,\n            currencyCode: currency,\n            timeInForce: 'GOOD_TILL_CANCELLED',\n            goodTillDate: null,\n            guaranteedStop: 'false',\n            stopLevel: null,\n            stopDistance: stopLevel,\n            limitLevel: null,\n            limitDistance: limitlevel\n          };\n          console.log(\"-- CreateOrder --\");\n          _context5.next = 4;\n          return client.rest.dealing.createOrder(data);\n        case 4:\n          dealReference = _context5.sent;\n          console.log(\"inserito nuovo ordine | dealReference:\", dealReference);\n          _context5.next = 8;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 8:\n          res = _context5.sent;\n          console.log(\"---\");\n          return _context5.abrupt(\"return\", res);\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function CreateOrder(_x13, _x14, _x15, _x16, _x17, _x18, _x19, _x20, _x21) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexports.CreateOrder = CreateOrder;\nvar ClosePosition = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(position, partial, client) {\n    var data, dealReference, res;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          data = {\n            dealId: position.dealId,\n            epic: null,\n            expiry: null,\n            direction: position.direction === \"BUY\" ? \"SELL\" : \"BUY\",\n            size: partial ? position.size / 2 : position.size,\n            level: null,\n            orderType: \"MARKET\",\n            timeInForce: \"EXECUTE_AND_ELIMINATE\",\n            quoteId: null\n          };\n          console.log(\"-- ClosePosition start--\");\n          _context6.next = 4;\n          return client.rest.dealing.closePosition(data);\n        case 4:\n          dealReference = _context6.sent;\n          console.log(\"Chiusa posizione | dealReference:\", dealReference);\n          _context6.next = 8;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 8:\n          res = _context6.sent;\n          console.log(\"-- ClosePosition end--\");\n          return _context6.abrupt(\"return\", res);\n        case 11:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function ClosePosition(_x22, _x23, _x24) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexports.ClosePosition = ClosePosition;\nmodule.exports = {\n  CheckOrderType: CheckOrderType,\n  CloseAllPositions: CloseAllPositions,\n  CloseUnusedOrders: CloseUnusedOrders,\n  CreateOrder: CreateOrder,\n  CreatePosition: CreatePosition,\n  ClosePosition: ClosePosition\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGVja09yZGVyVHlwZSIsIm9yZGVyc0Jvb2siLCJsZXZlbCIsIm9yZGVycyIsIm9yZGVyIiwib3JkZXJUeXBlIiwidHlwZSIsIkNsb3NlVW51c2VkT3JkZXJzIiwib3BlblByaWNlIiwiY2xpZW50IiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInJlc3QiLCJkZWFsaW5nIiwiZGVsZXRlT3JkZXIiLCJkZWFsSWQiLCJ0aGVuIiwicmVzIiwiQ2xvc2VBbGxQb3NpdGlvbnMiLCJwb3NpdGlvbnNCb29rIiwidHJlbmRQb3NpdGlvbnMiLCJwb3NpdGlvbiIsIkNsb3NlUG9zaXRpb24iLCJjb3ZlclBvc2l0aW9ucyIsIkNyZWF0ZVBvc2l0aW9uIiwiZXBpYyIsImRpcmVjdGlvbiIsInNpemUiLCJjdXJyZW5jeSIsImRhdGEiLCJleHBpcnkiLCJmb3JjZU9wZW4iLCJjdXJyZW5jeUNvZGUiLCJ0aW1lSW5Gb3JjZSIsImd1YXJhbnRlZWRTdG9wIiwic3RvcExldmVsIiwic3RvcERpc3RhbmNlIiwibGltaXRMZXZlbCIsImxpbWl0RGlzdGFuY2UiLCJjcmVhdGVQb3NpdGlvbiIsImRlYWxSZWZlcmVuY2UiLCJjb25maXJtVHJhZGUiLCJDcmVhdGVPcmRlciIsImxpbWl0bGV2ZWwiLCJ0b0ZpeGVkIiwiZ29vZFRpbGxEYXRlIiwiY3JlYXRlT3JkZXIiLCJwYXJ0aWFsIiwicXVvdGVJZCIsImNsb3NlUG9zaXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvc3ZpbHVwcG8vRG9jdW1lbnRzL1N2aWx1cHBvIEphdmFzY3JpcHQvZnhCYWNrVjEvbGliLyIsInNvdXJjZXMiOlsicmVzdFYyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2hlY2tPcmRlclR5cGVcbiAqXG4gKiBQcm9wczogb3JkZXJzQm9vaywgZGVhbElkLCBkaXJlY3Rpb25cbiAqIENlcmNvIGFsbCdpbnRlcm5vIGRlbGxhIGxpc3RhIG9yZGluaSwgbCdvcmRpbmUgYXBwZW5hIGVzZWd1aXRvIHBlciBpZGVudGlmaWNhcm5lIGlsIHRpcG9cbiAqXG4gKiBSZXR1cm46IE9yZGVyVHlwZVxuICogKi9cbmV4cG9ydCBjb25zdCBDaGVja09yZGVyVHlwZSA9IGFzeW5jIChvcmRlcnNCb29rLCBsZXZlbCkgPT4ge1xuICBsZXQgb3JkZXJUeXBlXG5cbiAgZm9yIChjb25zdCBvcmRlciBvZiBvcmRlcnNCb29rLm9yZGVycykge1xuICAgIGlmIChvcmRlci5sZXZlbCA9PT0gbGV2ZWwpIHtcbiAgICAgIG9yZGVyVHlwZSA9IG9yZGVyLnR5cGVcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3JkZXJUeXBlXG59XG5cbi8qKlxuICoqL1xuZXhwb3J0IGNvbnN0IENsb3NlVW51c2VkT3JkZXJzID0gYXN5bmMgKG9yZGVyc0Jvb2ssIG9wZW5QcmljZSwgY2xpZW50KSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiLS0gQ2xvc2VVbnVzZWRPcmRlcnMgc3RhcnQtLVwiKVxuICBpZiAob3JkZXJzQm9vay5vcmRlcnMubGVuZ3RoID4gMCkge1xuICAgIGZvciAoY29uc3Qgb3JkZXIgb2Ygb3JkZXJzQm9vay5vcmRlcnMpIHtcbiAgICAgIGlmIChvcmRlci5sZXZlbCAhPT0gb3BlblByaWNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihvcmRlci5kZWFsSWQpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2hpdXNvIG9yZGluZSB8IGRlYWxSZWZlcmVuY2U6OlwiLCByZXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9Y2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yZSBjaGl1c3VyYSBvcmRpbmVcIiwgZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhcIi0tIENsb3NlVW51c2VkT3JkZXJzIGVuZC0tXCIpXG59XG5cbi8qKlxuICogKi9cbmV4cG9ydCBjb25zdCBDbG9zZUFsbFBvc2l0aW9ucyA9IGFzeW5jIChwb3NpdGlvbnNCb29rLCBjbGllbnQpID0+IHtcbiAgY29uc29sZS5sb2coXCItLSBDbG9zZUFsbFBvc2l0aW9ucyAtLVwiKVxuICBpZiAocG9zaXRpb25zQm9vay50cmVuZFBvc2l0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnNCb29rLnRyZW5kUG9zaXRpb25zKSB7XG4gICAgICBDbG9zZVBvc2l0aW9uKHBvc2l0aW9uLCBjbGllbnQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImNoaXVzYSBwb3NpemlvbmUgfCBkZWFsUmVmZXJlbmNlOjpcIiwgcmVzKVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxuICBpZiAocG9zaXRpb25zQm9vay5jb3ZlclBvc2l0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnNCb29rLmNvdmVyUG9zaXRpb25zKSB7XG4gICAgICBDbG9zZVBvc2l0aW9uKHBvc2l0aW9uLCBjbGllbnQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkNoaXVzYSBwb3NpemlvbmUgfCBkZWFsUmVmZXJlbmNlOjpcIiwgcmVzKVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxuICAvL2NvbnNvbGUubG9nKFwiLS0tLVwiKVxufVxuXG4vKipcbiAqIENyZWF0ZVBvc2l0aW9uXG4gKlxuICogKi9cbmV4cG9ydCBjb25zdCBDcmVhdGVQb3NpdGlvbiA9IGFzeW5jIChlcGljLCBkaXJlY3Rpb24sIHNpemUsIGN1cnJlbmN5LCBjbGllbnQpID0+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBlcGljOiBlcGljLFxuICAgIGV4cGlyeTogJy0nLFxuICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLFxuICAgIHNpemU6IHNpemUsXG4gICAgZm9yY2VPcGVuOiAndHJ1ZScsXG4gICAgb3JkZXJUeXBlOiAnTUFSS0VUJyxcbiAgICBjdXJyZW5jeUNvZGU6IGN1cnJlbmN5LFxuICAgIHRpbWVJbkZvcmNlOiAnRVhFQ1VURV9BTkRfRUxJTUlOQVRFJyxcbiAgICBndWFyYW50ZWVkU3RvcDogJ2ZhbHNlJyxcbiAgICBzdG9wTGV2ZWw6IG51bGwsXG4gICAgc3RvcERpc3RhbmNlOiBudWxsLFxuICAgIGxpbWl0TGV2ZWw6IG51bGwsXG4gICAgbGltaXREaXN0YW5jZTogbnVsbCxcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFwiLS0gQ3JlYXRlUG9zaXRpb24gLS1cIilcbiAgY29uc3QgZGVhbFJlZmVyZW5jZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY3JlYXRlUG9zaXRpb24oZGF0YSlcbiAgY29uc29sZS5sb2coXCJBcHJvIG51b3ZhIHBvc2l6aW9uZSB8IGRlYWxSZWZlcmVuY2U6XCIsIGRlYWxSZWZlcmVuY2UpXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gIGNvbnNvbGUubG9nKFwiLS0tXCIpXG4gIHJldHVybiByZXNcbn1cblxuLyoqXG4gKiAqL1xuZXhwb3J0IGNvbnN0IENyZWF0ZU9yZGVyID0gYXN5bmMgKGRpcmVjdGlvbiwgZXBpYywgY3VycmVuY3ksIGxldmVsLCBsaW1pdGxldmVsLCBzdG9wTGV2ZWwsIHNpemUsIHR5cGUsIGNsaWVudCkgPT4ge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGVwaWM6IGVwaWMsXG4gICAgZXhwaXJ5OiAnLScsXG4gICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24sXG4gICAgc2l6ZTogc2l6ZSxcbiAgICBsZXZlbDogbGV2ZWwudG9GaXhlZCg0KSxcbiAgICBmb3JjZU9wZW46ICd0cnVlJyxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGN1cnJlbmN5Q29kZTogY3VycmVuY3ksXG4gICAgdGltZUluRm9yY2U6ICdHT09EX1RJTExfQ0FOQ0VMTEVEJyxcbiAgICBnb29kVGlsbERhdGU6IG51bGwsXG4gICAgZ3VhcmFudGVlZFN0b3A6ICdmYWxzZScsXG4gICAgc3RvcExldmVsOiBudWxsLFxuICAgIHN0b3BEaXN0YW5jZTogc3RvcExldmVsLFxuICAgIGxpbWl0TGV2ZWw6IG51bGwsXG4gICAgbGltaXREaXN0YW5jZTogbGltaXRsZXZlbCxcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFwiLS0gQ3JlYXRlT3JkZXIgLS1cIilcbiAgY29uc3QgZGVhbFJlZmVyZW5jZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY3JlYXRlT3JkZXIoZGF0YSlcbiAgY29uc29sZS5sb2coXCJpbnNlcml0byBudW92byBvcmRpbmUgfCBkZWFsUmVmZXJlbmNlOlwiLCBkZWFsUmVmZXJlbmNlKVxuICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxuICBjb25zb2xlLmxvZyhcIi0tLVwiKVxuICByZXR1cm4gcmVzXG59XG5cbmV4cG9ydCBjb25zdCBDbG9zZVBvc2l0aW9uID0gYXN5bmMgKHBvc2l0aW9uLCBwYXJ0aWFsLCBjbGllbnQpID0+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBkZWFsSWQ6IHBvc2l0aW9uLmRlYWxJZCxcbiAgICBlcGljOiBudWxsLFxuICAgIGV4cGlyeTogbnVsbCxcbiAgICBkaXJlY3Rpb246IHBvc2l0aW9uLmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIixcbiAgICBzaXplOiBwYXJ0aWFsID8gcG9zaXRpb24uc2l6ZS8yIDogcG9zaXRpb24uc2l6ZSxcbiAgICBsZXZlbDogbnVsbCxcbiAgICBvcmRlclR5cGU6IFwiTUFSS0VUXCIsXG4gICAgdGltZUluRm9yY2U6IFwiRVhFQ1VURV9BTkRfRUxJTUlOQVRFXCIsXG4gICAgcXVvdGVJZDogbnVsbFxuICB9XG5cblxuICBjb25zb2xlLmxvZyhcIi0tIENsb3NlUG9zaXRpb24gc3RhcnQtLVwiKVxuICBjb25zdCBkZWFsUmVmZXJlbmNlID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5jbG9zZVBvc2l0aW9uKGRhdGEpXG4gIGNvbnNvbGUubG9nKFwiQ2hpdXNhIHBvc2l6aW9uZSB8IGRlYWxSZWZlcmVuY2U6XCIsIGRlYWxSZWZlcmVuY2UpXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gIGNvbnNvbGUubG9nKFwiLS0gQ2xvc2VQb3NpdGlvbiBlbmQtLVwiKVxuICByZXR1cm4gcmVzXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDaGVja09yZGVyVHlwZSxcbiAgQ2xvc2VBbGxQb3NpdGlvbnMsXG4gIENsb3NlVW51c2VkT3JkZXJzLFxuICBDcmVhdGVPcmRlcixcbiAgQ3JlYXRlUG9zaXRpb24sXG4gIENsb3NlUG9zaXRpb25cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OzsrQ0FDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sSUFBTUEsY0FBYztFQUFBLHNFQUFHLGlCQUFPQyxVQUFVLEVBQUVDLEtBQUs7SUFBQTtJQUFBO01BQUE7UUFBQTtVQUFBLHVDQUdoQ0QsVUFBVSxDQUFDRSxNQUFNO1VBQUE7WUFBckMsb0RBQXVDO2NBQTVCQyxLQUFLO2NBQ2QsSUFBSUEsS0FBSyxDQUFDRixLQUFLLEtBQUtBLEtBQUssRUFBRTtnQkFDekJHLFNBQVMsR0FBR0QsS0FBSyxDQUFDRSxJQUFJO2NBQ3hCO1lBQ0Y7VUFBQztZQUFBO1VBQUE7WUFBQTtVQUFBO1VBQUEsaUNBRU1ELFNBQVM7UUFBQTtRQUFBO1VBQUE7TUFBQTtJQUFBO0VBQUEsQ0FDakI7RUFBQSxnQkFWWUwsY0FBYztJQUFBO0VBQUE7QUFBQSxHQVUxQjs7QUFFRDtBQUNBO0FB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","map":{"version":3,"names":["CheckOrderType","ordersBook","level","orders","order","orderType","type","CloseUnusedOrders","openPrice","client","console","log","length","rest","dealing","deleteOrder","dealId","then","res","CloseAllPositions","positionsBook","trendPositions","position","ClosePosition","coverPositions","CreatePosition","epic","direction","size","currency","data","expiry","forceOpen","currencyCode","timeInForce","guaranteedStop","stopLevel","stopDistance","limitLevel","limitDistance","createPosition","dealReference","confirmTrade","CreateOrder","limitlevel","toFixed","goodTillDate","createOrder","partial","quoteId","closePosition","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["restV2.js"],"sourcesContent":["/**\n * CheckOrderType\n *\n * Props: ordersBook, dealId, direction\n * Cerco all'interno della lista ordini, l'ordine appena eseguito per identificarne il tipo\n *\n * Return: OrderType\n * */\nexport const CheckOrderType = async (ordersBook, level) => {\n  let orderType\n\n  for (const order of ordersBook.orders) {\n    if (order.level === level) {\n      orderType = order.type\n    }\n  }\n\n  return orderType\n}\n\n/**\n **/\nexport const CloseUnusedOrders = async (ordersBook, openPrice, client) => {\n  console.log(\"-- CloseUnusedOrders start--\")\n  if (ordersBook.orders.length > 0) {\n    for (const order of ordersBook.orders) {\n      if (order.level !== openPrice) {\n        try {\n          await client.rest.dealing.deleteOrder(order.dealId)\n            .then((res) => {\n              console.log(\"chiuso ordine | dealReference::\", res)\n            })\n        }catch (e) {\n          console.log(\"errore chiusura ordine\", e)\n        }\n      }\n    }\n  }\n  console.log(\"-- CloseUnusedOrders end--\")\n}\n\n/**\n * */\nexport const CloseAllPositions = async (positionsBook, client) => {\n  console.log(\"-- CloseAllPositions --\")\n  if (positionsBook.trendPositions.length > 0) {\n    for (const position of positionsBook.trendPositions) {\n      ClosePosition(position, client)\n        .then((res) => {\n          console.log(\"chiusa posizione | dealReference::\", res)\n        })\n    }\n  }\n  if (positionsBook.coverPositions.length > 0) {\n    for (const position of positionsBook.coverPositions) {\n      ClosePosition(position, client)\n        .then((res) => {\n          console.log(\"Chiusa posizione | dealReference::\", res)\n        })\n    }\n  }\n  //console.log(\"----\")\n}\n\n/**\n * CreatePosition\n *\n * */\nexport const CreatePosition = async (epic, direction, size, currency, client) => {\n  const data = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    forceOpen: 'true',\n    orderType: 'MARKET',\n    currencyCode: currency,\n    timeInForce: 'EXECUTE_AND_ELIMINATE',\n    guaranteedStop: 'false',\n    stopLevel: null,\n    stopDistance: null,\n    limitLevel: null,\n    limitDistance: null,\n  }\n\n  console.log(\"-- CreatePosition --\")\n  const dealReference = await client.rest.dealing.createPosition(data)\n  console.log(\"Apro nuova posizione | dealReference:\", dealReference)\n  const res = await client.rest.dealing.confirmTrade(dealReference)\n  console.log(\"---\")\n  return res\n}\n\n/**\n * */\nexport const CreateOrder = async (direction, epic, currency, level, limitlevel, stopLevel, size, type, client) => {\n  const data = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    level: level.toFixed(4),\n    forceOpen: 'true',\n    type: type,\n    currencyCode: currency,\n    timeInForce: 'GOOD_TILL_CANCELLED',\n    goodTillDate: null,\n    guaranteedStop: 'false',\n    stopLevel: null,\n    stopDistance: stopLevel,\n    limitLevel: null,\n    limitDistance: limitlevel,\n  }\n\n  console.log(\"-- CreateOrder --\")\n  const dealReference = await client.rest.dealing.createOrder(data)\n  console.log(\"inserito nuovo ordine | dealReference:\", dealReference)\n  const res = await client.rest.dealing.confirmTrade(dealReference)\n  console.log(\"---\")\n  return res\n}\n\nexport const ClosePosition = async (position, partial, client) => {\n  const data = {\n    dealId: position.dealId,\n    epic: null,\n    expiry: null,\n    direction: position.direction === \"BUY\" ? \"SELL\" : \"BUY\",\n    size: partial ? position.size/2 : position.size,\n    level: null,\n    orderType: \"MARKET\",\n    timeInForce: \"EXECUTE_AND_ELIMINATE\",\n    quoteId: null\n  }\n\n\n  console.log(\"-- ClosePosition start--\")\n  const dealReference = await client.rest.dealing.closePosition(data)\n  console.log(\"Chiusa posizione | dealReference:\", dealReference)\n  const res = await client.rest.dealing.confirmTrade(dealReference)\n  console.log(\"-- ClosePosition end--\")\n  return res\n}\n\nmodule.exports = {\n  CheckOrderType,\n  CloseAllPositions,\n  CloseUnusedOrders,\n  CreateOrder,\n  CreatePosition,\n  ClosePosition\n}\n"],"mappings":"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"}},"mtime":1662981826723},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/mongoDB.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar connectToDb = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var url;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          url = process.env.PROD ? process.env.MONGODB_URI : \"mongodb://localhost/fxDB\";\n          _context.prev = 1;\n          // Controlla se una connessione è già aperta\n          _mongoose[\"default\"].set('strictQuery', false);\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context.next = 7;\n            break;\n          }\n          _context.next = 6;\n          return _mongoose[\"default\"].connect(url, {\n            useNewUrlParser: true,\n            useUnifiedTopology: true\n          }, function (error) {\n            console.log(\"error:\", error);\n          });\n        case 6:\n          console.log(\"Connected to database: fxDB\");\n        case 7:\n          _context.next = 12;\n          break;\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](1);\n          console.error(_context.t0);\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 9]]);\n  }));\n  return function connectToDb() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/* User */\n// Crea un modello per rappresentare un documento User\nvar userSchema = new _mongoose[\"default\"].Schema({\n  accountId: String,\n  username: String,\n  password: String,\n  apiKey: String\n});\nvar User = _mongoose[\"default\"].model('User', userSchema);\nvar getUser = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context2.next = 3;\n            break;\n          }\n          _context2.next = 3;\n          return connectToDb();\n        case 3:\n          return _context2.abrupt(\"return\", User.find());\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getUser() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar userFindOne = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(accountId) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context3.next = 3;\n            break;\n          }\n          _context3.next = 3;\n          return connectToDb();\n        case 3:\n          return _context3.abrupt(\"return\", User.findOne({\n            accountId: accountId\n          }));\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function userFindOne(_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar newUser = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context4.next = 3;\n            break;\n          }\n          _context4.next = 3;\n          return connectToDb();\n        case 3:\n          return _context4.abrupt(\"return\", User.create(data));\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function newUser(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n/* Settings */\n// Crea un modello per rappresentare un documento Settings\nvar settingsSchema = new _mongoose[\"default\"].Schema({\n  user: {\n    type: _mongoose[\"default\"].Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  watchlist: [{\n    active: {\n      type: Boolean,\n      \"default\": true\n    },\n    epic: {\n      type: String,\n      required: true\n    },\n    instrumentName: {\n      type: String,\n      required: true\n    },\n    instrumentType: {\n      type: String,\n      required: true\n    },\n    currencies: {\n      type: String,\n      required: true\n    },\n    scalingFactor: {\n      type: Number,\n      required: true\n    },\n    percentage: {\n      type: Number,\n      required: true,\n      \"default\": 0.3\n    },\n    contracts: {\n      type: Number,\n      required: true,\n      \"default\": 1.5\n    }\n  }]\n});\nvar Settings = _mongoose[\"default\"].model('Settings', settingsSchema);\nvar getSetting = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id) {\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          ;\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context5.next = 4;\n            break;\n          }\n          _context5.next = 4;\n          return connectToDb();\n        case 4:\n          return _context5.abrupt(\"return\", Settings.findOne({\n            user: id\n          }));\n        case 5:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getSetting(_x3) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar getSettings = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context6.next = 3;\n            break;\n          }\n          _context6.next = 3;\n          return connectToDb();\n        case 3:\n          return _context6.abrupt(\"return\", Settings.find());\n        case 4:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return function getSettings() {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar updateSettings = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(accountData, watchlist) {\n    var simpleWatchlist;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          simpleWatchlist = [];\n          watchlist.forEach(function (row) {\n            simpleWatchlist.push({\n              active: true,\n              epic: row.instrument.epic,\n              instrumentName: row.instrument.name,\n              instrumentType: row.instrument.type,\n              currencies: row.instrument.currencies[0].name,\n              scalingFactor: row.snapshot.scalingFactor,\n              percentage: 0.3,\n              contracts: 1.5\n            });\n          });\n          _context7.prev = 2;\n          _context7.next = 5;\n          return Settings.findOneAndUpdate({\n            user: accountData._id\n          }, {\n            watchlist: simpleWatchlist\n          }, {\n            upsert: true,\n            \"new\": true\n          });\n        case 5:\n          return _context7.abrupt(\"return\", _context7.sent);\n        case 8:\n          _context7.prev = 8;\n          _context7.t0 = _context7[\"catch\"](2);\n          console.error(_context7.t0);\n        case 11:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[2, 8]]);\n  }));\n  return function updateSettings(_x4, _x5) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar updateAccountSettings = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(accountData, settings) {\n    var _iterator, _step, setting;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          _iterator = _createForOfIteratorHelper(settings);\n          _context8.prev = 2;\n          _iterator.s();\n        case 4:\n          if ((_step = _iterator.n()).done) {\n            _context8.next = 10;\n            break;\n          }\n          setting = _step.value;\n          _context8.next = 8;\n          return Settings.findOneAndUpdate({\n            user: accountData,\n            \"watchlist._id\": setting._id\n          }, {\n            $set: {\n              \"watchlist.$\": setting\n            }\n          }, {\n            upsert: true,\n            \"new\": true\n          });\n        case 8:\n          _context8.next = 4;\n          break;\n        case 10:\n          _context8.next = 15;\n          break;\n        case 12:\n          _context8.prev = 12;\n          _context8.t0 = _context8[\"catch\"](2);\n          _iterator.e(_context8.t0);\n        case 15:\n          _context8.prev = 15;\n          _iterator.f();\n          return _context8.finish(15);\n        case 18:\n          _context8.next = 23;\n          break;\n        case 20:\n          _context8.prev = 20;\n          _context8.t1 = _context8[\"catch\"](0);\n          console.error(_context8.t1);\n        case 23:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[0, 20], [2, 12, 15, 18]]);\n  }));\n  return function updateAccountSettings(_x6, _x7) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\n/* ig */\n// Crea un modello che conterrà tutti i dati relativi a posizioni / ordini\nvar igSchema = new _mongoose[\"default\"].Schema({\n  user: {\n    type: _mongoose[\"default\"].Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  step: {\n    type: String,\n    required: true\n  },\n  epic: {\n    type: String,\n    required: true\n  },\n  config: {\n    instrumentName: {\n      type: String,\n      required: true\n    },\n    currencies: {\n      type: String,\n      required: true\n    },\n    scalingFactor: {\n      type: Number,\n      required: true\n    },\n    percentage: {\n      type: Number,\n      required: true\n    },\n    contracts: {\n      type: Number,\n      required: true\n    }\n  },\n  orders: [{\n    dealId: {\n      type: String,\n      required: true\n    },\n    dealReference: {\n      type: String,\n      required: true\n    },\n    direction: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: Number,\n      required: true\n    },\n    level: {\n      type: Number,\n      required: true\n    },\n    limitLevel: {\n      type: Number,\n      required: true\n    },\n    nextStep: {\n      type: String,\n      required: true\n    }\n  }],\n  positions: [{\n    dealId: {\n      type: String,\n      required: true\n    },\n    dealReference: {\n      type: String,\n      required: true\n    },\n    direction: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: Number,\n      required: true\n    },\n    level: {\n      type: Number,\n      required: true\n    },\n    limitLevel: {\n      type: Number,\n      required: false\n    },\n    nextStep: {\n      type: String,\n      required: false\n    }\n  }]\n});\nvar Ig = _mongoose[\"default\"].model('Ig', igSchema);\nvar getAllIgActivities = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(accountData, epic) {\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context9.next = 3;\n            break;\n          }\n          _context9.next = 3;\n          return connectToDb();\n        case 3:\n          _context9.prev = 3;\n          _context9.next = 6;\n          return Ig.find({\n            user: accountData._id\n          });\n        case 6:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 9:\n          _context9.prev = 9;\n          _context9.t0 = _context9[\"catch\"](3);\n          console.log(_context9.t0);\n        case 12:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9, null, [[3, 9]]);\n  }));\n  return function getAllIgActivities(_x8, _x9) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar getIgActivities = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(accountData, epic) {\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context10.next = 3;\n            break;\n          }\n          _context10.next = 3;\n          return connectToDb();\n        case 3:\n          _context10.prev = 3;\n          _context10.next = 6;\n          return Ig.find({\n            user: accountData._id,\n            epic: epic\n          });\n        case 6:\n          return _context10.abrupt(\"return\", _context10.sent);\n        case 9:\n          _context10.prev = 9;\n          _context10.t0 = _context10[\"catch\"](3);\n          console.log(_context10.t0);\n        case 12:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10, null, [[3, 9]]);\n  }));\n  return function getIgActivities(_x10, _x11) {\n    return _ref10.apply(this, arguments);\n  };\n}();\nvar newIgActivity = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(accountData, step, epic, crossConfig, orders, positions) {\n    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context11.next = 3;\n            break;\n          }\n          _context11.next = 3;\n          return connectToDb();\n        case 3:\n          _context11.prev = 3;\n          _context11.next = 6;\n          return Ig.findOneAndUpdate({\n            user: accountData._id,\n            epic: epic\n          }, {\n            user: accountData._id,\n            step: step,\n            epic: epic,\n            config: crossConfig,\n            orders: orders,\n            positions: positions\n          }, {\n            upsert: true,\n            \"new\": true\n          });\n        case 6:\n          return _context11.abrupt(\"return\", _context11.sent);\n        case 9:\n          _context11.prev = 9;\n          _context11.t0 = _context11[\"catch\"](3);\n          console.error(\"findOneAndUpdate\", _context11.t0);\n        case 12:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11, null, [[3, 9]]);\n  }));\n  return function newIgActivity(_x12, _x13, _x14, _x15, _x16, _x17) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nvar deleteIgActivity = /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(accountData, epic) {\n    return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          if (!(_mongoose[\"default\"].connection.readyState === 0)) {\n            _context12.next = 3;\n            break;\n          }\n          _context12.next = 3;\n          return connectToDb();\n        case 3:\n          _context12.prev = 3;\n          _context12.next = 6;\n          return Ig.findOneAndDelete({\n            user: accountData._id,\n            epic: epic\n          });\n        case 6:\n          return _context12.abrupt(\"return\", _context12.sent);\n        case 9:\n          _context12.prev = 9;\n          _context12.t0 = _context12[\"catch\"](3);\n          console.error(\"findOneAndDelete\", _context12.t0);\n        case 12:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee12, null, [[3, 9]]);\n  }));\n  return function deleteIgActivity(_x18, _x19) {\n    return _ref12.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  connectToDb: connectToDb,\n  getUser: getUser,\n  userFindOne: userFindOne,\n  newUser: newUser,\n  getSettings: getSettings,\n  getSetting: getSetting,\n  updateSettings: updateSettings,\n  updateAccountSettings: updateAccountSettings,\n  getAllIgActivities: getAllIgActivities,\n  getIgActivities: getIgActivities,\n  newIgActivity: newIgActivity,\n  deleteIgActivity: deleteIgActivity\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0VG9EYiIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJQUk9EIiwiTU9OR09EQl9VUkkiLCJtb25nb29zZSIsInNldCIsImNvbm5lY3Rpb24iLCJyZWFkeVN0YXRlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJhY2NvdW50SWQiLCJTdHJpbmciLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYXBpS2V5IiwiVXNlciIsIm1vZGVsIiwiZ2V0VXNlciIsImZpbmQiLCJ1c2VyRmluZE9uZSIsImZpbmRPbmUiLCJuZXdVc2VyIiwiZGF0YSIsImNyZWF0ZSIsInNldHRpbmdzU2NoZW1hIiwidXNlciIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwid2F0Y2hsaXN0IiwiYWN0aXZlIiwiQm9vbGVhbiIsImVwaWMiLCJyZXF1aXJlZCIsImluc3RydW1lbnROYW1lIiwiaW5zdHJ1bWVudFR5cGUiLCJjdXJyZW5jaWVzIiwic2NhbGluZ0ZhY3RvciIsIk51bWJlciIsInBlcmNlbnRhZ2UiLCJjb250cmFjdHMiLCJTZXR0aW5ncyIsImdldFNldHRpbmciLCJpZCIsImdldFNldHRpbmdzIiwidXBkYXRlU2V0dGluZ3MiLCJhY2NvdW50RGF0YSIsInNpbXBsZVdhdGNobGlzdCIsImZvckVhY2giLCJyb3ciLCJwdXNoIiwiaW5zdHJ1bWVudCIsIm5hbWUiLCJzbmFwc2hvdCIsImZpbmRPbmVBbmRVcGRhdGUiLCJfaWQiLCJ1cHNlcnQiLCJ1cGRhdGVBY2NvdW50U2V0dGluZ3MiLCJzZXR0aW5ncyIsInNldHRpbmciLCIkc2V0IiwiaWdTY2hlbWEiLCJzdGVwIiwiY29uZmlnIiwib3JkZXJzIiwiZGVhbElkIiwiZGVhbFJlZmVyZW5jZSIsImRpcmVjdGlvbiIsInNpemUiLCJsZXZlbCIsImxpbWl0TGV2ZWwiLCJuZXh0U3RlcCIsInBvc2l0aW9ucyIsIklnIiwiZ2V0QWxsSWdBY3Rpdml0aWVzIiwiZ2V0SWdBY3Rpdml0aWVzIiwibmV3SWdBY3Rpdml0eSIsImNyb3NzQ29uZmlnIiwiZGVsZXRlSWdBY3Rpdml0eSIsImZpbmRPbmVBbmREZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvc3ZpbHVwcG8vRG9jdW1lbnRzL1N2aWx1cHBvIEphdmFzY3JpcHQvZnhCYWNrVjEvbGliLyIsInNvdXJjZXMiOlsibW9uZ29EQi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IGNvbm5lY3RUb0RiID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5QUk9EID8gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgOiBcIm1vbmdvZGI6Ly9sb2NhbGhvc3QvZnhEQlwiXG5cbiAgdHJ5IHtcbiAgICAvLyBDb250cm9sbGEgc2UgdW5hIGNvbm5lc3Npb25lIMOoIGdpw6AgYXBlcnRhXG4gICAgbW9uZ29vc2Uuc2V0KCdzdHJpY3RRdWVyeScsIGZhbHNlKVxuXG4gICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMCkge1xuICAgICAgLy8gQ2hpdWRpIGxhIGNvbm5lc3Npb25lIGF0dHVhbGVcbiAgICAgIC8vYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5jbG9zZSgpO1xuXG4gICAgICAvLyBBcHJpIHVuYSBudW92YSBjb25uZXNzaW9uZVxuICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdCh1cmwsIHtcbiAgICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gICAgICB9LCAoZXJyb3IpPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6XCIsIGVycm9yKVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBDb25uZWN0ZWQgdG8gZGF0YWJhc2U6IGZ4REJgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH1cbn1cblxuLyogVXNlciAqL1xuLy8gQ3JlYSB1biBtb2RlbGxvIHBlciByYXBwcmVzZW50YXJlIHVuIGRvY3VtZW50byBVc2VyXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGFjY291bnRJZDogU3RyaW5nLFxuICB1c2VybmFtZTogU3RyaW5nLFxuICBwYXNzd29yZDogU3RyaW5nLFxuICBhcGlLZXk6IFN0cmluZ1xufSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuXG5jb25zdCBnZXRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlID09PSAwKXtcbiAgICBhd2FpdCBjb25uZWN0VG9EYigpXG4gIH1cblxuICByZXR1cm4gVXNlci5maW5kKClcbn1cblxuY29uc3QgdXNlckZpbmRPbmUgPSBhc3luYyAoYWNjb3VudElkKSA9PiB7XG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDApe1xuICAgIGF3YWl0IGNvbm5lY3RUb0RiKClcbiAgfVxuXG4gIHJldHVybiBVc2VyLmZpbmRPbmUoe2FjY291bnRJZH0pXG59XG5cblxuY29uc3QgbmV3VXNlciA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDApe1xuICAgIGF3YWl0IGNvbm5lY3RUb0RiKClcbiAgfVxuXG4gIHJldHVybiBVc2VyLmNyZWF0ZShkYXRhKVxufVxuXG4vKiBTZXR0aW5ncyAqL1xuLy8gQ3JlYSB1biBtb2RlbGxvIHBlciByYXBwcmVzZW50YXJlIHVuIGRvY3VtZW50byBTZXR0aW5nc1xuY29uc3Qgc2V0dGluZ3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInIH0sXG4gIHdhdGNobGlzdDogW3tcbiAgICBhY3RpdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZX0sXG4gICAgZXBpYzogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgaW5zdHJ1bWVudE5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGluc3RydW1lbnRUeXBlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjdXJyZW5jaWVzOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxuICAgIHNjYWxpbmdGYWN0b3I6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHBlcmNlbnRhZ2U6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMC4zIH0sXG4gICAgY29udHJhY3RzOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IDEuNSB9LFxuICB9XVxufSk7XG5jb25zdCBTZXR0aW5ncyA9IG1vbmdvb3NlLm1vZGVsKCdTZXR0aW5ncycsIHNldHRpbmdzU2NoZW1hKTtcblxuY29uc3QgZ2V0U2V0dGluZyA9IGFzeW5jIChpZCkgPT4geztcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMCkge1xuICAgIGF3YWl0IGNvbm5lY3RUb0RiKClcbiAgfVxuICByZXR1cm4gU2V0dGluZ3MuZmluZE9uZSh7dXNlcjogaWR9KVxufVxuXG5jb25zdCBnZXRTZXR0aW5ncyA9IGFzeW5jICgpID0+IHtcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMCl7XG4gICAgYXdhaXQgY29ubmVjdFRvRGIoKVxuICB9XG4gIHJldHVybiBTZXR0aW5ncy5maW5kKClcbn1cblxuY29uc3QgdXBkYXRlU2V0dGluZ3MgPSBhc3luYyAoYWNjb3VudERhdGEsIHdhdGNobGlzdCkgPT4ge1xuICBjb25zdCBzaW1wbGVXYXRjaGxpc3QgPSBbXVxuICB3YXRjaGxpc3QuZm9yRWFjaChyb3c9PntcbiAgICBzaW1wbGVXYXRjaGxpc3QucHVzaCh7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBlcGljOiByb3cuaW5zdHJ1bWVudC5lcGljLFxuICAgICAgaW5zdHJ1bWVudE5hbWU6IHJvdy5pbnN0cnVtZW50Lm5hbWUsXG4gICAgICBpbnN0cnVtZW50VHlwZTogcm93Lmluc3RydW1lbnQudHlwZSxcbiAgICAgIGN1cnJlbmNpZXM6IHJvdy5pbnN0cnVtZW50LmN1cnJlbmNpZXNbMF0ubmFtZSxcbiAgICAgIHNjYWxpbmdGYWN0b3I6IHJvdy5zbmFwc2hvdC5zY2FsaW5nRmFjdG9yLFxuICAgICAgcGVyY2VudGFnZTogMC4zLFxuICAgICAgY29udHJhY3RzOiAxLjVcbiAgICB9KVxuICB9KVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IFNldHRpbmdzLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICB7IHVzZXI6IGFjY291bnREYXRhLl9pZCB9LFxuICAgICAgeyB3YXRjaGxpc3Q6IHNpbXBsZVdhdGNobGlzdCB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUsIG5ldzogdHJ1ZSB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuXG5jb25zdCB1cGRhdGVBY2NvdW50U2V0dGluZ3MgPSBhc3luYyAoYWNjb3VudERhdGEsIHNldHRpbmdzKSA9PiB7XG4gIHRyeSB7XG4gICAgZm9yIChjb25zdCBzZXR0aW5nIG9mIHNldHRpbmdzKSB7XG4gICAgICBhd2FpdCBTZXR0aW5ncy5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IHVzZXI6IGFjY291bnREYXRhLCBcIndhdGNobGlzdC5faWRcIjogc2V0dGluZy5faWQgfSxcbiAgICAgICAgeyAkc2V0OiB7IFwid2F0Y2hsaXN0LiRcIjogc2V0dGluZyB9IH0sXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxuICAgICAgKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKiBpZyAqL1xuLy8gQ3JlYSB1biBtb2RlbGxvIGNoZSBjb250ZXJyw6AgdHV0dGkgaSBkYXRpIHJlbGF0aXZpIGEgcG9zaXppb25pIC8gb3JkaW5pXG5jb25zdCBpZ1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB1c2VyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicgfSxcbiAgc3RlcDoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxuICBlcGljOiB7dHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXG4gIGNvbmZpZzoge1xuICAgIGluc3RydW1lbnROYW1lOiB7dHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgY3VycmVuY2llczoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxuICAgIHNjYWxpbmdGYWN0b3I6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBwZXJjZW50YWdlOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgY29udHJhY3RzOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX1cbiAgfSxcbiAgb3JkZXJzOiBbe1xuICAgIGRlYWxJZDoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxuICAgIGRlYWxSZWZlcmVuY2U6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBkaXJlY3Rpb246IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBzaXplOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgbGV2ZWw6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBsaW1pdExldmVsOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgbmV4dFN0ZXA6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcbiAgfV0sXG4gIHBvc2l0aW9uczogW3tcbiAgICBkZWFsSWQ6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBkZWFsUmVmZXJlbmNlOiB7dHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgZGlyZWN0aW9uOiB7dHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgc2l6ZToge3R5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWV9LFxuICAgIGxldmVsOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgbGltaXRMZXZlbDoge3R5cGU6IE51bWJlciwgcmVxdWlyZWQ6IGZhbHNlfSxcbiAgICBuZXh0U3RlcDoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IGZhbHNlfSxcbiAgfV0sXG59KTtcbmNvbnN0IElnID0gbW9uZ29vc2UubW9kZWwoJ0lnJywgaWdTY2hlbWEpO1xuXG5jb25zdCBnZXRBbGxJZ0FjdGl2aXRpZXMgPSBhc3luYyAoYWNjb3VudERhdGEsIGVwaWMpID0+IHtcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMCl7XG4gICAgYXdhaXQgY29ubmVjdFRvRGIoKVxuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgSWcuZmluZCh7dXNlcjogYWNjb3VudERhdGEuX2lkfSlcbiAgfWNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgfVxufVxuXG5jb25zdCBnZXRJZ0FjdGl2aXRpZXMgPSBhc3luYyAoYWNjb3VudERhdGEsIGVwaWMpID0+IHtcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMCl7XG4gICAgYXdhaXQgY29ubmVjdFRvRGIoKVxuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgSWcuZmluZCh7dXNlcjogYWNjb3VudERhdGEuX2lkLCBlcGljOiBlcGljfSwpXG4gIH1jYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpXG4gIH1cbn1cblxuY29uc3QgbmV3SWdBY3Rpdml0eSA9IGFzeW5jIChhY2NvdW50RGF0YSwgc3RlcCwgZXBpYywgY3Jvc3NDb25maWcsIG9yZGVycywgcG9zaXRpb25zKSA9PiB7XG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDApe1xuICAgIGF3YWl0IGNvbm5lY3RUb0RiKClcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IElnLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICB7dXNlcjogYWNjb3VudERhdGEuX2lkLCBlcGljOiBlcGljfSxcbiAgICAgIHtcbiAgICAgICAgdXNlcjogYWNjb3VudERhdGEuX2lkLFxuICAgICAgICBzdGVwOiBzdGVwLFxuICAgICAgICBlcGljOiBlcGljLFxuICAgICAgICBjb25maWc6IGNyb3NzQ29uZmlnLFxuICAgICAgICBvcmRlcnM6IG9yZGVycyxcbiAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnNcbiAgICAgIH0sXG4gICAgICB7dXBzZXJ0OiB0cnVlLCBuZXc6IHRydWV9XG4gICAgKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJmaW5kT25lQW5kVXBkYXRlXCIsIGVycm9yKTtcbiAgfVxufVxuXG5jb25zdCBkZWxldGVJZ0FjdGl2aXR5ID0gYXN5bmMgKGFjY291bnREYXRhLCBlcGljKSA9PiB7XG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDApe1xuICAgIGF3YWl0IGNvbm5lY3RUb0RiKClcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IElnLmZpbmRPbmVBbmREZWxldGUoXG4gICAgICB7dXNlcjogYWNjb3VudERhdGEuX2lkLCBlcGljOiBlcGljfSxcbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcImZpbmRPbmVBbmREZWxldGVcIiwgZXJyb3IpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25uZWN0VG9EYixcbiAgZ2V0VXNlcixcbiAgdXNlckZpbmRPbmUsXG4gIG5ld1VzZXIsXG4gIGdldFNldHRpbmdzLFxuICBnZXRTZXR0aW5nLFxuICB1cGRhdGVTZXR0aW5ncyxcbiAgdXBkYXRlQWNjb3VudFNldHRpbmdzLFxuICBnZXRBbGxJZ0FjdGl2aXRpZXMsXG4gIGdldElnQWN0aXZpdGllcyxcbiAgbmV3SWdBY3Rpdml0eSxcbiAgZGVsZXRlSWdBY3Rpdml0eVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUFnQztBQUFBO0FBQUE7QUFBQTtBQUFBLCtDQUNoQztBQUFBO0FBQUE7QUFDQSxJQUFNQSxXQUFXO0VBQUEsc0VBQUc7SUFBQTtJQUFBO01BQUE7UUFBQTtVQUNaQyxHQUFHLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLEdBQUdGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxXQUFXLEdBQUcsMEJBQTBCO1VBQUE7VUFHakY7VUFDQUMsb0JBQVEsQ0FBQ0MsR0FBRyxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUM7VUFBQSxNQUU5QkQsb0JBQVEsQ0FBQ0UsVUFBVSxDQUFDQyxVQUFVLEtBQUssQ0FBQztZQUFBO1lBQUE7VUFBQTtVQUFBO1VBQUEsT0FLaENILG9CQUFRLENBQUNJLE9BQU8sQ0FBQ1QsR0FBRyxFQUFFO1lBQzFCVSxlQUFlLEVBQUUsSUFBSTtZQUNyQkMsa0JBQWtCLEVBQUU7VUFDdEIsQ0FBQyxFQUFFLFVBQUNDLEtBQUssRUFBRztZQUNWQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxRQUFRLEVBQUVGLEtBQUssQ0FBQztVQUM5QixDQUFDLENBQUM7UUFBQTtVQUVGQyxPQUFPLENBQUND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","map":{"version":3,"names":["connectToDb","url","process","env","PROD","MONGODB_URI","mongoose","set","connection","readyState","connect","useNewUrlParser","useUnifiedTopology","error","console","log","userSchema","Schema","accountId","String","username","password","apiKey","User","model","getUser","find","userFindOne","findOne","newUser","data","create","settingsSchema","user","type","Types","ObjectId","ref","watchlist","active","Boolean","epic","required","instrumentName","instrumentType","currencies","scalingFactor","Number","percentage","contracts","Settings","getSetting","id","getSettings","updateSettings","accountData","simpleWatchlist","forEach","row","push","instrument","name","snapshot","findOneAndUpdate","_id","upsert","updateAccountSettings","settings","setting","$set","igSchema","step","config","orders","dealId","dealReference","direction","size","level","limitLevel","nextStep","positions","Ig","getAllIgActivities","getIgActivities","newIgActivity","crossConfig","deleteIgActivity","findOneAndDelete","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["mongoDB.js"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst connectToDb = async () => {\n  const url = process.env.PROD ? process.env.MONGODB_URI : \"mongodb://localhost/fxDB\"\n\n  try {\n    // Controlla se una connessione è già aperta\n    mongoose.set('strictQuery', false)\n\n    if (mongoose.connection.readyState === 0) {\n      // Chiudi la connessione attuale\n      //await mongoose.connection.close();\n\n      // Apri una nuova connessione\n      await mongoose.connect(url, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n      }, (error)=>{\n        console.log(\"error:\", error)\n      });\n\n      console.log(`Connected to database: fxDB`);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n/* User */\n// Crea un modello per rappresentare un documento User\nconst userSchema = new mongoose.Schema({\n  accountId: String,\n  username: String,\n  password: String,\n  apiKey: String\n});\n\nconst User = mongoose.model('User', userSchema);\n\nconst getUser = async () => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  return User.find()\n}\n\nconst userFindOne = async (accountId) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  return User.findOne({accountId})\n}\n\n\nconst newUser = async (data) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  return User.create(data)\n}\n\n/* Settings */\n// Crea un modello per rappresentare un documento Settings\nconst settingsSchema = new mongoose.Schema({\n  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n  watchlist: [{\n    active: { type: Boolean, default: true},\n    epic: { type: String, required: true },\n    instrumentName: { type: String, required: true },\n    instrumentType: { type: String, required: true },\n    currencies: { type: String, required: true},\n    scalingFactor: { type: Number, required: true },\n    percentage: { type: Number, required: true, default: 0.3 },\n    contracts: { type: Number, required: true, default: 1.5 },\n  }]\n});\nconst Settings = mongoose.model('Settings', settingsSchema);\n\nconst getSetting = async (id) => {;\n  if (mongoose.connection.readyState === 0) {\n    await connectToDb()\n  }\n  return Settings.findOne({user: id})\n}\n\nconst getSettings = async () => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n  return Settings.find()\n}\n\nconst updateSettings = async (accountData, watchlist) => {\n  const simpleWatchlist = []\n  watchlist.forEach(row=>{\n    simpleWatchlist.push({\n      active: true,\n      epic: row.instrument.epic,\n      instrumentName: row.instrument.name,\n      instrumentType: row.instrument.type,\n      currencies: row.instrument.currencies[0].name,\n      scalingFactor: row.snapshot.scalingFactor,\n      percentage: 0.3,\n      contracts: 1.5\n    })\n  })\n\n  try {\n    return await Settings.findOneAndUpdate(\n      { user: accountData._id },\n      { watchlist: simpleWatchlist },\n      { upsert: true, new: true }\n    );\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nconst updateAccountSettings = async (accountData, settings) => {\n  try {\n    for (const setting of settings) {\n      await Settings.findOneAndUpdate(\n        { user: accountData, \"watchlist._id\": setting._id },\n        { $set: { \"watchlist.$\": setting } },\n        { upsert: true, new: true }\n      )\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n/* ig */\n// Crea un modello che conterrà tutti i dati relativi a posizioni / ordini\nconst igSchema = new mongoose.Schema({\n  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n  step: {type: String, required: true},\n  epic: {type: String, required: true},\n  config: {\n    instrumentName: {type: String, required: true},\n    currencies: {type: String, required: true},\n    scalingFactor: {type: Number, required: true},\n    percentage: {type: Number, required: true},\n    contracts: {type: Number, required: true}\n  },\n  orders: [{\n    dealId: {type: String, required: true},\n    dealReference: {type: String, required: true},\n    direction: {type: String, required: true},\n    size: {type: Number, required: true},\n    level: {type: Number, required: true},\n    limitLevel: {type: Number, required: true},\n    nextStep: {type: String, required: true},\n  }],\n  positions: [{\n    dealId: {type: String, required: true},\n    dealReference: {type: String, required: true},\n    direction: {type: String, required: true},\n    size: {type: Number, required: true},\n    level: {type: Number, required: true},\n    limitLevel: {type: Number, required: false},\n    nextStep: {type: String, required: false},\n  }],\n});\nconst Ig = mongoose.model('Ig', igSchema);\n\nconst getAllIgActivities = async (accountData, epic) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  try {\n    return await Ig.find({user: accountData._id})\n  }catch (e) {\n    console.log(e)\n  }\n}\n\nconst getIgActivities = async (accountData, epic) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  try {\n    return await Ig.find({user: accountData._id, epic: epic},)\n  }catch (e) {\n    console.log(e)\n  }\n}\n\nconst newIgActivity = async (accountData, step, epic, crossConfig, orders, positions) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  try {\n    return await Ig.findOneAndUpdate(\n      {user: accountData._id, epic: epic},\n      {\n        user: accountData._id,\n        step: step,\n        epic: epic,\n        config: crossConfig,\n        orders: orders,\n        positions: positions\n      },\n      {upsert: true, new: true}\n    )\n  } catch (error) {\n    console.error(\"findOneAndUpdate\", error);\n  }\n}\n\nconst deleteIgActivity = async (accountData, epic) => {\n  if (mongoose.connection.readyState === 0){\n    await connectToDb()\n  }\n\n  try {\n    return await Ig.findOneAndDelete(\n      {user: accountData._id, epic: epic},\n    )\n  } catch (error) {\n    console.error(\"findOneAndDelete\", error);\n  }\n}\n\nmodule.exports = {\n  connectToDb,\n  getUser,\n  userFindOne,\n  newUser,\n  getSettings,\n  getSetting,\n  updateSettings,\n  updateAccountSettings,\n  getAllIgActivities,\n  getIgActivities,\n  newIgActivity,\n  deleteIgActivity\n}\n"],"mappings":"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"}},"mtime":1675175344491},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/restV1.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.closePosition = void 0;\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _igTradingApi = require(\"ig-trading-api\");\nvar _mongoDB = require(\"./mongoDB\");\nvar _DealingAPI = require(\"ig-trading-api/dist/dealing/DealingAPI\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar baseURL = \"https://demo-api.ig.com/gateway/deal\";\nvar igSession = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(identifier, password, apiKey) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _axios[\"default\"].post(baseURL + '/session', {\n            identifier: identifier,\n            password: password\n          }, {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(apiKey),\n              'Version': 2\n            }\n          });\n        case 2:\n          response = _context.sent;\n          if (!response) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            accountId: response.data.currentAccountId,\n            clientId: response.data.clientId,\n            lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n            cst: response.headers.cst,\n            xSecurityToken: response.headers['x-security-token']\n          });\n        case 5:\n          return _context.abrupt(\"return\", {\n            error: \"session error\"\n          });\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function igSession(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nvar step0 = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountData, crossList) {\n    var client, epicArray, _iterator, _step, cross, marketDetails, _iterator2, _step2, _loop;\n    return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          // apro una nuova sessione\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context3.next = 3;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 3:\n          epicArray = [];\n          _iterator = _createForOfIteratorHelper(crossList);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              cross = _step.value;\n              // creo un array contenente solo gli epic, così da fare una chiamata unica\n              epicArray.push(cross.epic);\n            }\n\n            //recupero il dettaglio di tutti i cross\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          _context3.next = 8;\n          return client.rest.market.getMarketDetails(epicArray);\n        case 8:\n          marketDetails = _context3.sent;\n          //Per ogni cross apro la poosizione A0\n          _iterator2 = _createForOfIteratorHelper(marketDetails.marketDetails);\n          _context3.prev = 10;\n          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n            var market, crossConfig, averagePrice, pip, buyOrderResponse, sellOrderResponse, orders, responseIgActivity;\n            return _regeneratorRuntime().wrap(function _loop$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  market = _step2.value;\n                  _context2.prev = 1;\n                  crossConfig = crossList.find(function (cross) {\n                    return cross.epic === market.instrument.epic;\n                  });\n                  averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(market.snapshot.scalingFactor.toString().length);\n                  pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) / market.snapshot.scalingFactor; // Apro i nuovi ordini\n                  _context2.next = 7;\n                  return newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice + pip, \"STOP\", crossConfig.currencies, null, null);\n                case 7:\n                  buyOrderResponse = _context2.sent;\n                  _context2.next = 10;\n                  return newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice - pip, \"STOP\", crossConfig.currencies, null, null);\n                case 10:\n                  sellOrderResponse = _context2.sent;\n                  orders = [{\n                    dealId: buyOrderResponse.dealId,\n                    dealReference: buyOrderResponse.dealReference,\n                    direction: buyOrderResponse.direction,\n                    size: buyOrderResponse.size,\n                    level: buyOrderResponse.level,\n                    limitLevel: buyOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }, {\n                    dealId: sellOrderResponse.dealId,\n                    dealReference: sellOrderResponse.dealReference,\n                    direction: sellOrderResponse.direction,\n                    size: sellOrderResponse.size,\n                    level: sellOrderResponse.level,\n                    limitLevel: sellOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }];\n                  _context2.next = 14;\n                  return (0, _mongoDB.newIgActivity)(accountData, 'A0', crossConfig.epic, crossConfig, orders, []);\n                case 14:\n                  responseIgActivity = _context2.sent;\n                  _context2.next = 20;\n                  break;\n                case 17:\n                  _context2.prev = 17;\n                  _context2.t0 = _context2[\"catch\"](1);\n                  console.log(\"step 0 error\", _context2.t0);\n                case 20:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }, _loop, null, [[1, 17]]);\n          });\n          _iterator2.s();\n        case 13:\n          if ((_step2 = _iterator2.n()).done) {\n            _context3.next = 17;\n            break;\n          }\n          return _context3.delegateYield(_loop(), \"t0\", 15);\n        case 15:\n          _context3.next = 13;\n          break;\n        case 17:\n          _context3.next = 22;\n          break;\n        case 19:\n          _context3.prev = 19;\n          _context3.t1 = _context3[\"catch\"](10);\n          _iterator2.e(_context3.t1);\n        case 22:\n          _context3.prev = 22;\n          _iterator2.f();\n          return _context3.finish(22);\n        case 25:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee2, null, [[10, 19, 22, 25]]);\n  }));\n  return function step0(_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar step1 = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(activities, accountData, event) {\n    var refOrder, client, totalPL, _iterator3, _step3, position, responseClosePosition, pip, levelStop, levelLimit, stopOrderResponse, limitOrderResponse, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context4.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context4.prev = 4;\n          if (!(activities.positions.length > 0)) {\n            _context4.next = 29;\n            break;\n          }\n          totalPL = 0;\n          console.group(\"Chiusura posizioni\");\n          _iterator3 = _createForOfIteratorHelper(activities.positions);\n          _context4.prev = 9;\n          _iterator3.s();\n        case 11:\n          if ((_step3 = _iterator3.n()).done) {\n            _context4.next = 19;\n            break;\n          }\n          position = _step3.value;\n          _context4.next = 15;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 15:\n          responseClosePosition = _context4.sent;\n          totalPL += responseClosePosition.profit;\n        case 17:\n          _context4.next = 11;\n          break;\n        case 19:\n          _context4.next = 24;\n          break;\n        case 21:\n          _context4.prev = 21;\n          _context4.t0 = _context4[\"catch\"](9);\n          _iterator3.e(_context4.t0);\n        case 24:\n          _context4.prev = 24;\n          _iterator3.f();\n          return _context4.finish(24);\n        case 27:\n          console.groupEnd();\n          console.log(\"total PL\", totalPL);\n        case 29:\n          _context4.next = 31;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 31:\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop = event.direction === \"BUY\" ? event.level + pip / 2 : event.level - pip / 2;\n          levelLimit = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context4.next = 37;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 37:\n          stopOrderResponse = _context4.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          //console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n          _context4.next = 41;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, null);\n        case 41:\n          limitOrderResponse = _context4.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n          //console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A1\"\n          }, {\n            dealId: limitOrderResponse.dealId,\n            dealReference: limitOrderResponse.dealReference,\n            direction: limitOrderResponse.direction,\n            size: limitOrderResponse.size,\n            level: limitOrderResponse.level,\n            limitLevel: limitOrderResponse.limitLevel,\n            nextStep: \"A2\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context4.next = 48;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities.epic, activities.config, orders, positions);\n        case 48:\n          responseIgActivity = _context4.sent;\n          _context4.next = 54;\n          break;\n        case 51:\n          _context4.prev = 51;\n          _context4.t1 = _context4[\"catch\"](4);\n          console.error(\"step1 error\", _context4.t1);\n        case 54:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee3, null, [[4, 51], [9, 21, 24, 27]]);\n  }));\n  return function step1(_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar step2 = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(activities, accountData, event) {\n    var refOrder, client, totalPL, _iterator4, _step4, position, responseClosePosition, newPositionResponse, pip, levelStop1, levelStop2, stopOrderResponse1, stopOrderResponse2, orders, positions, responseIgActivity;\n    return _regeneratorRuntime().wrap(function _callee4$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context5.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context5.prev = 4;\n          if (!(activities.positions.length > 0)) {\n            _context5.next = 29;\n            break;\n          }\n          totalPL = 0;\n          console.group(\"Chiusura posizioni\");\n          _iterator4 = _createForOfIteratorHelper(activities.positions);\n          _context5.prev = 9;\n          _iterator4.s();\n        case 11:\n          if ((_step4 = _iterator4.n()).done) {\n            _context5.next = 19;\n            break;\n          }\n          position = _step4.value;\n          _context5.next = 15;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 15:\n          responseClosePosition = _context5.sent;\n          totalPL += responseClosePosition.profit;\n        case 17:\n          _context5.next = 11;\n          break;\n        case 19:\n          _context5.next = 24;\n          break;\n        case 21:\n          _context5.prev = 21;\n          _context5.t0 = _context5[\"catch\"](9);\n          _iterator4.e(_context5.t0);\n        case 24:\n          _context5.prev = 24;\n          _iterator4.f();\n          return _context5.finish(24);\n        case 27:\n          console.groupEnd();\n          console.log(\"total PL\", totalPL);\n        case 29:\n          _context5.next = 31;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 31:\n          console.group(\"Nuova posizione copertura\");\n          _context5.next = 34;\n          return newPosition(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, activities.config.currencies);\n        case 34:\n          newPositionResponse = _context5.sent;\n          console.log(\"newPosition dealStatus: \", newPositionResponse.dealStatus);\n          console.groupEnd();\n\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop1 = event.direction === \"BUY\" ? event.level + pip : event.level - pip;\n          levelStop2 = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context5.next = 43;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null);\n        case 43:\n          stopOrderResponse1 = _context5.sent;\n          console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus);\n          _context5.next = 47;\n          return newOrder(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, levelStop2, \"STOP\", activities.config.currencies, null, null);\n        case 47:\n          stopOrderResponse2 = _context5.sent;\n          console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus);\n          console.groupEnd();\n          orders = [{\n            dealId: stopOrderResponse1.dealId,\n            dealReference: stopOrderResponse1.dealReference,\n            direction: stopOrderResponse1.direction,\n            size: stopOrderResponse1.size,\n            level: stopOrderResponse1.level,\n            limitLevel: stopOrderResponse1.limitLevel,\n            nextStep: \"A1\"\n          }, {\n            dealId: stopOrderResponse2.dealId,\n            dealReference: stopOrderResponse2.dealReference,\n            direction: stopOrderResponse2.direction,\n            size: stopOrderResponse2.size,\n            level: stopOrderResponse2.level,\n            limitLevel: stopOrderResponse2.limitLevel,\n            nextStep: \"A1\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }, {\n            dealId: newPositionResponse.dealId,\n            dealReference: newPositionResponse.dealReference,\n            direction: newPositionResponse.direction,\n            size: newPositionResponse.size,\n            level: newPositionResponse.level,\n            limitLevel: newPositionResponse.limitLevel,\n            nextStep: null\n          }];\n          _context5.next = 54;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A2', activities.epic, activities.config, orders, positions);\n        case 54:\n          responseIgActivity = _context5.sent;\n          _context5.next = 60;\n          break;\n        case 57:\n          _context5.prev = 57;\n          _context5.t1 = _context5[\"catch\"](4);\n          console.error(\"step2 error\", _context5.t1);\n        case 60:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee4, null, [[4, 57], [9, 21, 24, 27]]);\n  }));\n  return function step2(_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar closeActivity = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(client, accountData, epic) {\n    var allOrders, allPositions, ordersToDelete, positionsToDelete, _iterator5, _step5, order, _iterator6, _step6, position;\n    return _regeneratorRuntime().wrap(function _callee5$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return client.rest.dealing.getAllOrders();\n        case 2:\n          allOrders = _context6.sent;\n          _context6.next = 5;\n          return client.rest.dealing.getAllOpenPositions();\n        case 5:\n          allPositions = _context6.sent;\n          ordersToDelete = allOrders.workingOrders.filter(function (row) {\n            return row.workingOrderData.epic === epic;\n          });\n          positionsToDelete = allPositions.positions.filter(function (row) {\n            return row.market.epic === epic;\n          });\n          _iterator5 = _createForOfIteratorHelper(ordersToDelete);\n          _context6.prev = 9;\n          _iterator5.s();\n        case 11:\n          if ((_step5 = _iterator5.n()).done) {\n            _context6.next = 17;\n            break;\n          }\n          order = _step5.value;\n          _context6.next = 15;\n          return client.rest.dealing.deleteOrder(order.workingOrderData.dealId);\n        case 15:\n          _context6.next = 11;\n          break;\n        case 17:\n          _context6.next = 22;\n          break;\n        case 19:\n          _context6.prev = 19;\n          _context6.t0 = _context6[\"catch\"](9);\n          _iterator5.e(_context6.t0);\n        case 22:\n          _context6.prev = 22;\n          _iterator5.f();\n          return _context6.finish(22);\n        case 25:\n          _iterator6 = _createForOfIteratorHelper(positionsToDelete);\n          _context6.prev = 26;\n          _iterator6.s();\n        case 28:\n          if ((_step6 = _iterator6.n()).done) {\n            _context6.next = 34;\n            break;\n          }\n          position = _step6.value;\n          _context6.next = 32;\n          return closePosition(client, position.position.dealId, position.position.direction, position.position.size, false);\n        case 32:\n          _context6.next = 28;\n          break;\n        case 34:\n          _context6.next = 39;\n          break;\n        case 36:\n          _context6.prev = 36;\n          _context6.t1 = _context6[\"catch\"](26);\n          _iterator6.e(_context6.t1);\n        case 39:\n          _context6.prev = 39;\n          _iterator6.f();\n          return _context6.finish(39);\n        case 42:\n          _context6.next = 44;\n          return (0, _mongoDB.deleteIgActivity)(accountData, epic);\n        case 44:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee5, null, [[9, 19, 22, 25], [26, 36, 39, 42]]);\n  }));\n  return function closeActivity(_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar restartCross = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(client, accountData, crossConfig) {\n    return _regeneratorRuntime().wrap(function _callee6$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee6);\n  }));\n  return function restartCross(_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar newPosition = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(client, epic, direction, size, currencyCode) {\n    var positionData, dealReference;\n    return _regeneratorRuntime().wrap(function _callee7$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          positionData = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            orderType: \"MARKET\",\n            timeInForce: 'FILL_OR_KILL',\n            level: null,\n            guaranteedStop: 'false',\n            stopLevel: null,\n            stopDistance: null,\n            trailingStopIncrement: null,\n            forceOpen: 'true',\n            limitLevel: null,\n            limitDistance: null,\n            currencyCode: currencyCode,\n            quoteId: null\n          };\n          _context8.prev = 1;\n          _context8.next = 4;\n          return client.rest.dealing.createPosition(positionData);\n        case 4:\n          dealReference = _context8.sent;\n          _context8.next = 7;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 7:\n          return _context8.abrupt(\"return\", _context8.sent);\n        case 10:\n          _context8.prev = 10;\n          _context8.t0 = _context8[\"catch\"](1);\n          console.error(\"newPosition error\", _context8.t0);\n          return _context8.abrupt(\"return\", _context8.t0);\n        case 14:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee7, null, [[1, 10]]);\n  }));\n  return function newPosition(_x18, _x19, _x20, _x21, _x22) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar newOrder = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) {\n    var orderData, dealReference;\n    return _regeneratorRuntime().wrap(function _callee8$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          orderData = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            level: level,\n            forceOpen: 'true',\n            type: type,\n            currencyCode: currencyCode,\n            timeInForce: 'GOOD_TILL_CANCELLED',\n            goodTillDate: null,\n            guaranteedStop: 'false',\n            stopLevel: stopLevel,\n            stopDistance: null,\n            limitLevel: limitLevel,\n            limitDistance: null\n          }; //console.log(\"orderData\", orderData)\n          _context9.prev = 1;\n          _context9.next = 4;\n          return client.rest.dealing.createOrder(orderData);\n        case 4:\n          dealReference = _context9.sent;\n          _context9.next = 7;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 7:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 10:\n          _context9.prev = 10;\n          _context9.t0 = _context9[\"catch\"](1);\n          console.error(\"newOrder error\", _context9.t0);\n          return _context9.abrupt(\"return\", _context9.t0);\n        case 14:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee8, null, [[1, 10]]);\n  }));\n  return function newOrder(_x23, _x24, _x25, _x26, _x27, _x28, _x29, _x30, _x31) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar closePosition = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(client, dealId, direction, size, partial) {\n    var data, dealReference;\n    return _regeneratorRuntime().wrap(function _callee9$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          data = {\n            dealId: dealId,\n            epic: null,\n            expiry: null,\n            direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n            size: partial ? size / 2 : size,\n            level: null,\n            orderType: \"MARKET\",\n            timeInForce: \"EXECUTE_AND_ELIMINATE\",\n            quoteId: null\n          };\n          _context10.prev = 1;\n          _context10.next = 4;\n          return client.rest.dealing.closePosition(data);\n        case 4:\n          dealReference = _context10.sent;\n          _context10.next = 7;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 7:\n          return _context10.abrupt(\"return\", _context10.sent);\n        case 10:\n          _context10.prev = 10;\n          _context10.t0 = _context10[\"catch\"](1);\n          console.error(\"closePosition error\", _context10.t0);\n          return _context10.abrupt(\"return\", _context10.t0);\n        case 14:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee9, null, [[1, 10]]);\n  }));\n  return function closePosition(_x32, _x33, _x34, _x35, _x36) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nexports.closePosition = closePosition;\nvar getCompleteWatchlist = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(accountData) {\n    var sessionResponse, headerGet, watchlistsReposnse, watchlistId, watchlist;\n    return _regeneratorRuntime().wrap(function _callee10$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return igSession(accountData.username, accountData.password, accountData.apiKey);\n        case 2:\n          sessionResponse = _context11.sent;\n          if (!sessionResponse) {\n            _context11.next = 13;\n            break;\n          }\n          headerGet = {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(accountData.apiKey),\n              'Version': 1,\n              'CST': \"\".concat(sessionResponse.cst),\n              'X-SECURITY-TOKEN': \"\".concat(sessionResponse.xSecurityToken)\n            }\n          };\n          _context11.next = 7;\n          return _axios[\"default\"].get(baseURL + '/watchlists', headerGet);\n        case 7:\n          watchlistsReposnse = _context11.sent;\n          watchlistId = watchlistsReposnse.data.watchlists.find(function (list) {\n            return list.name === \"macchinetta\";\n          });\n          _context11.next = 11;\n          return getWatchlist(watchlistId.id, sessionResponse.cst, sessionResponse.xSecurityToken, accountData.apiKey);\n        case 11:\n          watchlist = _context11.sent;\n          return _context11.abrupt(\"return\", watchlist);\n        case 13:\n          return _context11.abrupt(\"return\", null);\n        case 14:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee10);\n  }));\n  return function getCompleteWatchlist(_x37) {\n    return _ref10.apply(this, arguments);\n  };\n}();\nvar getWatchlist = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(watchlistId, cst, xSecurityToken, apiKey) {\n    var headerGet;\n    return _regeneratorRuntime().wrap(function _callee11$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          headerGet = {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(apiKey),\n              'Version': 1,\n              'CST': \"\".concat(cst),\n              'X-SECURITY-TOKEN': \"\".concat(xSecurityToken)\n            }\n          };\n          _context12.next = 3;\n          return _axios[\"default\"].get(baseURL + '/watchlists/' + watchlistId, headerGet);\n        case 3:\n          return _context12.abrupt(\"return\", _context12.sent);\n        case 4:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee11);\n  }));\n  return function getWatchlist(_x38, _x39, _x40, _x41) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  igSession: igSession,\n  closeActivity: closeActivity,\n  getCompleteWatchlist: getCompleteWatchlist,\n  newOrder: newOrder,\n  step0: step0,\n  step1: step1,\n  step2: step2\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlVVJMIiwiaWdTZXNzaW9uIiwiaWRlbnRpZmllciIsInBhc3N3b3JkIiwiYXBpS2V5IiwiYXhpb3MiLCJwb3N0IiwiaGVhZGVycyIsInJlc3BvbnNlIiwiYWNjb3VudElkIiwiZGF0YSIsImN1cnJlbnRBY2NvdW50SWQiLCJjbGllbnRJZCIsImxpZ2h0c3RyZWFtZXJFbmRwb2ludCIsImNzdCIsInhTZWN1cml0eVRva2VuIiwiZXJyb3IiLCJzdGVwMCIsImFjY291bnREYXRhIiwiY3Jvc3NMaXN0IiwiY2xpZW50IiwiQVBJQ2xpZW50IiwiVVJMX0RFTU8iLCJyZXN0IiwibG9naW4iLCJjcmVhdGVTZXNzaW9uIiwidXNlcm5hbWUiLCJlcGljQXJyYXkiLCJjcm9zcyIsInB1c2giLCJlcGljIiwibWFya2V0IiwiZ2V0TWFya2V0RGV0YWlscyIsIm1hcmtldERldGFpbHMiLCJjcm9zc0NvbmZpZyIsImZpbmQiLCJpbnN0cnVtZW50IiwiYXZlcmFnZVByaWNlIiwic25hcHNob3QiLCJiaWQiLCJvZmZlciIsInRvRml4ZWQiLCJzY2FsaW5nRmFjdG9yIiwidG9TdHJpbmciLCJsZW5ndGgiLCJwaXAiLCJNYXRoIiwicm91bmQiLCJwZXJjZW50YWdlIiwibmV3T3JkZXIiLCJjb250cmFjdHMiLCJjdXJyZW5jaWVzIiwiYnV5T3JkZXJSZXNwb25zZSIsInNlbGxPcmRlclJlc3BvbnNlIiwib3JkZXJzIiwiZGVhbElkIiwiZGVhbFJlZmVyZW5jZSIsImRpcmVjdGlvbiIsInNpemUiLCJsZXZlbCIsImxpbWl0TGV2ZWwiLCJuZXh0U3RlcCIsIm5ld0lnQWN0aXZpdHkiLCJyZXNwb25zZUlnQWN0aXZpdHkiLCJjb25zb2xlIiwibG9nIiwic3RlcDEiLCJhY3Rpdml0aWVzIiwiZXZlbnQiLCJyZWZPcmRlciIsIm9yZGVyIiwicG9zaXRpb25zIiwidG90YWxQTCIsImdyb3VwIiwicG9zaXRpb24iLCJjbG9zZVBvc2l0aW9uIiwicmVzcG9uc2VDbG9zZVBvc2l0aW9uIiwicHJvZml0IiwiZ3JvdXBFbmQiLCJkZWFsaW5nIiwiZGVsZXRlT3JkZXIiLCJjb25maWciLCJsZXZlbFN0b3AiLCJsZXZlbExpbWl0Iiwic3RvcE9yZGVyUmVzcG9uc2UiLCJkZWFsU3RhdHVzIiwibGltaXRPcmRlclJlc3BvbnNlIiwic3RlcDIiLCJuZXdQb3NpdGlvbiIsIm5ld1Bvc2l0aW9uUmVzcG9uc2UiLCJsZXZlbFN0b3AxIiwibGV2ZWxTdG9wMiIsInN0b3BPcmRlclJlc3BvbnNlMSIsInN0b3BPcmRlclJlc3BvbnNlMiIsImNsb3NlQWN0aXZpdHkiLCJnZXRBbGxPcmRlcnMiLCJhbGxPcmRlcnMiLCJnZXRBbGxPcGVuUG9zaXRpb25zIiwiYWxsUG9zaXRpb25zIiwib3JkZXJzVG9EZWxldGUiLCJ3b3JraW5nT3JkZXJzIiwiZmlsdGVyIiwicm93Iiwid29ya2luZ09yZGVyRGF0YSIsInBvc2l0aW9uc1RvRGVsZXRlIiwiZGVsZXRlSWdBY3Rpdml0eSIsInJlc3RhcnRDcm9zcyIsImN1cnJlbmN5Q29kZSIsInBvc2l0aW9uRGF0YSIsImV4cGlyeSIsIm9yZGVyVHlwZSIsInRpbWVJbkZvcmNlIiwiZ3VhcmFudGVlZFN0b3AiLCJzdG9wTGV2ZWwiLCJzdG9wRGlzdGFuY2UiLCJ0cmFpbGluZ1N0b3BJbmNyZW1lbnQiLCJmb3JjZU9wZW4iLCJsaW1pdERpc3RhbmNlIiwicXVvdGVJZCIsImNyZWF0ZVBvc2l0aW9uIiwiY29uZmlybVRyYWRlIiwidHlwZSIsIm9yZGVyRGF0YSIsImdvb2RUaWxsRGF0ZSIsImNyZWF0ZU9yZGVyIiwicGFydGlhbCIsImdldENvbXBsZXRlV2F0Y2hsaXN0Iiwic2Vzc2lvblJlc3BvbnNlIiwiaGVhZGVyR2V0IiwiZ2V0Iiwid2F0Y2hsaXN0c1JlcG9zbnNlIiwid2F0Y2hsaXN0SWQiLCJ3YXRjaGxpc3RzIiwibGlzdCIsIm5hbWUiLCJnZXRXYXRjaGxpc3QiLCJpZCIsIndhdGNobGlzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9zdmlsdXBwby9Eb2N1bWVudHMvU3ZpbHVwcG8gSmF2YXNjcmlwdC9meEJhY2tWMS9saWIvIiwic291cmNlcyI6WyJyZXN0VjEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHtBUElDbGllbnR9IGZyb20gXCJpZy10cmFkaW5nLWFwaVwiO1xuaW1wb3J0IHtkZWxldGVJZ0FjdGl2aXR5LCBnZXRJZ0FjdGl2aXRpZXMsIG5ld0lnQWN0aXZpdHl9IGZyb20gXCIuL21vbmdvREJcIjtcbmltcG9ydCB7RGlyZWN0aW9uLCBQb3NpdGlvbk9yZGVyVHlwZSwgUG9zaXRpb25UaW1lSW5Gb3JjZX0gZnJvbSBcImlnLXRyYWRpbmctYXBpL2Rpc3QvZGVhbGluZy9EZWFsaW5nQVBJXCI7XG5cbmNvbnN0IGJhc2VVUkwgPSBcImh0dHBzOi8vZGVtby1hcGkuaWcuY29tL2dhdGV3YXkvZGVhbFwiXG5cbmNvbnN0IGlnU2Vzc2lvbiA9IGFzeW5jIChpZGVudGlmaWVyLCBwYXNzd29yZCwgYXBpS2V5KSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3NcbiAgICAucG9zdChiYXNlVVJMKycvc2Vzc2lvbicsIHtcbiAgICAgIGlkZW50aWZpZXIsXG4gICAgICBwYXNzd29yZFxuICAgIH0sIHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JywgJ1gtSUctQVBJLUtFWSc6IGAke2FwaUtleX1gLCAnVmVyc2lvbic6IDJ9fSlcblxuICBpZiAocmVzcG9uc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjb3VudElkOiByZXNwb25zZS5kYXRhLmN1cnJlbnRBY2NvdW50SWQsXG4gICAgICBjbGllbnRJZDogcmVzcG9uc2UuZGF0YS5jbGllbnRJZCxcbiAgICAgIGxpZ2h0c3RyZWFtZXJFbmRwb2ludDogcmVzcG9uc2UuZGF0YS5saWdodHN0cmVhbWVyRW5kcG9pbnQsXG4gICAgICBjc3Q6IHJlc3BvbnNlLmhlYWRlcnMuY3N0LFxuICAgICAgeFNlY3VyaXR5VG9rZW46IHJlc3BvbnNlLmhlYWRlcnNbJ3gtc2VjdXJpdHktdG9rZW4nXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7ZXJyb3I6IFwic2Vzc2lvbiBlcnJvclwifVxufVxuXG4vKipcbiAqIEZhc2UgMFxuICpcbiAqIEFwZXJ0dXJhIGRpIGR1ZSBvcmRpbmkgZGkgc2Vnbm8gb3Bwb3N0byBhbCBwcmV6em8gZGkgbWVyY2F0byArLSB4IHBpcCBkaSBkaXN0YW56YVxuICogKi9cbmNvbnN0IHN0ZXAwID0gYXN5bmMgKGFjY291bnREYXRhLCBjcm9zc0xpc3QpID0+e1xuICAvLyBhcHJvIHVuYSBudW92YSBzZXNzaW9uZVxuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIGNvbnN0IGVwaWNBcnJheSA9IFtdXG4gIGZvciAoY29uc3QgY3Jvc3Mgb2YgY3Jvc3NMaXN0KXtcbiAgICAvLyBjcmVvIHVuIGFycmF5IGNvbnRlbmVudGUgc29sbyBnbGkgZXBpYywgY29zw6wgZGEgZmFyZSB1bmEgY2hpYW1hdGEgdW5pY2FcbiAgICBlcGljQXJyYXkucHVzaChjcm9zcy5lcGljKVxuICB9XG5cbiAgLy9yZWN1cGVybyBpbCBkZXR0YWdsaW8gZGkgdHV0dGkgaSBjcm9zc1xuICBjb25zdCBtYXJrZXREZXRhaWxzID0gYXdhaXQgY2xpZW50LnJlc3QubWFya2V0LmdldE1hcmtldERldGFpbHMoZXBpY0FycmF5KVxuXG4gIC8vUGVyIG9nbmkgY3Jvc3MgYXBybyBsYSBwb29zaXppb25lIEEwXG4gIGZvciAoY29uc3QgbWFya2V0IG9mIG1hcmtldERldGFpbHMubWFya2V0RGV0YWlscyl7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNyb3NzQ29uZmlnID0gY3Jvc3NMaXN0LmZpbmQoY3Jvc3MgPT4gY3Jvc3MuZXBpYyA9PT0gbWFya2V0Lmluc3RydW1lbnQuZXBpYylcblxuICAgICAgY29uc3QgYXZlcmFnZVByaWNlID0gKygobWFya2V0LnNuYXBzaG90LmJpZCArIG1hcmtldC5zbmFwc2hvdC5vZmZlcikgLyAyKS50b0ZpeGVkKFxuICAgICAgICBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3Rvci50b1N0cmluZygpLmxlbmd0aCxcbiAgICAgIClcblxuICAgICAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChhdmVyYWdlUHJpY2UgKiAoY3Jvc3NDb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgICBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvclxuXG4gICAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgICBjb25zdCBidXlPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIkJVWVwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZStwaXAsIFwiU1RPUFwiLCBjcm9zc0NvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgICAgY29uc3Qgc2VsbE9yZGVyUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGNyb3NzQ29uZmlnLmVwaWMsIFwiU0VMTFwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZS1waXAsIFwiU1RPUFwiLCBjcm9zc0NvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuXG4gICAgICBjb25zdCBvcmRlcnMgPSBbe1xuICAgICAgICBkZWFsSWQ6IGJ1eU9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgICBkZWFsUmVmZXJlbmNlOiBidXlPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICAgIGRpcmVjdGlvbjogYnV5T3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICAgIHNpemU6IGJ1eU9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgICAgbGV2ZWw6IGJ1eU9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICAgIGxpbWl0TGV2ZWw6IGJ1eU9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgICAgfSwge1xuICAgICAgICBkZWFsSWQ6IHNlbGxPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICAgICAgZGVhbFJlZmVyZW5jZTogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgICAgZGlyZWN0aW9uOiBzZWxsT3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICAgIHNpemU6IHNlbGxPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgICAgIGxldmVsOiBzZWxsT3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgICAgbGltaXRMZXZlbDogc2VsbE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgICAgfV1cblxuICAgICAgY29uc3QgcmVzcG9uc2VJZ0FjdGl2aXR5ID0gYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0EwJywgY3Jvc3NDb25maWcuZXBpYywgY3Jvc3NDb25maWcsIG9yZGVycywgW10pXG4gICAgfWNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInN0ZXAgMCBlcnJvclwiLCBlKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBzdGVwMSA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcbiAgLy8gQ2VyY28gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllcy5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgIT09IGV2ZW50LmRlYWxJZClcbiAgLy8gQ3JlbyB1bmEgc2Vzc2lvbmUgaWdcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFQSUNsaWVudChBUElDbGllbnQuVVJMX0RFTU8sIGFjY291bnREYXRhLmFwaUtleSk7XG4gIGF3YWl0IGNsaWVudC5yZXN0LmxvZ2luLmNyZWF0ZVNlc3Npb24oYWNjb3VudERhdGEudXNlcm5hbWUsIGFjY291bnREYXRhLnBhc3N3b3JkKTtcblxuICB0cnkge1xuICAgIC8vIENoaXVzdXJhIHBvc2l6aW9uaSBhcGVydGVcbiAgICBpZihhY3Rpdml0aWVzLnBvc2l0aW9ucy5sZW5ndGggPiAwICkge1xuICAgICAgbGV0IHRvdGFsUEwgPSAwXG4gICAgICBjb25zb2xlLmdyb3VwKFwiQ2hpdXN1cmEgcG9zaXppb25pXCIpXG4gICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIGFjdGl2aXRpZXMucG9zaXRpb25zKXtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VDbG9zZVBvc2l0aW9uID0gYXdhaXQgY2xvc2VQb3NpdGlvbihjbGllbnQsIHBvc2l0aW9uLmRlYWxJZCwgcG9zaXRpb24uZGlyZWN0aW9uLCBwb3NpdGlvbi5zaXplLCBmYWxzZSlcbiAgICAgICAgdG90YWxQTCArPSByZXNwb25zZUNsb3NlUG9zaXRpb24ucHJvZml0XG4gICAgICB9XG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICAgIGNvbnNvbGUubG9nKFwidG90YWwgUExcIiwgdG90YWxQTClcbiAgICB9XG5cbiAgICAvLyBDaGl1ZG8gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gICAgYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihyZWZPcmRlci5kZWFsSWQpXG5cbiAgICAvLyBDYWxjb2xvIGxhIGRpc3RhbnphIGluIHBpcCBkYXRhIGxhIGNvbmZpZ3VyYXppb25lIGRlbCBjcm9zc1xuICAgIGNvbnN0IHBpcCA9IE1hdGgucm91bmQoZXZlbnQubGV2ZWwgKiAoYWN0aXZpdGllcy5jb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yKSAvXG4gICAgICBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yXG5cbiAgICAvLyBEZWZpbmlzY28gaSBsaXZlbGxpIGRpIHByZXp6byBwZXIgbCdvcmRpbmUgU1RPUCBlIExJTUlUXG4gICAgY29uc3QgbGV2ZWxTdG9wID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gZXZlbnQubGV2ZWwrKHBpcC8yKSA6IGV2ZW50LmxldmVsLShwaXAvMilcbiAgICBjb25zdCBsZXZlbExpbWl0ID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gZXZlbnQubGV2ZWwtcGlwIDogZXZlbnQubGV2ZWwrcGlwXG5cbiAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgY29uc29sZS5ncm91cChcIk51b3ZpIE9yZGluaVwiKVxuICAgIGNvbnN0IHN0b3BPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFN0b3AsIFwiU1RPUFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2UgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlLmRlYWxTdGF0dXMpXG4gICAgLy9jb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcblxuICAgIGNvbnN0IGxpbWl0T3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxMaW1pdCwgXCJMSU1JVFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2UgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlLmRlYWxTdGF0dXMpXG4gICAgLy9jb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UuYWZmZWN0ZWREZWFscylcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICAgIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgICBkZWFsSWQ6IHN0b3BPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IHN0b3BPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IHN0b3BPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IHN0b3BPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogc3RvcE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBzdG9wT3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgIH0sIHtcbiAgICAgIGRlYWxJZDogbGltaXRPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGxpbWl0T3JkZXJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBsaW1pdE9yZGVyUmVzcG9uc2UuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogbGltaXRPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogbGltaXRPcmRlclJlc3BvbnNlLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogbGltaXRPcmRlclJlc3BvbnNlLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMlwiXG4gICAgfV1cblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFt7XG4gICAgICBkZWFsSWQ6IGV2ZW50LmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGV2ZW50LmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGV2ZW50LmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGV2ZW50LnNpemUsXG4gICAgICBsZXZlbDogZXZlbnQubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBldmVudC5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IG51bGxcbiAgICB9XVxuXG4gICAgY29uc3QgcmVzcG9uc2VJZ0FjdGl2aXR5ID0gYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0ExJywgYWN0aXZpdGllcy5lcGljLCBhY3Rpdml0aWVzLmNvbmZpZywgb3JkZXJzLCBwb3NpdGlvbnMpXG4gICAvKiBjb25zb2xlLmdyb3VwKFwiSWcgQWN0aXZpdHlcIilcbiAgICBjb25zb2xlLmxvZyhcIm9yZGVyczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5Lm9yZGVycylcbiAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uczpcIiwgcmVzcG9uc2VJZ0FjdGl2aXR5LnBvc2l0aW9ucylcbiAgICBjb25zb2xlLmxvZyhcInN0ZXA6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5zdGVwKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKSovXG5cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJzdGVwMSBlcnJvclwiLCBlKVxuICB9XG59XG5cbmNvbnN0IHN0ZXAyID0gYXN5bmMgKGFjdGl2aXRpZXMsIGFjY291bnREYXRhLCBldmVudCkgPT4ge1xuICAvLyBDZXJjbyBsJ29yZGluZSBub24gZXNlZ3VpdG9cbiAgY29uc3QgcmVmT3JkZXIgPSBhY3Rpdml0aWVzLm9yZGVycy5maW5kKG9yZGVyID0+IG9yZGVyLmRlYWxJZCAhPT0gZXZlbnQuZGVhbElkKVxuXG4gIC8vIENyZW8gdW5hIHNlc3Npb25lIGlnXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBUElDbGllbnQoQVBJQ2xpZW50LlVSTF9ERU1PLCBhY2NvdW50RGF0YS5hcGlLZXkpO1xuICBhd2FpdCBjbGllbnQucmVzdC5sb2dpbi5jcmVhdGVTZXNzaW9uKGFjY291bnREYXRhLnVzZXJuYW1lLCBhY2NvdW50RGF0YS5wYXNzd29yZCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBUYWtlIHByb2ZpdCBwb3NpemlvbmUgYXBlcnRhICgtMSBjb250cmF0bylcbiAgICBpZihhY3Rpdml0aWVzLnBvc2l0aW9ucy5sZW5ndGggPiAwICkge1xuICAgICAgbGV0IHRvdGFsUEwgPSAwXG4gICAgICBjb25zb2xlLmdyb3VwKFwiQ2hpdXN1cmEgcG9zaXppb25pXCIpXG4gICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIGFjdGl2aXRpZXMucG9zaXRpb25zKXtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VDbG9zZVBvc2l0aW9uID0gYXdhaXQgY2xvc2VQb3NpdGlvbihjbGllbnQsIHBvc2l0aW9uLmRlYWxJZCwgcG9zaXRpb24uZGlyZWN0aW9uLCBwb3NpdGlvbi5zaXplLCBmYWxzZSlcbiAgICAgICAgdG90YWxQTCArPSByZXNwb25zZUNsb3NlUG9zaXRpb24ucHJvZml0XG4gICAgICB9XG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICAgIGNvbnNvbGUubG9nKFwidG90YWwgUExcIiwgdG90YWxQTClcbiAgICB9XG5cbiAgICAvLyBDaGl1ZG8gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gICAgYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihyZWZPcmRlci5kZWFsSWQpXG5cbiAgICBjb25zb2xlLmdyb3VwKFwiTnVvdmEgcG9zaXppb25lIGNvcGVydHVyYVwiKVxuICAgIGNvbnN0IG5ld1Bvc2l0aW9uUmVzcG9uc2UgPSBhd2FpdCBuZXdQb3NpdGlvbihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gXCJTRUxMXCIgOiBcIkJVWVwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMpXG4gICAgY29uc29sZS5sb2coXCJuZXdQb3NpdGlvbiBkZWFsU3RhdHVzOiBcIiwgbmV3UG9zaXRpb25SZXNwb25zZS5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG4gICAgLy8gRGVmaW5pc2NvIGkgbGl2ZWxsaSBkaSBwcmV6em8gcGVyIGwnb3JkaW5lIFNUT1AgZSBMSU1JVFxuICAgIGNvbnN0IGxldmVsU3RvcDEgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbCtwaXAgOiBldmVudC5sZXZlbC1waXBcbiAgICBjb25zdCBsZXZlbFN0b3AyID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gZXZlbnQubGV2ZWwtcGlwIDogZXZlbnQubGV2ZWwrcGlwXG5cbiAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgY29uc29sZS5ncm91cChcIk51b3ZpIE9yZGluaVwiKVxuICAgIGNvbnN0IHN0b3BPcmRlclJlc3BvbnNlMSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxTdG9wMSwgXCJTVE9QXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZTEgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlMS5kZWFsU3RhdHVzKVxuXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UyID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFN0b3AyLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlMiBkZWFsU3RhdHVzOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UyLmRlYWxTdGF0dXMpXG4gICAgY29uc29sZS5ncm91cEVuZCgpXG5cbiAgICBjb25zdCBvcmRlcnMgPSBbe1xuICAgICAgZGVhbElkOiBzdG9wT3JkZXJSZXNwb25zZTEuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UxLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IHN0b3BPcmRlclJlc3BvbnNlMS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBzdG9wT3JkZXJSZXNwb25zZTEuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZTEubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBzdG9wT3JkZXJSZXNwb25zZTEubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkExXCJcbiAgICB9LCB7XG4gICAgICBkZWFsSWQ6IHN0b3BPcmRlclJlc3BvbnNlMi5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBzdG9wT3JkZXJSZXNwb25zZTIuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UyLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IHN0b3BPcmRlclJlc3BvbnNlMi5zaXplLFxuICAgICAgbGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMi5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMi5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgIH1dXG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbe1xuICAgICAgZGVhbElkOiBldmVudC5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBldmVudC5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBldmVudC5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBldmVudC5zaXplLFxuICAgICAgbGV2ZWw6IGV2ZW50LmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogZXZlbnQubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBudWxsXG4gICAgfSwge1xuICAgICAgZGVhbElkOiBuZXdQb3NpdGlvblJlc3BvbnNlLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IG5ld1Bvc2l0aW9uUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogbmV3UG9zaXRpb25SZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBuZXdQb3NpdGlvblJlc3BvbnNlLnNpemUsXG4gICAgICBsZXZlbDogbmV3UG9zaXRpb25SZXNwb25zZS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IG5ld1Bvc2l0aW9uUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBudWxsXG4gICAgfV1cblxuICAgIGNvbnN0IHJlc3BvbnNlSWdBY3Rpdml0eSA9IGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBMicsIGFjdGl2aXRpZXMuZXBpYywgYWN0aXZpdGllcy5jb25maWcsIG9yZGVycywgcG9zaXRpb25zKVxuICAgIC8qY29uc29sZS5ncm91cChcIklnIEFjdGl2aXR5XCIpXG4gICAgY29uc29sZS5sb2coXCJvcmRlcnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5vcmRlcnMpXG4gICAgY29uc29sZS5sb2coXCJwb3NpdGlvbnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5wb3NpdGlvbnMpXG4gICAgY29uc29sZS5sb2coXCJzdGVwOlwiLCByZXNwb25zZUlnQWN0aXZpdHkuc3RlcClcbiAgICBjb25zb2xlLmdyb3VwRW5kKCkqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcInN0ZXAyIGVycm9yXCIsIGUpXG4gIH1cbn1cblxuY29uc3QgY2xvc2VBY3Rpdml0eSA9IGFzeW5jIChjbGllbnQsIGFjY291bnREYXRhLCBlcGljKSA9PiB7XG4gIGNvbnN0IGFsbE9yZGVycyA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZ2V0QWxsT3JkZXJzKClcbiAgY29uc3QgYWxsUG9zaXRpb25zID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5nZXRBbGxPcGVuUG9zaXRpb25zKClcblxuICBsZXQgb3JkZXJzVG9EZWxldGUgPSBhbGxPcmRlcnMud29ya2luZ09yZGVycy5maWx0ZXIocm93PT4gcm93LndvcmtpbmdPcmRlckRhdGEuZXBpYyA9PT0gZXBpYyk7XG4gIGxldCBwb3NpdGlvbnNUb0RlbGV0ZSA9IGFsbFBvc2l0aW9ucy5wb3NpdGlvbnMuZmlsdGVyKHJvdz0+IHJvdy5tYXJrZXQuZXBpYyA9PT0gZXBpYyk7XG5cbiAgZm9yIChjb25zdCBvcmRlciBvZiBvcmRlcnNUb0RlbGV0ZSl7XG4gICAgYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihvcmRlci53b3JraW5nT3JkZXJEYXRhLmRlYWxJZClcbiAgfVxuXG4gIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zVG9EZWxldGUpe1xuICAgIGF3YWl0IGNsb3NlUG9zaXRpb24oY2xpZW50LCBwb3NpdGlvbi5wb3NpdGlvbi5kZWFsSWQsIHBvc2l0aW9uLnBvc2l0aW9uLmRpcmVjdGlvbiwgcG9zaXRpb24ucG9zaXRpb24uc2l6ZSwgZmFsc2UpXG4gIH1cblxuICBhd2FpdCBkZWxldGVJZ0FjdGl2aXR5KGFjY291bnREYXRhLCBlcGljKVxufVxuXG5jb25zdCByZXN0YXJ0Q3Jvc3MgPSBhc3luYyAoY2xpZW50LCBhY2NvdW50RGF0YSwgY3Jvc3NDb25maWcpID0+IHtcblxuICAvLyBhd2FpdCBjbG9zZUFjdGl2aXR5KGNsaWVudCwgY3Jvc3NDb25maWcuZXBpYylcblxuICAvKmNvbnN0IGF2ZXJhZ2VQcmljZSA9ICsoKG1hcmtldC5zbmFwc2hvdC5iaWQgKyBtYXJrZXQuc25hcHNob3Qub2ZmZXIpIC8gMikudG9GaXhlZChcbiAgICBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3Rvci50b1N0cmluZygpLmxlbmd0aCxcbiAgKVxuXG4gIGNvbnN0IHBpcCA9IE1hdGgucm91bmQoYXZlcmFnZVByaWNlICogKGNyb3NzQ29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogbWFya2V0LnNuYXBzaG90LnNjYWxpbmdGYWN0b3IpIC9cbiAgICBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvclxuXG4gIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgY29uc3QgYnV5T3JkZXJSZXNwb25zZSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgY3Jvc3NDb25maWcuZXBpYywgXCJCVVlcIiwgY3Jvc3NDb25maWcuY29udHJhY3RzLCBhdmVyYWdlUHJpY2UrcGlwLCBcIlNUT1BcIiwgY3Jvc3NDb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgY29uc3Qgc2VsbE9yZGVyUmVzcG9uc2UgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGNyb3NzQ29uZmlnLmVwaWMsIFwiU0VMTFwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZS1waXAsIFwiU1RPUFwiLCBjcm9zc0NvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuXG4gIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgZGVhbElkOiBidXlPcmRlclJlc3BvbnNlLmRlYWxJZCxcbiAgICBkZWFsUmVmZXJlbmNlOiBidXlPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgZGlyZWN0aW9uOiBidXlPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICBzaXplOiBidXlPcmRlclJlc3BvbnNlLnNpemUsXG4gICAgbGV2ZWw6IGJ1eU9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgbGltaXRMZXZlbDogYnV5T3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgIG5leHRTdGVwOiBcIkExXCJcbiAgfSwge1xuICAgIGRlYWxJZDogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgIGRlYWxSZWZlcmVuY2U6IHNlbGxPcmRlclJlc3BvbnNlLmRlYWxSZWZlcmVuY2UsXG4gICAgZGlyZWN0aW9uOiBzZWxsT3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgc2l6ZTogc2VsbE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICBsZXZlbDogc2VsbE9yZGVyUmVzcG9uc2UubGV2ZWwsXG4gICAgbGltaXRMZXZlbDogc2VsbE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICBuZXh0U3RlcDogXCJBMVwiXG4gIH1dXG5cbiAgY29uc3QgcmVzcG9uc2VJZ0FjdGl2aXR5ID0gYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0EwJywgIGNyb3NzQ29uZmlnLCBvcmRlcnMsIFtdKVxuICBjb25zb2xlLmdyb3VwKFwiSWcgQWN0aXZpdHlcIilcbiAgY29uc29sZS5sb2coXCJvcmRlcnM6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5vcmRlcnMpXG4gIGNvbnNvbGUubG9nKFwicG9zaXRpb25zOlwiLCByZXNwb25zZUlnQWN0aXZpdHkucG9zaXRpb25zKVxuICBjb25zb2xlLmxvZyhcInN0ZXA6XCIsIHJlc3BvbnNlSWdBY3Rpdml0eS5zdGVwKVxuICBjb25zb2xlLmdyb3VwRW5kKCkqL1xuXG59XG5cbmNvbnN0IG5ld1Bvc2l0aW9uID0gYXN5bmMgKGNsaWVudCwgZXBpYywgZGlyZWN0aW9uLCBzaXplLCBjdXJyZW5jeUNvZGUpID0+IHtcbiAgY29uc3QgcG9zaXRpb25EYXRhID0ge1xuICAgIGVwaWM6IGVwaWMsXG4gICAgZXhwaXJ5OiAnLScsXG4gICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24sXG4gICAgc2l6ZTogc2l6ZSxcbiAgICBvcmRlclR5cGU6IFwiTUFSS0VUXCIsXG4gICAgdGltZUluRm9yY2U6ICdGSUxMX09SX0tJTEwnLFxuICAgIGxldmVsOiBudWxsLFxuICAgIGd1YXJhbnRlZWRTdG9wOiAnZmFsc2UnLFxuICAgIHN0b3BMZXZlbDogbnVsbCxcbiAgICBzdG9wRGlzdGFuY2U6IG51bGwsXG4gICAgdHJhaWxpbmdTdG9wSW5jcmVtZW50OiBudWxsLFxuICAgIGZvcmNlT3BlbjogJ3RydWUnLFxuICAgIGxpbWl0TGV2ZWw6IG51bGwsXG4gICAgbGltaXREaXN0YW5jZTogbnVsbCxcbiAgICBjdXJyZW5jeUNvZGU6IGN1cnJlbmN5Q29kZSxcbiAgICBxdW90ZUlkOiBudWxsLFxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWFsUmVmZXJlbmNlID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5jcmVhdGVQb3NpdGlvbihwb3NpdGlvbkRhdGEpXG4gICAgLy9jb25zdCByZXNwb25zZUNvbmZpcm1UcmFkZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gICAgLy9jb25zb2xlLmxvZyhcImZ1bGwgcG9zaXRpb24gcmVzcG9uc2VcIiwgcmVzcG9uc2VDb25maXJtVHJhZGUpXG4gICAgcmV0dXJuIGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gIH1jYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJuZXdQb3NpdGlvbiBlcnJvclwiLCBlKVxuICAgIHJldHVybiBlXG4gIH1cbn1cblxuY29uc3QgbmV3T3JkZXIgPSBhc3luYyAoY2xpZW50LCBlcGljLCBkaXJlY3Rpb24sIHNpemUsIGxldmVsLCB0eXBlLCBjdXJyZW5jeUNvZGUsIHN0b3BMZXZlbCwgbGltaXRMZXZlbCkgPT4ge1xuICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgZXBpYzogZXBpYyxcbiAgICBleHBpcnk6ICctJyxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvbixcbiAgICBzaXplOiBzaXplLFxuICAgIGxldmVsOiBsZXZlbCxcbiAgICBmb3JjZU9wZW46ICd0cnVlJyxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGN1cnJlbmN5Q29kZTogY3VycmVuY3lDb2RlLFxuICAgIHRpbWVJbkZvcmNlOiAnR09PRF9USUxMX0NBTkNFTExFRCcsXG4gICAgZ29vZFRpbGxEYXRlOiBudWxsLFxuICAgIGd1YXJhbnRlZWRTdG9wOiAnZmFsc2UnLFxuICAgIHN0b3BMZXZlbDogc3RvcExldmVsLFxuICAgIHN0b3BEaXN0YW5jZTogbnVsbCxcbiAgICBsaW1pdExldmVsOiBsaW1pdExldmVsLFxuICAgIGxpbWl0RGlzdGFuY2U6IG51bGxcbiAgfVxuXG4gIC8vY29uc29sZS5sb2coXCJvcmRlckRhdGFcIiwgb3JkZXJEYXRhKVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVhbFJlZmVyZW5jZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY3JlYXRlT3JkZXIob3JkZXJEYXRhKVxuICAgIC8vY29uc3QgcmVzcG9uc2VDb25maXJtVHJhZGUgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxuICAgIC8vY29uc29sZS5sb2coXCJmdWxsIG9yZGVyIHJlc3BvbnNlXCIsIHJlc3BvbnNlQ29uZmlybVRyYWRlKVxuICAgIHJldHVybiBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxuICB9Y2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwibmV3T3JkZXIgZXJyb3JcIiwgZSlcbiAgICByZXR1cm4gZVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjbG9zZVBvc2l0aW9uID0gYXN5bmMgKGNsaWVudCwgZGVhbElkLCBkaXJlY3Rpb24sIHNpemUsIHBhcnRpYWwpID0+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBkZWFsSWQ6IGRlYWxJZCxcbiAgICBlcGljOiBudWxsLFxuICAgIGV4cGlyeTogbnVsbCxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIixcbiAgICBzaXplOiBwYXJ0aWFsID8gc2l6ZS8yIDogc2l6ZSxcbiAgICBsZXZlbDogbnVsbCxcbiAgICBvcmRlclR5cGU6IFwiTUFSS0VUXCIsXG4gICAgdGltZUluRm9yY2U6IFwiRVhFQ1VURV9BTkRfRUxJTUlOQVRFXCIsXG4gICAgcXVvdGVJZDogbnVsbFxuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgZGVhbFJlZmVyZW5jZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY2xvc2VQb3NpdGlvbihkYXRhKVxuICAgIHJldHVybiBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxuICB9Y2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiY2xvc2VQb3NpdGlvbiBlcnJvclwiLCBlKVxuICAgIHJldHVybiBlXG4gIH1cbn1cblxuY29uc3QgZ2V0Q29tcGxldGVXYXRjaGxpc3QgPSBhc3luYyAoYWNjb3VudERhdGEpID0+IHtcbiAgY29uc3Qgc2Vzc2lvblJlc3BvbnNlID0gYXdhaXQgaWdTZXNzaW9uKGFjY291bnREYXRhLnVzZXJuYW1lLCBhY2NvdW50RGF0YS5wYXNzd29yZCwgYWNjb3VudERhdGEuYXBpS2V5KVxuXG4gIGlmIChzZXNzaW9uUmVzcG9uc2UpIHtcbiAgICBjb25zdCBoZWFkZXJHZXQgPSB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXG4gICAgICAgICdYLUlHLUFQSS1LRVknOiBgJHthY2NvdW50RGF0YS5hcGlLZXl9YCxcbiAgICAgICAgJ1ZlcnNpb24nOiAxLFxuICAgICAgICAnQ1NUJzogYCR7c2Vzc2lvblJlc3BvbnNlLmNzdH1gLFxuICAgICAgICAnWC1TRUNVUklUWS1UT0tFTic6IGAke3Nlc3Npb25SZXNwb25zZS54U2VjdXJpdHlUb2tlbn1gXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdhdGNobGlzdHNSZXBvc25zZSA9IGF3YWl0IGF4aW9zLmdldChiYXNlVVJMICsgJy93YXRjaGxpc3RzJywgaGVhZGVyR2V0KVxuXG4gICAgY29uc3Qgd2F0Y2hsaXN0SWQgPSAgd2F0Y2hsaXN0c1JlcG9zbnNlLmRhdGEud2F0Y2hsaXN0cy5maW5kKGxpc3QgPT4gbGlzdC5uYW1lID09PSBcIm1hY2NoaW5ldHRhXCIpXG5cbiAgICBjb25zdCB3YXRjaGxpc3QgPSBhd2FpdCBnZXRXYXRjaGxpc3Qod2F0Y2hsaXN0SWQuaWQsIHNlc3Npb25SZXNwb25zZS5jc3QsIHNlc3Npb25SZXNwb25zZS54U2VjdXJpdHlUb2tlbiwgYWNjb3VudERhdGEuYXBpS2V5KVxuXG4gICAgcmV0dXJuIHdhdGNobGlzdFxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmNvbnN0IGdldFdhdGNobGlzdCA9IGFzeW5jICh3YXRjaGxpc3RJZCwgY3N0LCB4U2VjdXJpdHlUb2tlbiwgYXBpS2V5KSA9PiB7XG4gIGNvbnN0IGhlYWRlckdldCA9IHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLFxuICAgICAgJ1gtSUctQVBJLUtFWSc6IGAke2FwaUtleX1gLFxuICAgICAgJ1ZlcnNpb24nOiAxLFxuICAgICAgJ0NTVCc6IGAke2NzdH1gLFxuICAgICAgJ1gtU0VDVVJJVFktVE9LRU4nOiBgJHt4U2VjdXJpdHlUb2tlbn1gXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF3YWl0IGF4aW9zLmdldChiYXNlVVJMICsgJy93YXRjaGxpc3RzLycrd2F0Y2hsaXN0SWQsIGhlYWRlckdldClcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlnU2Vzc2lvbixcbiAgY2xvc2VBY3Rpdml0eSxcbiAgZ2V0Q29tcGxldGVXYXRjaGxpc3QsXG4gIG5ld09yZGVyLFxuICBzdGVwMCxcbiAgc3RlcDEsXG4gIHN0ZXAyLFxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBeUc7QUFBQTtBQUFBO0FBQUE7QUFBQSwrQ0FGekc7QUFBQTtBQUFBO0FBSUEsSUFBTUEsT0FBTyxHQUFHLHNDQUFzQztBQUV0RCxJQUFNQyxTQUFTO0VBQUEsc0VBQUcsaUJBQU9DLFVBQVUsRUFBRUMsUUFBUSxFQUFFQyxNQUFNO0lBQUE7SUFBQTtNQUFBO1FBQUE7VUFBQTtVQUFBLE9BQzVCQyxpQkFBSyxDQUN6QkMsSUFBSSxDQUFDTixPQUFPLEdBQUMsVUFBVSxFQUFFO1lBQ3hCRSxVQUFVLEVBQVZBLFVBQVU7WUFDVkMsUUFBUSxFQUFSQTtVQUNGLENBQUMsRUFBRTtZQUFDSSxPQUFPLEVBQUU7Y0FBQyxjQUFjLEVBQUUsaUNBQWlDO2NBQUUsY0FBYyxZQUFLSCxNQUFNLENBQUU7Y0FBRSxTQUFTLEVBQUU7WUFBQztVQUFDLENBQUMsQ0FBQztRQUFBO1VBSnpHSSxRQUFRO1VBQUEsS0FNVkEsUUFBUTtZQUFBO1lBQUE7VUFBQTtVQUFBLGlDQUNIO1lBQ0xDLFNBQVMsRUFBRUQsUUFBUSxDQUFDRSxJQUFJLENBQUNDLGdCQUFnQjtZQUN6Q0MsUUFBUSxFQUFFSixRQUFRLENBQUNFLElBQUksQ0FBQ0UsUUFBUTtZQUNoQ0MscUJBQXFCLEVBQUVMLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDRyxxQkFBcUI7WUFDMURDLEdBQUcsRUFBRU4sUUFBUSxDQUFDRCxPQUFPLENBQUNPLEdBQUc7WUFDekJDLGNBQWMsRUFBRVAsUUFBUSxDQUFDRCxPQUFPLENBQUMsa0JBQWtCO1VBQ3JELENBQUM7UUFBQTtVQUFBLGlDQUdJO1lBQUNTLEtBQUssRUFBRTtVQUFlLENBQUM7UUFBQTtR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","map":{"version":3,"names":["baseURL","igSession","identifier","password","apiKey","axios","post","headers","response","accountId","data","currentAccountId","clientId","lightstreamerEndpoint","cst","xSecurityToken","error","step0","accountData","crossList","client","APIClient","URL_DEMO","rest","login","createSession","username","epicArray","cross","push","epic","market","getMarketDetails","marketDetails","crossConfig","find","instrument","averagePrice","snapshot","bid","offer","toFixed","scalingFactor","toString","length","pip","Math","round","percentage","newOrder","contracts","currencies","buyOrderResponse","sellOrderResponse","orders","dealId","dealReference","direction","size","level","limitLevel","nextStep","newIgActivity","responseIgActivity","console","log","step1","activities","event","refOrder","order","positions","totalPL","group","position","closePosition","responseClosePosition","profit","groupEnd","dealing","deleteOrder","config","levelStop","levelLimit","stopOrderResponse","dealStatus","limitOrderResponse","step2","newPosition","newPositionResponse","levelStop1","levelStop2","stopOrderResponse1","stopOrderResponse2","closeActivity","getAllOrders","allOrders","getAllOpenPositions","allPositions","ordersToDelete","workingOrders","filter","row","workingOrderData","positionsToDelete","deleteIgActivity","restartCross","currencyCode","positionData","expiry","orderType","timeInForce","guaranteedStop","stopLevel","stopDistance","trailingStopIncrement","forceOpen","limitDistance","quoteId","createPosition","confirmTrade","type","orderData","goodTillDate","createOrder","partial","getCompleteWatchlist","sessionResponse","headerGet","get","watchlistsReposnse","watchlistId","watchlists","list","name","getWatchlist","id","watchlist","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["restV1.js"],"sourcesContent":["import axios from \"axios\";\nimport {APIClient} from \"ig-trading-api\";\nimport {deleteIgActivity, getIgActivities, newIgActivity} from \"./mongoDB\";\nimport {Direction, PositionOrderType, PositionTimeInForce} from \"ig-trading-api/dist/dealing/DealingAPI\";\n\nconst baseURL = \"https://demo-api.ig.com/gateway/deal\"\n\nconst igSession = async (identifier, password, apiKey) => {\n  const response = await axios\n    .post(baseURL+'/session', {\n      identifier,\n      password\n    }, {headers: {'Content-Type': 'application/json; charset=UTF-8', 'X-IG-API-KEY': `${apiKey}`, 'Version': 2}})\n\n  if (response) {\n    return {\n      accountId: response.data.currentAccountId,\n      clientId: response.data.clientId,\n      lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n      cst: response.headers.cst,\n      xSecurityToken: response.headers['x-security-token']\n    }\n  }\n\n  return {error: \"session error\"}\n}\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nconst step0 = async (accountData, crossList) =>{\n  // apro una nuova sessione\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  const epicArray = []\n  for (const cross of crossList){\n    // creo un array contenente solo gli epic, così da fare una chiamata unica\n    epicArray.push(cross.epic)\n  }\n\n  //recupero il dettaglio di tutti i cross\n  const marketDetails = await client.rest.market.getMarketDetails(epicArray)\n\n  //Per ogni cross apro la poosizione A0\n  for (const market of marketDetails.marketDetails){\n    try {\n      const crossConfig = crossList.find(cross => cross.epic === market.instrument.epic)\n\n      const averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(\n        market.snapshot.scalingFactor.toString().length,\n      )\n\n      const pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) /\n        market.snapshot.scalingFactor\n\n      // Apro i nuovi ordini\n      const buyOrderResponse = await newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice+pip, \"STOP\", crossConfig.currencies, null, null)\n      const sellOrderResponse = await newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice-pip, \"STOP\", crossConfig.currencies, null, null)\n\n      const orders = [{\n        dealId: buyOrderResponse.dealId,\n        dealReference: buyOrderResponse.dealReference,\n        direction: buyOrderResponse.direction,\n        size: buyOrderResponse.size,\n        level: buyOrderResponse.level,\n        limitLevel: buyOrderResponse.limitLevel,\n        nextStep: \"A1\"\n      }, {\n        dealId: sellOrderResponse.dealId,\n        dealReference: sellOrderResponse.dealReference,\n        direction: sellOrderResponse.direction,\n        size: sellOrderResponse.size,\n        level: sellOrderResponse.level,\n        limitLevel: sellOrderResponse.limitLevel,\n        nextStep: \"A1\"\n      }]\n\n      const responseIgActivity = await newIgActivity(accountData, 'A0', crossConfig.epic, crossConfig, orders, [])\n    }catch (e) {\n      console.log(\"step 0 error\", e)\n    }\n  }\n}\n\nconst step1 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiusura posizioni aperte\n    if(activities.positions.length > 0 ) {\n      let totalPL = 0\n      console.group(\"Chiusura posizioni\")\n      for (const position of activities.positions){\n        const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n        totalPL += responseClosePosition.profit\n      }\n      console.groupEnd()\n      console.log(\"total PL\", totalPL)\n    }\n\n    // Chiudo l'ordine non eseguito\n    await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop = event.direction === \"BUY\" ? event.level+(pip/2) : event.level-(pip/2)\n    const levelLimit = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    //console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n\n    const limitOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelLimit, \"LIMIT\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n    //console.log(\"stopOrderResponse: \", stopOrderResponse.affectedDeals)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A1\"\n    }, {\n      dealId: limitOrderResponse.dealId,\n      dealReference: limitOrderResponse.dealReference,\n      direction: limitOrderResponse.direction,\n      size: limitOrderResponse.size,\n      level: limitOrderResponse.level,\n      limitLevel: limitOrderResponse.limitLevel,\n      nextStep: \"A2\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A1', activities.epic, activities.config, orders, positions)\n   /* console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()*/\n\n  } catch (e) {\n    console.error(\"step1 error\", e)\n  }\n}\n\nconst step2 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Take profit posizione aperta (-1 contrato)\n    if(activities.positions.length > 0 ) {\n      let totalPL = 0\n      console.group(\"Chiusura posizioni\")\n      for (const position of activities.positions){\n        const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n        totalPL += responseClosePosition.profit\n      }\n      console.groupEnd()\n      console.log(\"total PL\", totalPL)\n    }\n\n    // Chiudo l'ordine non eseguito\n    await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    console.group(\"Nuova posizione copertura\")\n    const newPositionResponse = await newPosition(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, activities.config.currencies)\n    console.log(\"newPosition dealStatus: \", newPositionResponse.dealStatus)\n    console.groupEnd()\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop1 = event.direction === \"BUY\" ? event.level+pip : event.level-pip\n    const levelStop2 = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse1 = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus)\n\n    const stopOrderResponse2 = await newOrder(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, levelStop2, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus)\n    console.groupEnd()\n\n    const orders = [{\n      dealId: stopOrderResponse1.dealId,\n      dealReference: stopOrderResponse1.dealReference,\n      direction: stopOrderResponse1.direction,\n      size: stopOrderResponse1.size,\n      level: stopOrderResponse1.level,\n      limitLevel: stopOrderResponse1.limitLevel,\n      nextStep: \"A1\"\n    }, {\n      dealId: stopOrderResponse2.dealId,\n      dealReference: stopOrderResponse2.dealReference,\n      direction: stopOrderResponse2.direction,\n      size: stopOrderResponse2.size,\n      level: stopOrderResponse2.level,\n      limitLevel: stopOrderResponse2.limitLevel,\n      nextStep: \"A1\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }, {\n      dealId: newPositionResponse.dealId,\n      dealReference: newPositionResponse.dealReference,\n      direction: newPositionResponse.direction,\n      size: newPositionResponse.size,\n      level: newPositionResponse.level,\n      limitLevel: newPositionResponse.limitLevel,\n      nextStep: null\n    }]\n\n    const responseIgActivity = await newIgActivity(accountData, 'A2', activities.epic, activities.config, orders, positions)\n    /*console.group(\"Ig Activity\")\n    console.log(\"orders:\", responseIgActivity.orders)\n    console.log(\"positions:\", responseIgActivity.positions)\n    console.log(\"step:\", responseIgActivity.step)\n    console.groupEnd()*/\n  } catch (e) {\n    console.error(\"step2 error\", e)\n  }\n}\n\nconst closeActivity = async (client, accountData, epic) => {\n  const allOrders = await client.rest.dealing.getAllOrders()\n  const allPositions = await client.rest.dealing.getAllOpenPositions()\n\n  let ordersToDelete = allOrders.workingOrders.filter(row=> row.workingOrderData.epic === epic);\n  let positionsToDelete = allPositions.positions.filter(row=> row.market.epic === epic);\n\n  for (const order of ordersToDelete){\n    await client.rest.dealing.deleteOrder(order.workingOrderData.dealId)\n  }\n\n  for (const position of positionsToDelete){\n    await closePosition(client, position.position.dealId, position.position.direction, position.position.size, false)\n  }\n\n  await deleteIgActivity(accountData, epic)\n}\n\nconst restartCross = async (client, accountData, crossConfig) => {\n\n  // await closeActivity(client, crossConfig.epic)\n\n  /*const averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(\n    market.snapshot.scalingFactor.toString().length,\n  )\n\n  const pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) /\n    market.snapshot.scalingFactor\n\n  // Apro i nuovi ordini\n  const buyOrderResponse = await newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice+pip, \"STOP\", crossConfig.currencies, null, null)\n  const sellOrderResponse = await newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice-pip, \"STOP\", crossConfig.currencies, null, null)\n\n  const orders = [{\n    dealId: buyOrderResponse.dealId,\n    dealReference: buyOrderResponse.dealReference,\n    direction: buyOrderResponse.direction,\n    size: buyOrderResponse.size,\n    level: buyOrderResponse.level,\n    limitLevel: buyOrderResponse.limitLevel,\n    nextStep: \"A1\"\n  }, {\n    dealId: sellOrderResponse.dealId,\n    dealReference: sellOrderResponse.dealReference,\n    direction: sellOrderResponse.direction,\n    size: sellOrderResponse.size,\n    level: sellOrderResponse.level,\n    limitLevel: sellOrderResponse.limitLevel,\n    nextStep: \"A1\"\n  }]\n\n  const responseIgActivity = await newIgActivity(accountData, 'A0',  crossConfig, orders, [])\n  console.group(\"Ig Activity\")\n  console.log(\"orders:\", responseIgActivity.orders)\n  console.log(\"positions:\", responseIgActivity.positions)\n  console.log(\"step:\", responseIgActivity.step)\n  console.groupEnd()*/\n\n}\n\nconst newPosition = async (client, epic, direction, size, currencyCode) => {\n  const positionData = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    orderType: \"MARKET\",\n    timeInForce: 'FILL_OR_KILL',\n    level: null,\n    guaranteedStop: 'false',\n    stopLevel: null,\n    stopDistance: null,\n    trailingStopIncrement: null,\n    forceOpen: 'true',\n    limitLevel: null,\n    limitDistance: null,\n    currencyCode: currencyCode,\n    quoteId: null,\n  }\n\n  try {\n    const dealReference = await client.rest.dealing.createPosition(positionData)\n    //const responseConfirmTrade = await client.rest.dealing.confirmTrade(dealReference)\n    //console.log(\"full position response\", responseConfirmTrade)\n    return await client.rest.dealing.confirmTrade(dealReference)\n  }catch (e) {\n    console.error(\"newPosition error\", e)\n    return e\n  }\n}\n\nconst newOrder = async (client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) => {\n  const orderData = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    level: level,\n    forceOpen: 'true',\n    type: type,\n    currencyCode: currencyCode,\n    timeInForce: 'GOOD_TILL_CANCELLED',\n    goodTillDate: null,\n    guaranteedStop: 'false',\n    stopLevel: stopLevel,\n    stopDistance: null,\n    limitLevel: limitLevel,\n    limitDistance: null\n  }\n\n  //console.log(\"orderData\", orderData)\n\n  try {\n    const dealReference = await client.rest.dealing.createOrder(orderData)\n    //const responseConfirmTrade = await client.rest.dealing.confirmTrade(dealReference)\n    //console.log(\"full order response\", responseConfirmTrade)\n    return await client.rest.dealing.confirmTrade(dealReference)\n  }catch (e) {\n    console.error(\"newOrder error\", e)\n    return e\n  }\n}\n\nexport const closePosition = async (client, dealId, direction, size, partial) => {\n  const data = {\n    dealId: dealId,\n    epic: null,\n    expiry: null,\n    direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n    size: partial ? size/2 : size,\n    level: null,\n    orderType: \"MARKET\",\n    timeInForce: \"EXECUTE_AND_ELIMINATE\",\n    quoteId: null\n  }\n  try {\n    const dealReference = await client.rest.dealing.closePosition(data)\n    return await client.rest.dealing.confirmTrade(dealReference)\n  }catch (e) {\n    console.error(\"closePosition error\", e)\n    return e\n  }\n}\n\nconst getCompleteWatchlist = async (accountData) => {\n  const sessionResponse = await igSession(accountData.username, accountData.password, accountData.apiKey)\n\n  if (sessionResponse) {\n    const headerGet = {\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n        'X-IG-API-KEY': `${accountData.apiKey}`,\n        'Version': 1,\n        'CST': `${sessionResponse.cst}`,\n        'X-SECURITY-TOKEN': `${sessionResponse.xSecurityToken}`\n      }\n    }\n    const watchlistsReposnse = await axios.get(baseURL + '/watchlists', headerGet)\n\n    const watchlistId =  watchlistsReposnse.data.watchlists.find(list => list.name === \"macchinetta\")\n\n    const watchlist = await getWatchlist(watchlistId.id, sessionResponse.cst, sessionResponse.xSecurityToken, accountData.apiKey)\n\n    return watchlist\n  }\n  return null\n}\n\nconst getWatchlist = async (watchlistId, cst, xSecurityToken, apiKey) => {\n  const headerGet = {\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n      'X-IG-API-KEY': `${apiKey}`,\n      'Version': 1,\n      'CST': `${cst}`,\n      'X-SECURITY-TOKEN': `${xSecurityToken}`\n    }\n  }\n\n  return await axios.get(baseURL + '/watchlists/'+watchlistId, headerGet)\n}\n\nmodule.exports = {\n  igSession,\n  closeActivity,\n  getCompleteWatchlist,\n  newOrder,\n  step0,\n  step1,\n  step2,\n}\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AAAyG;AAAA;AAAA;AAAA;AAAA,+CAFzG;AAAA;AAAA;AAIA,IAAMA,OAAO,GAAG,sCAAsC;AAEtD,IAAMC,SAAS;EAAA,sEAAG,iBAAOC,UAAU,EAAEC,QAAQ,EAAEC,MAAM;IAAA;IAAA;MAAA;QAAA;UAAA;UAAA,OAC5BC,iBAAK,CACzBC,IAAI,CAACN,OAAO,GAAC,UAAU,EAAE;YACxBE,UAAU,EAAVA,UAAU;YACVC,QAAQ,EAARA;UACF,CAAC,EAAE;YAACI,OAAO,EAAE;cAAC,cAAc,EAAE,iCAAiC;cAAE,cAAc,YAAKH,MAAM,CAAE;cAAE,SAAS,EAAE;YAAC;UAAC,CAAC,CAAC;QAAA;UAJzGI,QAAQ;UAAA,KAMVA,QAAQ;YAAA;YAAA;UAAA;UAAA,iCACH;YACLC,SAAS,EAAED,QAAQ,CAACE,IAAI,CAACC,gBAAgB;YACzCC,QAAQ,EAAEJ,QAAQ,CAACE,IAAI,CAACE,QAAQ;YAChCC,qBAAqB,EAAEL,QAAQ,CAACE,IAAI,CAACG,qBAAqB;YAC1DC,GAAG,EAAEN,QAAQ,CAACD,OAAO,CAACO,GAAG;YACzBC,cAAc,EAAEP,QAAQ,CAACD,OAAO,CAAC,kBAAkB;UACrD,CAAC;QAAA;UAAA,iCAGI;YAACS,KAAK,EAAE;UAAe,CAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAChC;EAAA,gBAlBKf,SAAS;IAAA;EAAA;AAAA,GAkBd;;AAED;AACA;AACA;AACA;AACA;AACA,IAAMgB,KAAK;EAAA,uEAAG,kBAAOC,WAAW,EAAEC,SAAS;IAAA;IAAA;MAAA;QAAA;UACzC;UACMC,MAAM,GAAG,IAAIC,uBAAS,CAACA,uBAAS,CAACC,QAAQ,EAAEJ,WAAW,CAACd,MAAM,CAAC;UAAA;UAAA,OAC9DgB,MAAM,CAACG,IAAI,CAACC,KAAK,CAACC,aAAa,CAACP,WAAW,CAACQ,QAAQ,EAAER,WAAW,CAACf,QAAQ,CAAC;QAAA;UAE3EwB,SAAS,GAAG,EAAE;UAAA,uCACAR,SAAS;UAAA;YAA7B,oDAA8B;cAAnBS,KAAK;cACd;cACAD,SAAS,CAACE,IAAI,CAACD,KAAK,CAACE,IAAI,CAAC;YAC5B;;YAEA;UAAA;YAAA;UAAA;YAAA;UAAA;UAAA;UAAA,OAC4BV,MAAM,CAACG,IAAI,CAACQ,MAAM,CAACC,gBAAgB,CAACL,SAAS,CAAC;QAAA;UAApEM,aAAa;UAEnB;UAAA,wCACqBA,aAAa,CAACA,aAAa;UAAA;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAArCF,MAAM;kBAAA;kBAEPG,WAAW,GAAGf,SAAS,CAACgB,IAAI,CAAC,UAAAP,KAAK;oBAAA,OAAIA,KAAK,CAACE,IAAI,KAAKC,MAAM,CAACK,UAAU,CAACN,IAAI;kBAAA,EAAC;kBAE5EO,YAAY,GAAG,CAAC,CAAC,CAACN,MAAM,CAACO,QAAQ,CAACC,GAAG,GAAGR,MAAM,CAACO,QAAQ,CAACE,KAAK,IAAI,CAAC,EAAEC,OAAO,CAC/EV,MAAM,CAACO,QAAQ,CAACI,aAAa,CAACC,QAAQ,EAAE,CAACC,MAAM,CAChD;kBAEKC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACV,YAAY,IAAIH,WAAW,CAACc,UAAU,GAAG,GAAG,CAAC,GAAGjB,MAAM,CAACO,QAAQ,CAACI,aAAa,CAAC,GACnGX,MAAM,CAACO,QAAQ,CAACI,aAAa,EAE/B;kBAAA;kBAAA,OAC+BO,QAAQ,CAAC7B,MAAM,EAAEc,WAAW,CAACJ,IAAI,EAAE,KAAK,EAAEI,WAAW,CAACgB,SAAS,EAAEb,YAAY,GAACQ,GAAG,EAAE,MAAM,EAAEX,WAAW,CAACiB,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;gBAAA;kBAAvJC,gBAAgB;kBAAA;kBAAA,OACUH,QAAQ,CAAC7B,MAAM,EAAEc,WAAW,CAACJ,IAAI,EAAE,MAAM,EAAEI,WAAW,CAACgB,SAAS,EAAEb,YAAY,GAACQ,GAAG,EAAE,MAAM,EAAEX,WAAW,CAACiB,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;gBAAA;kBAAzJE,iBAAiB;kBAEjBC,MAAM,GAAG,CAAC;oBACdC,MAAM,EAAEH,gBAAgB,CAACG,MAAM;oBAC/BC,aAAa,EAAEJ,gBAAgB,CAACI,aAAa;oBAC7CC,SAAS,EAAEL,gBAAgB,CAACK,SAAS;oBACrCC,IAAI,EAAEN,gBAAgB,CAACM,IAAI;oBAC3BC,KAAK,EAAEP,gBAAgB,CAACO,KAAK;oBAC7BC,UAAU,EAAER,gBAAgB,CAACQ,UAAU;oBACvCC,QAAQ,EAAE;kBACZ,CAAC,EAAE;oBACDN,MAAM,EAAEF,iBAAiB,CAACE,MAAM;oBAChCC,aAAa,EAAEH,iBAAiB,CAACG,aAAa;oBAC9CC,SAAS,EAAEJ,iBAAiB,CAACI,SAAS;oBACtCC,IAAI,EAAEL,iBAAiB,CAACK,IAAI;oBAC5BC,KAAK,EAAEN,iBAAiB,CAACM,KAAK;oBAC9BC,UAAU,EAAEP,iBAAiB,CAACO,UAAU;oBACxCC,QAAQ,EAAE;kBACZ,CAAC,CAAC;kBAAA;kBAAA,OAE+B,IAAAC,sBAAa,EAAC5C,WAAW,EAAE,IAAI,EAAEgB,WAAW,CAACJ,IAAI,EAAEI,WAAW,EAAEoB,MAAM,EAAE,EAAE,CAAC;gBAAA;kBAAtGS,kBAAkB;kBAAA;kBAAA;gBAAA;kBAAA;kBAAA;kBAExBC,OAAO,CAACC,GAAG,CAAC,cAAc,eAAI;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;UAAA;QAAA;UAAA;YAAA;YAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAGnC;EAAA,gBArDKhD,KAAK;IAAA;EAAA;AAAA,GAqDV;AAED,IAAMiD,KAAK;EAAA,uEAAG,kBAAOC,UAAU,EAAEjD,WAAW,EAAEkD,KAAK;IAAA;IAAA;MAAA;QAAA;UACjD;UACMC,QAAQ,GAAGF,UAAU,CAACb,MAAM,CAACnB,IAAI,CAAC,UAAAmC,KAAK;YAAA,OAAIA,KAAK,CAACf,MAAM,KAAKa,KAAK,CAACb,MAAM;UAAA,EAAC,EAC/E;UACMnC,MAAM,GAAG,IAAIC,uBAAS,CAACA,uBAAS,CAACC,QAAQ,EAAEJ,WAAW,CAACd,MAAM,CAAC;UAAA;UAAA,OAC9DgB,MAAM,CAACG,IAAI,CAACC,KAAK,CAACC,aAAa,CAACP,WAAW,CAACQ,QAAQ,EAAER,WAAW,CAACf,QAAQ,CAAC;QAAA;UAAA;UAAA,MAI5EgE,UAAU,CAACI,SAAS,CAAC3B,MAAM,GAAG,CAAC;YAAA;YAAA;UAAA;UAC5B4B,OAAO,GAAG,CAAC;UACfR,OAAO,CAACS,KAAK,CAAC,oBAAoB,CAAC;UAAA,wCACZN,UAAU,CAACI,SAAS;UAAA;UAAA;QAAA;UAAA;YAAA;YAAA;UAAA;UAAhCG,QAAQ;UAAA;UAAA,OACmBC,aAAa,CAACvD,MAAM,EAAEsD,QAAQ,CAACnB,MAAM,EAAEmB,QAAQ,CAACjB,SAAS,EAAEiB,QAAQ,CAAChB,IAAI,EAAE,KAAK,CAAC;QAAA;UAA9GkB,qBAAqB;UAC3BJ,OAAO,IAAII,qBAAqB,CAACC,MAAM;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAEzCb,OAAO,CAACc,QAAQ,EAAE;UAClBd,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEO,OAAO,CAAC;QAAA;UAAA;UAAA,OAI5BpD,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACC,WAAW,CAACX,QAAQ,CAACd,MAAM,CAAC;QAAA;UAEtD;UACMV,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACqB,KAAK,CAACT,KAAK,IAAIQ,UAAU,CAACc,MAAM,CAACjC,UAAU,GAAG,GAAG,CAAC,GAAGmB,UAAU,CAACc,MAAM,CAACvC,aAAa,CAAC,GAC1GyB,UAAU,CAACc,MAAM,CAACvC,aAAa,EAEjC;UACMwC,SAAS,GAAGd,KAAK,CAACX,SAAS,KAAK,KAAK,GAAGW,KAAK,CAACT,KAAK,GAAEd,GAAG,GAAC,CAAE,GAAGuB,KAAK,CAACT,KAAK,GAAEd,GAAG,GAAC,CAAE;UACjFsC,UAAU,GAAGf,KAAK,CAACX,SAAS,KAAK,KAAK,GAAGW,KAAK,CAACT,KAAK,GAACd,GAAG,GAAGuB,KAAK,CAACT,KAAK,GAACd,GAAG,EAEhF;UACAmB,OAAO,CAACS,KAAK,CAAC,cAAc,CAAC;UAAA;UAAA,OACGxB,QAAQ,CAAC7B,MAAM,EAAE+C,UAAU,CAACrC,IAAI,EAAEsC,KAAK,CAACX,SAAS,EAAEU,UAAU,CAACc,MAAM,CAAC/B,SAAS,EAAEgC,SAAS,EAAE,MAAM,EAAEf,UAAU,CAACc,MAAM,CAAC9B,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;QAAA;UAAtKiC,iBAAiB;UACvBpB,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEmB,iBAAiB,CAACC,UAAU,CAAC;UAC3E;UAAA;UAAA,OAEiCpC,QAAQ,CAAC7B,MAAM,EAAE+C,UAAU,CAACrC,IAAI,EAAEsC,KAAK,CAACX,SAAS,EAAEU,UAAU,CAACc,MAAM,CAAC/B,SAAS,EAAEiC,UAAU,EAAE,OAAO,EAAEhB,UAAU,CAACc,MAAM,CAAC9B,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;QAAA;UAAzKmC,kBAAkB;UACxBtB,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEmB,iBAAiB,CAACC,UAAU,CAAC;UAC3E;UACArB,OAAO,CAACc,QAAQ,EAAE;UAEZxB,MAAM,GAAG,CAAC;YACdC,MAAM,EAAE6B,iBAAiB,CAAC7B,MAAM;YAChCC,aAAa,EAAE4B,iBAAiB,CAAC5B,aAAa;YAC9CC,SAAS,EAAE2B,iBAAiB,CAAC3B,SAAS;YACtCC,IAAI,EAAE0B,iBAAiB,CAAC1B,IAAI;YAC5BC,KAAK,EAAEyB,iBAAiB,CAACzB,KAAK;YAC9BC,UAAU,EAAEwB,iBAAiB,CAACxB,UAAU;YACxCC,QAAQ,EAAE;UACZ,CAAC,EAAE;YACDN,MAAM,EAAE+B,kBAAkB,CAAC/B,MAAM;YACjCC,aAAa,EAAE8B,kBAAkB,CAAC9B,aAAa;YAC/CC,SAAS,EAAE6B,kBAAkB,CAAC7B,SAAS;YACvCC,IAAI,EAAE4B,kBAAkB,CAAC5B,IAAI;YAC7BC,KAAK,EAAE2B,kBAAkB,CAAC3B,KAAK;YAC/BC,UAAU,EAAE0B,kBAAkB,CAAC1B,UAAU;YACzCC,QAAQ,EAAE;UACZ,CAAC,CAAC;UAEIU,SAAS,GAAG,CAAC;YACjBhB,MAAM,EAAEa,KAAK,CAACb,MAAM;YACpBC,aAAa,EAAEY,KAAK,CAACZ,aAAa;YAClCC,SAAS,EAAEW,KAAK,CAACX,SAAS;YAC1BC,IAAI,EAAEU,KAAK,CAACV,IAAI;YAChBC,KAAK,EAAES,KAAK,CAACT,KAAK;YAClBC,UAAU,EAAEQ,KAAK,CAACR,UAAU;YAC5BC,QAAQ,EAAE;UACZ,CAAC,CAAC;UAAA;UAAA,OAE+B,IAAAC,sBAAa,EAAC5C,WAAW,EAAE,IAAI,EAAEiD,UAAU,CAACrC,IAAI,EAAEqC,UAAU,CAACc,MAAM,EAAE3B,MAAM,EAAEiB,SAAS,CAAC;QAAA;UAAlHR,kBAAkB;UAAA;UAAA;QAAA;UAAA;UAAA;UAQxBC,OAAO,CAAChD,KAAK,CAAC,aAAa,eAAI;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAElC;EAAA,gBAhFKkD,KAAK;IAAA;EAAA;AAAA,GAgFV;AAED,IAAMqB,KAAK;EAAA,uEAAG,kBAAOpB,UAAU,EAAEjD,WAAW,EAAEkD,KAAK;IAAA;IAAA;MAAA;QAAA;UACjD;UACMC,QAAQ,GAAGF,UAAU,CAACb,MAAM,CAACnB,IAAI,CAAC,UAAAmC,KAAK;YAAA,OAAIA,KAAK,CAACf,MAAM,KAAKa,KAAK,CAACb,MAAM;UAAA,EAAC,EAE/E;UACMnC,MAAM,GAAG,IAAIC,uBAAS,CAACA,uBAAS,CAACC,QAAQ,EAAEJ,WAAW,CAACd,MAAM,CAAC;UAAA;UAAA,OAC9DgB,MAAM,CAACG,IAAI,CAACC,KAAK,CAACC,aAAa,CAACP,WAAW,CAACQ,QAAQ,EAAER,WAAW,CAACf,QAAQ,CAAC;QAAA;UAAA;UAAA,MAI5EgE,UAAU,CAACI,SAAS,CAAC3B,MAAM,GAAG,CAAC;YAAA;YAAA;UAAA;UAC5B4B,OAAO,GAAG,CAAC;UACfR,OAAO,CAACS,KAAK,CAAC,oBAAoB,CAAC;UAAA,wCACZN,UAAU,CAACI,SAAS;UAAA;UAAA;QAAA;UAAA;YAAA;YAAA;UAAA;UAAhCG,QAAQ;UAAA;UAAA,OACmBC,aAAa,CAACvD,MAAM,EAAEsD,QAAQ,CAACnB,MAAM,EAAEmB,QAAQ,CAACjB,SAAS,EAAEiB,QAAQ,CAAChB,IAAI,EAAE,KAAK,CAAC;QAAA;UAA9GkB,qBAAqB;UAC3BJ,OAAO,IAAII,qBAAqB,CAACC,MAAM;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAEzCb,OAAO,CAACc,QAAQ,EAAE;UAClBd,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEO,OAAO,CAAC;QAAA;UAAA;UAAA,OAI5BpD,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACC,WAAW,CAACX,QAAQ,CAACd,MAAM,CAAC;QAAA;UAEtDS,OAAO,CAACS,KAAK,CAAC,2BAA2B,CAAC;UAAA;UAAA,OACRe,WAAW,CAACpE,MAAM,EAAE+C,UAAU,CAACrC,IAAI,EAAEsC,KAAK,CAACX,SAAS,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,EAAEU,UAAU,CAACc,MAAM,CAAC/B,SAAS,EAAEiB,UAAU,CAACc,MAAM,CAAC9B,UAAU,CAAC;QAAA;UAAvKsC,mBAAmB;UACzBzB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEwB,mBAAmB,CAACJ,UAAU,CAAC;UACvErB,OAAO,CAACc,QAAQ,EAAE;;UAElB;UACMjC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACqB,KAAK,CAACT,KAAK,IAAIQ,UAAU,CAACc,MAAM,CAACjC,UAAU,GAAG,GAAG,CAAC,GAAGmB,UAAU,CAACc,MAAM,CAACvC,aAAa,CAAC,GAC1GyB,UAAU,CAACc,MAAM,CAACvC,aAAa,EAEjC;UACMgD,UAAU,GAAGtB,KAAK,CAACX,SAAS,KAAK,KAAK,GAAGW,KAAK,CAACT,KAAK,GAACd,GAAG,GAAGuB,KAAK,CAACT,KAAK,GAACd,GAAG;UAC1E8C,UAAU,GAAGvB,KAAK,CAACX,SAAS,KAAK,KAAK,GAAGW,KAAK,CAACT,KAAK,GAACd,GAAG,GAAGuB,KAAK,CAACT,KAAK,GAACd,GAAG,EAEhF;UACAmB,OAAO,CAACS,KAAK,CAAC,cAAc,CAAC;UAAA;UAAA,OACIxB,QAAQ,CAAC7B,MAAM,EAAE+C,UAAU,CAACrC,IAAI,EAAEsC,KAAK,CAACX,SAAS,EAAEU,UAAU,CAACc,MAAM,CAAC/B,SAAS,EAAEwC,UAAU,EAAE,MAAM,EAAEvB,UAAU,CAACc,MAAM,CAAC9B,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;QAAA;UAAxKyC,kBAAkB;UACxB5B,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAE2B,kBAAkB,CAACP,UAAU,CAAC;UAAA;UAAA,OAE5CpC,QAAQ,CAAC7B,MAAM,EAAE+C,UAAU,CAACrC,IAAI,EAAEsC,KAAK,CAACX,SAAS,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,EAAEU,UAAU,CAACc,MAAM,CAAC/B,SAAS,EAAEyC,UAAU,EAAE,MAAM,EAAExB,UAAU,CAACc,MAAM,CAAC9B,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;QAAA;UAAnM0C,kBAAkB;UACxB7B,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAE4B,kBAAkB,CAACR,UAAU,CAAC;UAC7ErB,OAAO,CAACc,QAAQ,EAAE;UAEZxB,MAAM,GAAG,CAAC;YACdC,MAAM,EAAEqC,kBAAkB,CAACrC,MAAM;YACjCC,aAAa,EAAEoC,kBAAkB,CAACpC,aAAa;YAC/CC,SAAS,EAAEmC,kBAAkB,CAACnC,SAAS;YACvCC,IAAI,EAAEkC,kBAAkB,CAAClC,IAAI;YAC7BC,KAAK,EAAEiC,kBAAkB,CAACjC,KAAK;YAC/BC,UAAU,EAAEgC,kBAAkB,CAAChC,UAAU;YACzCC,QAAQ,EAAE;UACZ,CAAC,EAAE;YACDN,MAAM,EAAEsC,kBAAkB,CAACtC,MAAM;YACjCC,aAAa,EAAEqC,kBAAkB,CAACrC,aAAa;YAC/CC,SAAS,EAAEoC,kBAAkB,CAACpC,SAAS;YACvCC,IAAI,EAAEmC,kBAAkB,CAACnC,IAAI;YAC7BC,KAAK,EAAEkC,kBAAkB,CAAClC,KAAK;YAC/BC,UAAU,EAAEiC,kBAAkB,CAACjC,UAAU;YACzCC,QAAQ,EAAE;UACZ,CAAC,CAAC;UAEIU,SAAS,GAAG,CAAC;YACjBhB,MAAM,EAAEa,KAAK,CAACb,MAAM;YACpBC,aAAa,EAAEY,KAAK,CAACZ,aAAa;YAClCC,SAAS,EAAEW,KAAK,CAACX,SAAS;YAC1BC,IAAI,EAAEU,KAAK,CAACV,IAAI;YAChBC,KAAK,EAAES,KAAK,CAACT,KAAK;YAClBC,UAAU,EAAEQ,KAAK,CAACR,UAAU;YAC5BC,QAAQ,EAAE;UACZ,CAAC,EAAE;YACDN,MAAM,EAAEkC,mBAAmB,CAAClC,MAAM;YAClCC,aAAa,EAAEiC,mBAAmB,CAACjC,aAAa;YAChDC,SAAS,EAAEgC,mBAAmB,CAAChC,SAAS;YACxCC,IAAI,EAAE+B,mBAAmB,CAAC/B,IAAI;YAC9BC,KAAK,EAAE8B,mBAAmB,CAAC9B,KAAK;YAChCC,UAAU,EAAE6B,mBAAmB,CAAC7B,UAAU;YAC1CC,QAAQ,EAAE;UACZ,CAAC,CAAC;UAAA;UAAA,OAE+B,IAAAC,sBAAa,EAAC5C,WAAW,EAAE,IAAI,EAAEiD,UAAU,CAACrC,IAAI,EAAEqC,UAAU,CAACc,MAAM,EAAE3B,MAAM,EAAEiB,SAAS,CAAC;QAAA;UAAlHR,kBAAkB;UAAA;UAAA;QAAA;UAAA;UAAA;UAOxBC,OAAO,CAAChD,KAAK,CAAC,aAAa,eAAI;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAElC;EAAA,gBA3FKuE,KAAK;IAAA;EAAA;AAAA,GA2FV;AAED,IAAMO,aAAa;EAAA,uEAAG,kBAAO1E,MAAM,EAAEF,WAAW,EAAEY,IAAI;IAAA;IAAA;MAAA;QAAA;UAAA;UAAA,OAC5BV,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACgB,YAAY,EAAE;QAAA;UAApDC,SAAS;UAAA;UAAA,OACY5E,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACkB,mBAAmB,EAAE;QAAA;UAA9DC,YAAY;UAEdC,cAAc,GAAGH,SAAS,CAACI,aAAa,CAACC,MAAM,CAAC,UAAAC,GAAG;YAAA,OAAGA,GAAG,CAACC,gBAAgB,CAACzE,IAAI,KAAKA,IAAI;UAAA,EAAC;UACzF0E,iBAAiB,GAAGN,YAAY,CAAC3B,SAAS,CAAC8B,MAAM,CAAC,UAAAC,GAAG;YAAA,OAAGA,GAAG,CAACvE,MAAM,CAACD,IAAI,KAAKA,IAAI;UAAA,EAAC;UAAA,wCAEjEqE,cAAc;UAAA;UAAA;QAAA;UAAA;YAAA;YAAA;UAAA;UAAvB7B,KAAK;UAAA;UAAA,OACRlD,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACC,WAAW,CAACV,KAAK,CAACiC,gBAAgB,CAAChD,MAAM,CAAC;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA,wCAG/CiD,iBAAiB;UAAA;UAAA;QAAA;UAAA;YAAA;YAAA;UAAA;UAA7B9B,QAAQ;UAAA;UAAA,OACXC,aAAa,CAACvD,MAAM,EAAEsD,QAAQ,CAACA,QAAQ,CAACnB,MAAM,EAAEmB,QAAQ,CAACA,QAAQ,CAACjB,SAAS,EAAEiB,QAAQ,CAACA,QAAQ,CAAChB,IAAI,EAAE,KAAK,CAAC;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;UAAA;UAAA,OAG7G,IAAA+C,yBAAgB,EAACvF,WAAW,EAAEY,IAAI,CAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAC1C;EAAA,gBAhBKgE,aAAa;IAAA;EAAA;AAAA,GAgBlB;AAED,IAAMY,YAAY;EAAA,uEAAG,kBAAOtF,MAAM,EAAEF,WAAW,EAAEgB,WAAW;IAAA;MAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAwC3D;EAAA,gBAxCKwE,YAAY;IAAA;EAAA;AAAA,GAwCjB;AAED,IAAMlB,WAAW;EAAA,uEAAG,kBAAOpE,MAAM,EAAEU,IAAI,EAAE2B,SAAS,EAAEC,IAAI,EAAEiD,YAAY;IAAA;IAAA;MAAA;QAAA;UAC9DC,YAAY,GAAG;YACnB9E,IAAI,EAAEA,IAAI;YACV+E,MAAM,EAAE,GAAG;YACXpD,SAAS,EAAEA,SAAS;YACpBC,IAAI,EAAEA,IAAI;YACVoD,SAAS,EAAE,QAAQ;YACnBC,WAAW,EAAE,cAAc;YAC3BpD,KAAK,EAAE,IAAI;YACXqD,cAAc,EAAE,OAAO;YACvBC,SAAS,EAAE,IAAI;YACfC,YAAY,EAAE,IAAI;YAClBC,qBAAqB,EAAE,IAAI;YAC3BC,SAAS,EAAE,MAAM;YACjBxD,UAAU,EAAE,IAAI;YAChByD,aAAa,EAAE,IAAI;YACnBV,YAAY,EAAEA,YAAY;YAC1BW,OAAO,EAAE;UACX,CAAC;UAAA;UAAA;UAAA,OAG6BlG,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACwC,cAAc,CAACX,YAAY,CAAC;QAAA;UAAtEpD,aAAa;UAAA;UAAA,OAGNpC,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACyC,YAAY,CAAChE,aAAa,CAAC;QAAA;UAAA;QAAA;UAAA;UAAA;UAE5DQ,OAAO,CAAChD,KAAK,CAAC,mBAAmB,eAAI;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAGxC;EAAA,gBA7BKwE,WAAW;IAAA;EAAA;AAAA,GA6BhB;AAED,IAAMvC,QAAQ;EAAA,uEAAG,kBAAO7B,MAAM,EAAEU,IAAI,EAAE2B,SAAS,EAAEC,IAAI,EAAEC,KAAK,EAAE8D,IAAI,EAAEd,YAAY,EAAEM,SAAS,EAAErD,UAAU;IAAA;IAAA;MAAA;QAAA;UAC/F8D,SAAS,GAAG;YAChB5F,IAAI,EAAEA,IAAI;YACV+E,MAAM,EAAE,GAAG;YACXpD,SAAS,EAAEA,SAAS;YACpBC,IAAI,EAAEA,IAAI;YACVC,KAAK,EAAEA,KAAK;YACZyD,SAAS,EAAE,MAAM;YACjBK,IAAI,EAAEA,IAAI;YACVd,YAAY,EAAEA,YAAY;YAC1BI,WAAW,EAAE,qBAAqB;YAClCY,YAAY,EAAE,IAAI;YAClBX,cAAc,EAAE,OAAO;YACvBC,SAAS,EAAEA,SAAS;YACpBC,YAAY,EAAE,IAAI;YAClBtD,UAAU,EAAEA,UAAU;YACtByD,aAAa,EAAE;UACjB,CAAC,EAED;UAAA;UAAA;UAAA,OAG8BjG,MAAM,CAACG,IAAI,CAACwD,OAAO,CAAC6C,WAAW,CAACF,SAAS,CAAC;QAAA;UAAhElE,aAAa;UAAA;UAAA,OAGNpC,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACyC,YAAY,CAAChE,aAAa,CAAC;QAAA;UAAA;QAAA;UAAA;UAAA;UAE5DQ,OAAO,CAAChD,KAAK,CAAC,gBAAgB,eAAI;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAGrC;EAAA,gBA9BKiC,QAAQ;IAAA;EAAA;AAAA,GA8Bb;AAEM,IAAM0B,aAAa;EAAA,uEAAG,kBAAOvD,MAAM,EAAEmC,MAAM,EAAEE,SAAS,EAAEC,IAAI,EAAEmE,OAAO;IAAA;IAAA;MAAA;QAAA;UACpEnH,IAAI,GAAG;YACX6C,MAAM,EAAEA,MAAM;YACdzB,IAAI,EAAE,IAAI;YACV+E,MAAM,EAAE,IAAI;YACZpD,SAAS,EAAEA,SAAS,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK;YAC/CC,IAAI,EAAEmE,OAAO,GAAGnE,IAAI,GAAC,CAAC,GAAGA,IAAI;YAC7BC,KAAK,EAAE,IAAI;YACXmD,SAAS,EAAE,QAAQ;YACnBC,WAAW,EAAE,uBAAuB;YACpCO,OAAO,EAAE;UACX,CAAC;UAAA;UAAA;UAAA,OAE6BlG,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACJ,aAAa,CAACjE,IAAI,CAAC;QAAA;UAA7D8C,aAAa;UAAA;UAAA,OACNpC,MAAM,CAACG,IAAI,CAACwD,OAAO,CAACyC,YAAY,CAAChE,aAAa,CAAC;QAAA;UAAA;QAAA;UAAA;UAAA;UAE5DQ,OAAO,CAAChD,KAAK,CAAC,qBAAqB,gBAAI;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAG1C;EAAA,gBAnBY2D,aAAa;IAAA;EAAA;AAAA,GAmBzB;AAAA;AAED,IAAMmD,oBAAoB;EAAA,wEAAG,mBAAO5G,WAAW;IAAA;IAAA;MAAA;QAAA;UAAA;UAAA,OACfjB,SAAS,CAACiB,WAAW,CAACQ,QAAQ,EAAER,WAAW,CAACf,QAAQ,EAAEe,WAAW,CAACd,MAAM,CAAC;QAAA;UAAjG2H,eAAe;UAAA,KAEjBA,eAAe;YAAA;YAAA;UAAA;UACXC,SAAS,GAAG;YAChBzH,OAAO,EAAE;cACP,cAAc,EAAE,iCAAiC;cACjD,cAAc,YAAKW,WAAW,CAACd,MAAM,CAAE;cACvC,SAAS,EAAE,CAAC;cACZ,KAAK,YAAK2H,eAAe,CAACjH,GAAG,CAAE;cAC/B,kBAAkB,YAAKiH,eAAe,CAAChH,cAAc;YACvD;UACF,CAAC;UAAA;UAAA,OACgCV,iBAAK,CAAC4H,GAAG,CAACjI,OAAO,GAAG,aAAa,EAAEgI,SAAS,CAAC;QAAA;UAAxEE,kBAAkB;UAElBC,WAAW,GAAID,kBAAkB,CAACxH,IAAI,CAAC0H,UAAU,CAACjG,IAAI,CAAC,UAAAkG,IAAI;YAAA,OAAIA,IAAI,CAACC,IAAI,KAAK,aAAa;UAAA,EAAC;UAAA;UAAA,OAEzEC,YAAY,CAACJ,WAAW,CAACK,EAAE,EAAET,eAAe,CAACjH,GAAG,EAAEiH,eAAe,CAAChH,cAAc,EAAEG,WAAW,CAACd,MAAM,CAAC;QAAA;UAAvHqI,SAAS;UAAA,mCAERA,SAAS;QAAA;UAAA,mCAEX,IAAI;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACZ;EAAA,gBAtBKX,oBAAoB;IAAA;EAAA;AAAA,GAsBzB;AAED,IAAMS,YAAY;EAAA,wEAAG,mBAAOJ,WAAW,EAAErH,GAAG,EAAEC,cAAc,EAAEX,MAAM;IAAA;IAAA;MAAA;QAAA;UAC5D4H,SAAS,GAAG;YAChBzH,OAAO,EAAE;cACP,cAAc,EAAE,iCAAiC;cACjD,cAAc,YAAKH,MAAM,CAAE;cAC3B,SAAS,EAAE,CAAC;cACZ,KAAK,YAAKU,GAAG,CAAE;cACf,kBAAkB,YAAKC,cAAc;YACvC;UACF,CAAC;UAAA;UAAA,OAEYV,iBAAK,CAAC4H,GAAG,CAACjI,OAAO,GAAG,cAAc,GAACmI,WAAW,EAAEH,SAAS,CAAC;QAAA;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACxE;EAAA,gBAZKO,YAAY;IAAA;EAAA;AAAA,GAYjB;AAEDG,MAAM,CAACC,OAAO,GAAG;EACf1I,SAAS,EAATA,SAAS;EACT6F,aAAa,EAAbA,aAAa;EACbgC,oBAAoB,EAApBA,oBAAoB;EACpB7E,QAAQ,EAARA,QAAQ;EACRhC,KAAK,EAALA,KAAK;EACLiD,KAAK,EAALA,KAAK;EACLqB,KAAK,EAALA;AACF,CAAC"}},"mtime":1674039035324},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/lightstreamer2.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nvar _lightstreamerClientNode = require(\"lightstreamer-client-node\");\nvar _rest = require(\"./rest\");\nvar _mongoDB = require(\"./mongoDB\");\nvar _restV = require(\"./restV3\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar reconnectIntervalId = null;\nvar isConnected = false;\nfunction lightstreamer2(_x) {\n  return _lightstreamer.apply(this, arguments);\n}\nfunction _lightstreamer() {\n  _lightstreamer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountData) {\n    var security, lsClient, subscription;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!isConnected) {\n            _context2.next = 2;\n            break;\n          }\n          return _context2.abrupt(\"return\");\n        case 2:\n          _context2.next = 4;\n          return (0, _rest.igSession)(accountData.username, accountData.password, accountData.apiKey);\n        case 4:\n          security = _context2.sent;\n          _context2.next = 7;\n          return (0, _mongoDB.connectToDb)(security.accountId);\n        case 7:\n          // Instantiate Lightstreamer client instance\n          lsClient = new _lightstreamerClientNode.LightstreamerClient(security.lightstreamerEndpoint); // Set up login credentials\n          lsClient.connectionDetails.setUser(security.accountId);\n          lsClient.connectionDetails.setPassword(\"CST-\".concat(security.cst, \"|XST-\").concat(security.xSecurityToken));\n          lsClient.addListener({\n            onListenStart: function onListenStart() {\n              console.log('IG ListenStart');\n            },\n            onStatusChange: function onStatusChange(status) {\n              console.log('IG connection status:', status);\n              if (status === 'CONNECTED:STREAM-SENSING') {\n                isConnected = true;\n                stopReconnectInterval();\n              } else if (status === 'DISCONNECTED') {\n                isConnected = false;\n                startReconnectInterval(lsClient);\n              }\n            },\n            onServerError: function onServerError(code, message) {\n              console.log(\"Server error: \".concat(code, \" message: \").concat(message));\n            },\n            onSubscriptionError: function onSubscriptionError(code, message) {\n              console.log(\"Subscription error: \".concat(code, \" message: \").concat(message));\n            }\n          });\n\n          // Connect to Lightstreamer\n          lsClient.connect();\n          subscription = new _lightstreamerClientNode.Subscription('DISTINCT', [\"TRADE:\".concat(security.accountId)], ['OPU']);\n          subscription.addListener({\n            onSubscription: function onSubscription() {\n              console.log('subscribed');\n            },\n            onUnsubscription: function onUnsubscription() {\n              console.log('unsubscribed');\n            },\n            onSubscriptionError: function onSubscriptionError(code, message) {\n              console.log(\"subscription failure: \".concat(code, \" message: \").concat(message));\n            },\n            onItemUpdate: function onItemUpdate(updateInfo) {\n              // Lightstreamer published some data\n              updateInfo.forEachField( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(fieldName, fieldPos, value) {\n                  var confirm, activities, refOrder, _refOrder;\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        confirm = JSON.parse(value);\n                        if (!(confirm && confirm.channel === 'OSAutoStopFill' && confirm.status === 'OPEN')) {\n                          _context.next = 43;\n                          break;\n                        }\n                        _context.next = 4;\n                        return (0, _mongoDB.getIgActivities)(accountData, confirm.epic);\n                      case 4:\n                        activities = _context.sent;\n                        _context.t0 = activities[0].step;\n                        _context.next = _context.t0 === \"A0\" ? 8 : _context.t0 === \"A1\" ? 13 : _context.t0 === \"A2\" ? 25 : _context.t0 === \"A3\" ? 37 : 42;\n                        break;\n                      case 8:\n                        // casistica A0\n                        console.group(\"A0 - \" + confirm.epic);\n                        // eseguo la funzione step1\n                        _context.next = 11;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 11:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 13:\n                        // casistica A0\n                        console.group(\"A1 - \" + confirm.epic);\n                        // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n                        // che si deve svolgere\n                        refOrder = activities[0].orders.find(function (order) {\n                          return order.dealId === confirm.dealId;\n                        }); // se A1\n                        if (!(refOrder.nextStep === \"A1\")) {\n                          _context.next = 19;\n                          break;\n                        }\n                        console.log(\"next step\", refOrder.nextStep);\n                        // eseguo la funzione step1\n                        _context.next = 19;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 19:\n                        if (!(refOrder.nextStep === \"A2\")) {\n                          _context.next = 23;\n                          break;\n                        }\n                        console.log(\"next step\", refOrder.nextStep);\n                        // eseguo la funzione step2\n                        _context.next = 23;\n                        return (0, _restV.step2)(activities[0], accountData, confirm);\n                      case 23:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 25:\n                        console.group(\"A2 - \" + confirm.epic);\n                        // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n                        // che si deve svolgere\n                        _refOrder = activities[0].orders.find(function (order) {\n                          return order.dealId === confirm.dealId;\n                        }); // se A1\n                        if (!(_refOrder.nextStep === \"A1\")) {\n                          _context.next = 31;\n                          break;\n                        }\n                        console.log(\"next step\", _refOrder.nextStep);\n                        // eseguo la funzione step1\n                        _context.next = 31;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 31:\n                        if (!(_refOrder.nextStep === \"A3\")) {\n                          _context.next = 35;\n                          break;\n                        }\n                        console.log(\"next step\", _refOrder.nextStep);\n                        // eseguo la funzione step3\n                        _context.next = 35;\n                        return (0, _restV.step3)(activities[0], accountData, confirm);\n                      case 35:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 37:\n                        console.group(\"A3 - \" + confirm.epic);\n                        // eseguo la funzione step1\n                        _context.next = 40;\n                        return (0, _restV.step1)(activities[0], accountData, confirm);\n                      case 40:\n                        console.groupEnd();\n                        return _context.abrupt(\"break\", 43);\n                      case 42:\n                        return _context.abrupt(\"return\", null);\n                      case 43:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n                return function (_x2, _x3, _x4) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n            }\n          });\n          // Subscribe to Lightstreamer\n          lsClient.subscribe(subscription);\n          startReconnectInterval(lsClient);\n        case 16:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _lightstreamer.apply(this, arguments);\n}\nfunction startReconnectInterval(lsClient) {\n  reconnectIntervalId = setInterval(function () {\n    if (!isConnected) {\n      console.log('Stiamo tentando di riconnetterci...');\n      lsClient.connect();\n    }\n  }, 21600000);\n}\nfunction stopReconnectInterval() {\n  clearInterval(reconnectIntervalId);\n}\nmodule.exports = {\n  lightstreamer2: lightstreamer2\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWNvbm5lY3RJbnRlcnZhbElkIiwiaXNDb25uZWN0ZWQiLCJsaWdodHN0cmVhbWVyMiIsImFjY291bnREYXRhIiwiaWdTZXNzaW9uIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImFwaUtleSIsInNlY3VyaXR5IiwiY29ubmVjdFRvRGIiLCJhY2NvdW50SWQiLCJsc0NsaWVudCIsIkxpZ2h0c3RyZWFtZXJDbGllbnQiLCJsaWdodHN0cmVhbWVyRW5kcG9pbnQiLCJjb25uZWN0aW9uRGV0YWlscyIsInNldFVzZXIiLCJzZXRQYXNzd29yZCIsImNzdCIsInhTZWN1cml0eVRva2VuIiwiYWRkTGlzdGVuZXIiLCJvbkxpc3RlblN0YXJ0IiwiY29uc29sZSIsImxvZyIsIm9uU3RhdHVzQ2hhbmdlIiwic3RhdHVzIiwic3RvcFJlY29ubmVjdEludGVydmFsIiwic3RhcnRSZWNvbm5lY3RJbnRlcnZhbCIsIm9uU2VydmVyRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsIm9uU3Vic2NyaXB0aW9uRXJyb3IiLCJjb25uZWN0Iiwic3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwib25TdWJzY3JpcHRpb24iLCJvblVuc3Vic2NyaXB0aW9uIiwib25JdGVtVXBkYXRlIiwidXBkYXRlSW5mbyIsImZvckVhY2hGaWVsZCIsImZpZWxkTmFtZSIsImZpZWxkUG9zIiwidmFsdWUiLCJjb25maXJtIiwiSlNPTiIsInBhcnNlIiwiY2hhbm5lbCIsImdldElnQWN0aXZpdGllcyIsImVwaWMiLCJhY3Rpdml0aWVzIiwic3RlcCIsImdyb3VwIiwic3RlcDEiLCJncm91cEVuZCIsInJlZk9yZGVyIiwib3JkZXJzIiwiZmluZCIsIm9yZGVyIiwiZGVhbElkIiwibmV4dFN0ZXAiLCJzdGVwMiIsInN0ZXAzIiwic3Vic2NyaWJlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3N2aWx1cHBvL0RvY3VtZW50cy9TdmlsdXBwbyBKYXZhc2NyaXB0L2Z4QmFja1YxL2xpYi8iLCJzb3VyY2VzIjpbImxpZ2h0c3RyZWFtZXIyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TGlnaHRzdHJlYW1lckNsaWVudCwgU3Vic2NyaXB0aW9ufSBmcm9tIFwibGlnaHRzdHJlYW1lci1jbGllbnQtbm9kZVwiO1xuXG5pbXBvcnQge2lnU2Vzc2lvbn0gZnJvbSAnLi9yZXN0J1xuaW1wb3J0IHtjb25uZWN0VG9EYiwgZ2V0SWdBY3Rpdml0aWVzfSBmcm9tIFwiLi9tb25nb0RCXCI7XG5pbXBvcnQge3N0ZXAxLCBzdGVwMiwgc3RlcDN9IGZyb20gXCIuL3Jlc3RWM1wiO1xuXG5sZXQgcmVjb25uZWN0SW50ZXJ2YWxJZCA9IG51bGw7XG5sZXQgaXNDb25uZWN0ZWQgPSBmYWxzZVxuXG5hc3luYyBmdW5jdGlvbiBsaWdodHN0cmVhbWVyMihhY2NvdW50RGF0YSkge1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGxldCBzZWN1cml0eSA9IGF3YWl0IGlnU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQsIGFjY291bnREYXRhLmFwaUtleSlcblxuICBhd2FpdCBjb25uZWN0VG9EYihzZWN1cml0eS5hY2NvdW50SWQpXG5cbiAgLy8gSW5zdGFudGlhdGUgTGlnaHRzdHJlYW1lciBjbGllbnQgaW5zdGFuY2VcbiAgY29uc3QgbHNDbGllbnQgPSBuZXcgTGlnaHRzdHJlYW1lckNsaWVudChzZWN1cml0eS5saWdodHN0cmVhbWVyRW5kcG9pbnQpXG5cbiAgLy8gU2V0IHVwIGxvZ2luIGNyZWRlbnRpYWxzXG4gIGxzQ2xpZW50LmNvbm5lY3Rpb25EZXRhaWxzLnNldFVzZXIoc2VjdXJpdHkuYWNjb3VudElkKVxuICBsc0NsaWVudC5jb25uZWN0aW9uRGV0YWlscy5zZXRQYXNzd29yZChgQ1NULSR7c2VjdXJpdHkuY3N0fXxYU1QtJHtzZWN1cml0eS54U2VjdXJpdHlUb2tlbn1gKVxuXG4gIGxzQ2xpZW50LmFkZExpc3RlbmVyKHtcbiAgICBvbkxpc3RlblN0YXJ0OiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnSUcgTGlzdGVuU3RhcnQnKVxuICAgIH0sXG4gICAgb25TdGF0dXNDaGFuZ2U6IChzdGF0dXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdJRyBjb25uZWN0aW9uIHN0YXR1czonLCBzdGF0dXMpXG4gICAgICBpZiAoc3RhdHVzID09PSAnQ09OTkVDVEVEOlNUUkVBTS1TRU5TSU5HJykge1xuICAgICAgICBpc0Nvbm5lY3RlZCA9IHRydWVcbiAgICAgICAgc3RvcFJlY29ubmVjdEludGVydmFsKCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ0RJU0NPTk5FQ1RFRCcpIHtcbiAgICAgICAgaXNDb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgICBzdGFydFJlY29ubmVjdEludGVydmFsKGxzQ2xpZW50KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9uU2VydmVyRXJyb3I6IChjb2RlLCBtZXNzYWdlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgU2VydmVyIGVycm9yOiAke2NvZGV9IG1lc3NhZ2U6ICR7bWVzc2FnZX1gKVxuICAgIH0sXG4gICAgb25TdWJzY3JpcHRpb25FcnJvcjogKGNvZGUsIG1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gZXJyb3I6ICR7Y29kZX0gbWVzc2FnZTogJHttZXNzYWdlfWApXG4gICAgfVxuICB9KVxuXG4gIC8vIENvbm5lY3QgdG8gTGlnaHRzdHJlYW1lclxuICBsc0NsaWVudC5jb25uZWN0KClcblxuICBjb25zdCBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCdESVNUSU5DVCcsIFtgVFJBREU6JHtzZWN1cml0eS5hY2NvdW50SWR9YF0sIFsnT1BVJ10pXG5cbiAgc3Vic2NyaXB0aW9uLmFkZExpc3RlbmVyKHtcbiAgICBvblN1YnNjcmlwdGlvbjogKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3N1YnNjcmliZWQnKVxuICAgIH0sXG4gICAgb25VbnN1YnNjcmlwdGlvbjogKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3Vuc3Vic2NyaWJlZCcpXG4gICAgfSxcbiAgICBvblN1YnNjcmlwdGlvbkVycm9yOiAoY29kZSwgbWVzc2FnZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYHN1YnNjcmlwdGlvbiBmYWlsdXJlOiAke2NvZGV9IG1lc3NhZ2U6ICR7bWVzc2FnZX1gKVxuICAgIH0sXG4gICAgb25JdGVtVXBkYXRlOiAodXBkYXRlSW5mbykgPT4ge1xuICAgICAgLy8gTGlnaHRzdHJlYW1lciBwdWJsaXNoZWQgc29tZSBkYXRhXG4gICAgICB1cGRhdGVJbmZvLmZvckVhY2hGaWVsZChhc3luYyAoZmllbGROYW1lLCBmaWVsZFBvcywgdmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgY29uZmlybSA9IEpTT04ucGFyc2UodmFsdWUpXG5cbiAgICAgICAgaWYgKGNvbmZpcm0gJiYgY29uZmlybS5jaGFubmVsID09PSAnT1NBdXRvU3RvcEZpbGwnICYmIGNvbmZpcm0uc3RhdHVzID09PSAnT1BFTicpe1xuICAgICAgICAgIC8vIHF1YW5kbyBzaSB2ZXJpZmljYSB1biBldmVudG8gc3UgaWcsIGFueml0dXR0byBjZXJjbyBsZSBpbmZvcm1hemlvbmkgcmVsYXRpdmUgYSBxdWVsbCdlcGljIHNhbHZhdGUgc3VsIGRiXG4gICAgICAgICAgY29uc3QgYWN0aXZpdGllcyA9IGF3YWl0IGdldElnQWN0aXZpdGllcyhhY2NvdW50RGF0YSwgY29uZmlybS5lcGljKVxuXG4gICAgICAgICAgLy9xdWluZGksIHZlcmlmaWNvIGluIHF1YWxlIGNhc2lzdGljYSBjaSB0cm92aWFtb1xuICAgICAgICAgIHN3aXRjaCAoYWN0aXZpdGllc1swXS5zdGVwKSB7XG4gICAgICAgICAgICAvLyBkYSBBMCBwYXNzbyBhZCBBMVxuICAgICAgICAgICAgY2FzZSBcIkEwXCI6IHtcbiAgICAgICAgICAgICAgLy8gY2FzaXN0aWNhIEEwXG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXAoXCJBMCAtIFwiICsgY29uZmlybS5lcGljKVxuICAgICAgICAgICAgICAvLyBlc2VndW8gbGEgZnVuemlvbmUgc3RlcDFcbiAgICAgICAgICAgICAgYXdhaXQgc3RlcDEoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkYSBBMSBwYXNzbyBhZCBBMSBvIEEyXG4gICAgICAgICAgICBjYXNlIFwiQTFcIjoge1xuICAgICAgICAgICAgICAvLyBjYXNpc3RpY2EgQTBcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cChcIkExIC0gXCIgKyBjb25maXJtLmVwaWMpXG4gICAgICAgICAgICAgIC8vIGNvbnRyb2xsbyBzdWwgZGIgcXVhbGUgb3JkaW5lIMOoIGFwcGVuYSBzdGF0byBlc2VndWl0bywgYWwgc3VvIGludGVybm8gaG8gc2FsdmF0byBpbCBwYXNzYWdnaW8gc3VjY2Vzc2l2b1xuICAgICAgICAgICAgICAvLyBjaGUgc2kgZGV2ZSBzdm9sZ2VyZVxuICAgICAgICAgICAgICBjb25zdCByZWZPcmRlciA9IGFjdGl2aXRpZXNbMF0ub3JkZXJzLmZpbmQob3JkZXIgPT4gb3JkZXIuZGVhbElkID09PSBjb25maXJtLmRlYWxJZClcblxuICAgICAgICAgICAgICAvLyBzZSBBMVxuICAgICAgICAgICAgICBpZiAocmVmT3JkZXIubmV4dFN0ZXAgPT09IFwiQTFcIil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJuZXh0IHN0ZXBcIiwgcmVmT3JkZXIubmV4dFN0ZXApXG4gICAgICAgICAgICAgICAgLy8gZXNlZ3VvIGxhIGZ1bnppb25lIHN0ZXAxXG4gICAgICAgICAgICAgICAgYXdhaXQgc3RlcDEoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBzZSBBMlxuICAgICAgICAgICAgICBpZiAocmVmT3JkZXIubmV4dFN0ZXAgPT09IFwiQTJcIil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJuZXh0IHN0ZXBcIiwgcmVmT3JkZXIubmV4dFN0ZXApXG4gICAgICAgICAgICAgICAgLy8gZXNlZ3VvIGxhIGZ1bnppb25lIHN0ZXAyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3RlcDIoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRhIEExIHBhc3NvIGFkIEExIG8gQTNcbiAgICAgICAgICAgIGNhc2UgXCJBMlwiOiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXAoXCJBMiAtIFwiK2NvbmZpcm0uZXBpYylcbiAgICAgICAgICAgICAgLy8gY29udHJvbGxvIHN1bCBkYiBxdWFsZSBvcmRpbmUgw6ggYXBwZW5hIHN0YXRvIGVzZWd1aXRvLCBhbCBzdW8gaW50ZXJubyBobyBzYWx2YXRvIGlsIHBhc3NhZ2dpbyBzdWNjZXNzaXZvXG4gICAgICAgICAgICAgIC8vIGNoZSBzaSBkZXZlIHN2b2xnZXJlXG4gICAgICAgICAgICAgIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllc1swXS5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgPT09IGNvbmZpcm0uZGVhbElkKVxuXG4gICAgICAgICAgICAgIC8vIHNlIEExXG4gICAgICAgICAgICAgIGlmIChyZWZPcmRlci5uZXh0U3RlcCA9PT0gXCJBMVwiKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5leHQgc3RlcFwiLCByZWZPcmRlci5uZXh0U3RlcClcbiAgICAgICAgICAgICAgICAvLyBlc2VndW8gbGEgZnVuemlvbmUgc3RlcDFcbiAgICAgICAgICAgICAgICBhd2FpdCBzdGVwMShhY3Rpdml0aWVzWzBdLCBhY2NvdW50RGF0YSwgY29uZmlybSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBzZSBBM1xuICAgICAgICAgICAgICBpZiAocmVmT3JkZXIubmV4dFN0ZXAgPT09IFwiQTNcIil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJuZXh0IHN0ZXBcIiwgcmVmT3JkZXIubmV4dFN0ZXApXG4gICAgICAgICAgICAgICAgLy8gZXNlZ3VvIGxhIGZ1bnppb25lIHN0ZXAzXG4gICAgICAgICAgICAgICAgYXdhaXQgc3RlcDMoYWN0aXZpdGllc1swXSwgYWNjb3VudERhdGEsIGNvbmZpcm0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRhIEExIHBhc3NvIGFkIEExXG4gICAgICAgICAgICBjYXNlIFwiQTNcIjoge1xuICAgICAgICAgICAgICBjb25zb2xlLmdyb3VwKFwiQTMgLSBcIitjb25maXJtLmVwaWMpXG4gICAgICAgICAgICAgIC8vIGVzZWd1byBsYSBmdW56aW9uZSBzdGVwMVxuICAgICAgICAgICAgICBhd2FpdCBzdGVwMShhY3Rpdml0aWVzWzBdLCBhY2NvdW50RGF0YSwgY29uZmlybSlcbiAgICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgLy8gU3Vic2NyaWJlIHRvIExpZ2h0c3RyZWFtZXJcbiAgbHNDbGllbnQuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbilcbiAgc3RhcnRSZWNvbm5lY3RJbnRlcnZhbChsc0NsaWVudCk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0UmVjb25uZWN0SW50ZXJ2YWwobHNDbGllbnQpIHtcbiAgcmVjb25uZWN0SW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAoIWlzQ29ubmVjdGVkKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RpYW1vIHRlbnRhbmRvIGRpIHJpY29ubmV0dGVyY2kuLi4nKTtcbiAgICAgIGxzQ2xpZW50LmNvbm5lY3QoKTtcbiAgICB9XG4gIH0sIDIxNjAwMDAwKTtcbn1cblxuZnVuY3Rpb24gc3RvcFJlY29ubmVjdEludGVydmFsKCkge1xuICBjbGVhckludGVydmFsKHJlY29ubmVjdEludGVydmFsSWQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbGlnaHRzdHJlYW1lcjJcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUE2QztBQUFBLCtDQUg3QztBQUFBO0FBQUE7QUFLQSxJQUFJQSxtQkFBbUIsR0FBRyxJQUFJO0FBQzlCLElBQUlDLFdBQVcsR0FBRyxLQUFLO0FBQUEsU0FFUkMsY0FBYztFQUFBO0FBQUE7QUFBQTtFQUFBLDRFQUE3QixrQkFBOEJDLFdBQVc7SUFBQTtJQUFBO01BQUE7UUFBQTtVQUFBLEtBQ25DRixXQUFXO1lBQUE7WUFBQTtVQUFBO1VBQUE7UUFBQTtVQUFBO1VBQUEsT0FJTSxJQUFBRyxlQUFTLEVBQUNELFdBQVcsQ0FBQ0UsUUFBUSxFQUFFRixXQUFXLENBQUNHLFFBQVEsRUFBRUgsV0FBVyxDQUFDSSxNQUFNLENBQUM7UUFBQTtVQUExRkMsUUFBUTtVQUFBO1VBQUEsT0FFTixJQUFBQyxvQkFBVyxFQUFDRCxRQUFRLENBQUNFLFNBQVMsQ0FBQztRQUFBO1VBRXJDO1VBQ01DLFFBQVEsR0FBRyxJQUFJQyw0Q0FBbUIsQ0FBQ0osUUFBUSxDQUFDSyxxQkFBcUIsQ0FBQyxFQUV4RTtVQUNBRixR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","map":{"version":3,"names":["reconnectIntervalId","isConnected","lightstreamer2","accountData","igSession","username","password","apiKey","security","connectToDb","accountId","lsClient","LightstreamerClient","lightstreamerEndpoint","connectionDetails","setUser","setPassword","cst","xSecurityToken","addListener","onListenStart","console","log","onStatusChange","status","stopReconnectInterval","startReconnectInterval","onServerError","code","message","onSubscriptionError","connect","subscription","Subscription","onSubscription","onUnsubscription","onItemUpdate","updateInfo","forEachField","fieldName","fieldPos","value","confirm","JSON","parse","channel","getIgActivities","epic","activities","step","group","step1","groupEnd","refOrder","orders","find","order","dealId","nextStep","step2","step3","subscribe","setInterval","clearInterval","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["lightstreamer2.js"],"sourcesContent":["import {LightstreamerClient, Subscription} from \"lightstreamer-client-node\";\n\nimport {igSession} from './rest'\nimport {connectToDb, getIgActivities} from \"./mongoDB\";\nimport {step1, step2, step3} from \"./restV3\";\n\nlet reconnectIntervalId = null;\nlet isConnected = false\n\nasync function lightstreamer2(accountData) {\n  if (isConnected) {\n    return\n  }\n\n  let security = await igSession(accountData.username, accountData.password, accountData.apiKey)\n\n  await connectToDb(security.accountId)\n\n  // Instantiate Lightstreamer client instance\n  const lsClient = new LightstreamerClient(security.lightstreamerEndpoint)\n\n  // Set up login credentials\n  lsClient.connectionDetails.setUser(security.accountId)\n  lsClient.connectionDetails.setPassword(`CST-${security.cst}|XST-${security.xSecurityToken}`)\n\n  lsClient.addListener({\n    onListenStart: () => {\n      console.log('IG ListenStart')\n    },\n    onStatusChange: (status) => {\n      console.log('IG connection status:', status)\n      if (status === 'CONNECTED:STREAM-SENSING') {\n        isConnected = true\n        stopReconnectInterval();\n      } else if (status === 'DISCONNECTED') {\n        isConnected = false\n        startReconnectInterval(lsClient);\n      }\n    },\n    onServerError: (code, message) => {\n      console.log(`Server error: ${code} message: ${message}`)\n    },\n    onSubscriptionError: (code, message) => {\n      console.log(`Subscription error: ${code} message: ${message}`)\n    }\n  })\n\n  // Connect to Lightstreamer\n  lsClient.connect()\n\n  const subscription = new Subscription('DISTINCT', [`TRADE:${security.accountId}`], ['OPU'])\n\n  subscription.addListener({\n    onSubscription: () => {\n      console.log('subscribed')\n    },\n    onUnsubscription: () => {\n      console.log('unsubscribed')\n    },\n    onSubscriptionError: (code, message) => {\n      console.log(`subscription failure: ${code} message: ${message}`)\n    },\n    onItemUpdate: (updateInfo) => {\n      // Lightstreamer published some data\n      updateInfo.forEachField(async (fieldName, fieldPos, value) => {\n        const confirm = JSON.parse(value)\n\n        if (confirm && confirm.channel === 'OSAutoStopFill' && confirm.status === 'OPEN'){\n          // quando si verifica un evento su ig, anzitutto cerco le informazioni relative a quell'epic salvate sul db\n          const activities = await getIgActivities(accountData, confirm.epic)\n\n          //quindi, verifico in quale casistica ci troviamo\n          switch (activities[0].step) {\n            // da A0 passo ad A1\n            case \"A0\": {\n              // casistica A0\n              console.group(\"A0 - \" + confirm.epic)\n              // eseguo la funzione step1\n              await step1(activities[0], accountData, confirm)\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1 o A2\n            case \"A1\": {\n              // casistica A0\n              console.group(\"A1 - \" + confirm.epic)\n              // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n              // che si deve svolgere\n              const refOrder = activities[0].orders.find(order => order.dealId === confirm.dealId)\n\n              // se A1\n              if (refOrder.nextStep === \"A1\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step1\n                await step1(activities[0], accountData, confirm)\n              }\n\n              // se A2\n              if (refOrder.nextStep === \"A2\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step2\n                await step2(activities[0], accountData, confirm)\n              }\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1 o A3\n            case \"A2\": {\n              console.group(\"A2 - \"+confirm.epic)\n              // controllo sul db quale ordine è appena stato eseguito, al suo interno ho salvato il passaggio successivo\n              // che si deve svolgere\n              const refOrder = activities[0].orders.find(order => order.dealId === confirm.dealId)\n\n              // se A1\n              if (refOrder.nextStep === \"A1\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step1\n                await step1(activities[0], accountData, confirm)\n              }\n              // se A3\n              if (refOrder.nextStep === \"A3\"){\n                console.log(\"next step\", refOrder.nextStep)\n                // eseguo la funzione step3\n                await step3(activities[0], accountData, confirm)\n              }\n              console.groupEnd()\n              break\n            }\n\n            // da A1 passo ad A1\n            case \"A3\": {\n              console.group(\"A3 - \"+confirm.epic)\n              // eseguo la funzione step1\n              await step1(activities[0], accountData, confirm)\n              console.groupEnd()\n              break\n            }\n\n            default: return null\n          }\n        }\n      })\n    }\n  })\n  // Subscribe to Lightstreamer\n  lsClient.subscribe(subscription)\n  startReconnectInterval(lsClient);\n}\n\nfunction startReconnectInterval(lsClient) {\n  reconnectIntervalId = setInterval(() => {\n    if (!isConnected) {\n      console.log('Stiamo tentando di riconnetterci...');\n      lsClient.connect();\n    }\n  }, 21600000);\n}\n\nfunction stopReconnectInterval() {\n  clearInterval(reconnectIntervalId);\n}\n\nmodule.exports = {\n  lightstreamer2\n}\n"],"mappings":"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"}},"mtime":1674233403314},"{\"assumptions\":{},\"sourceRoot\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"filename\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/restV3.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.closePosition = void 0;\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _igTradingApi = require(\"ig-trading-api\");\nvar _mongoDB = require(\"./mongoDB\");\nvar _DealingAPI = require(\"ig-trading-api/dist/dealing/DealingAPI\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar baseURL = \"https://demo-api.ig.com/gateway/deal\";\nvar igSession = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(identifier, password, apiKey) {\n    var response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _axios[\"default\"].post(baseURL + '/session', {\n            identifier: identifier,\n            password: password\n          }, {\n            headers: {\n              'Content-Type': 'application/json; charset=UTF-8',\n              'X-IG-API-KEY': \"\".concat(apiKey),\n              'Version': 2\n            }\n          });\n        case 2:\n          response = _context.sent;\n          if (!response) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            accountId: response.data.currentAccountId,\n            clientId: response.data.clientId,\n            lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n            cst: response.headers.cst,\n            xSecurityToken: response.headers['x-security-token']\n          });\n        case 5:\n          return _context.abrupt(\"return\", {\n            error: \"session error\"\n          });\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function igSession(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nvar step0 = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accountData, crossList) {\n    var client, epicArray, _iterator, _step, cross, marketDetails, _iterator2, _step2, _loop, _ret;\n    return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          // apro una nuova sessione\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context3.next = 3;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 3:\n          epicArray = []; // inizializzo un array contenente tutti i riferimenti a i cross di cui recuperare le info di mercato da ig\n          _iterator = _createForOfIteratorHelper(crossList);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              cross = _step.value;\n              // creo un array contenente solo gli epic, così da fare una chiamata unica\n              epicArray.push(cross.epic);\n            }\n\n            //recupero il dettaglio di tutti i cross\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          _context3.next = 8;\n          return client.rest.market.getMarketDetails(epicArray);\n        case 8:\n          marketDetails = _context3.sent;\n          //Per ogni cross apro la poosizione A0\n          _iterator2 = _createForOfIteratorHelper(marketDetails.marketDetails);\n          _context3.prev = 10;\n          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n            var market, crossConfig, averagePrice, pip, buyOrderResponse, sellOrderResponse, orders;\n            return _regeneratorRuntime().wrap(function _loop$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  market = _step2.value;\n                  _context2.prev = 1;\n                  crossConfig = crossList.find(function (cross) {\n                    return cross.epic === market.instrument.epic;\n                  }); // calcolo il prezzo medio tra bid e offer\n                  averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(market.snapshot.scalingFactor.toString().length); // calcolo la distanza in pip sulla base della variazione % indicata dall'utente\n                  pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) / market.snapshot.scalingFactor; // Apro i nuovi ordini\n                  _context2.next = 7;\n                  return newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice + pip / 2, \"STOP\", crossConfig.currencies, null, null);\n                case 7:\n                  buyOrderResponse = _context2.sent;\n                  _context2.next = 10;\n                  return newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice - pip / 2, \"STOP\", crossConfig.currencies, null, null);\n                case 10:\n                  sellOrderResponse = _context2.sent;\n                  orders = [{\n                    dealId: buyOrderResponse.dealId,\n                    dealReference: buyOrderResponse.dealReference,\n                    direction: buyOrderResponse.direction,\n                    size: buyOrderResponse.size,\n                    level: buyOrderResponse.level,\n                    limitLevel: buyOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }, {\n                    dealId: sellOrderResponse.dealId,\n                    dealReference: sellOrderResponse.dealReference,\n                    direction: sellOrderResponse.direction,\n                    size: sellOrderResponse.size,\n                    level: sellOrderResponse.level,\n                    limitLevel: sellOrderResponse.limitLevel,\n                    nextStep: \"A1\"\n                  }]; // aggiorno il database con una copia dello stato di ig, configurazioni relative al cross e alla fase da eseguire\n                  _context2.next = 14;\n                  return (0, _mongoDB.newIgActivity)(accountData, 'A0', crossConfig.epic, crossConfig, orders, []);\n                case 14:\n                  _context2.t0 = _context2.sent;\n                  return _context2.abrupt(\"return\", {\n                    v: _context2.t0\n                  });\n                case 18:\n                  _context2.prev = 18;\n                  _context2.t1 = _context2[\"catch\"](1);\n                  console.log(\"step 0 error\", _context2.t1);\n                case 21:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }, _loop, null, [[1, 18]]);\n          });\n          _iterator2.s();\n        case 13:\n          if ((_step2 = _iterator2.n()).done) {\n            _context3.next = 20;\n            break;\n          }\n          return _context3.delegateYield(_loop(), \"t0\", 15);\n        case 15:\n          _ret = _context3.t0;\n          if (!(_typeof(_ret) === \"object\")) {\n            _context3.next = 18;\n            break;\n          }\n          return _context3.abrupt(\"return\", _ret.v);\n        case 18:\n          _context3.next = 13;\n          break;\n        case 20:\n          _context3.next = 25;\n          break;\n        case 22:\n          _context3.prev = 22;\n          _context3.t1 = _context3[\"catch\"](10);\n          _iterator2.e(_context3.t1);\n        case 25:\n          _context3.prev = 25;\n          _iterator2.f();\n          return _context3.finish(25);\n        case 28:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee2, null, [[10, 22, 25, 28]]);\n  }));\n  return function step0(_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar step1 = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(activities, accountData, event) {\n    var refOrder, client, pip, pipTP, levelStop1, levelStop2, stopOrderResponse1, stopOrderResponse2, crossList, totalPL, _iterator3, _step3, position, responseClosePosition, orders, positions;\n    return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context4.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context4.prev = 4;\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor;\n          pipTP = Math.round(event.level * (0.25 / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n          levelStop1 = event.direction === \"BUY\" ? event.level + pipTP : event.level - pipTP;\n          levelStop2 = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context4.next = 12;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null);\n        case 12:\n          stopOrderResponse1 = _context4.sent;\n          console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus);\n          _context4.next = 16;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop2, \"LIMIT\", activities.config.currencies, null, null);\n        case 16:\n          stopOrderResponse2 = _context4.sent;\n          console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus);\n          console.groupEnd();\n\n          // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n          if (!(stopOrderResponse1.dealStatus === \"REJECTED\" || stopOrderResponse2.dealStatus === \"REJECTED\")) {\n            _context4.next = 27;\n            break;\n          }\n          console.log(\"ORDER REJECTED\");\n          _context4.next = 23;\n          return closeActivity(client, accountData, activities.epic);\n        case 23:\n          crossList = {\n            activities: true,\n            epic: activities.epic,\n            instrument: activities.config.instrumentName,\n            currencies: activities.config.currencies,\n            scalingFactor: activities.config.scalingFactor,\n            percentage: activities.config.percentage,\n            contracts: activities.config.contracts\n          };\n          _context4.next = 26;\n          return step0(accountData, [crossList]);\n        case 26:\n          return _context4.abrupt(\"return\", null);\n        case 27:\n          if (!(activities.positions.length > 0)) {\n            _context4.next = 51;\n            break;\n          }\n          totalPL = 0;\n          console.group(\"Chiusura posizioni\");\n          _iterator3 = _createForOfIteratorHelper(activities.positions);\n          _context4.prev = 31;\n          _iterator3.s();\n        case 33:\n          if ((_step3 = _iterator3.n()).done) {\n            _context4.next = 41;\n            break;\n          }\n          position = _step3.value;\n          _context4.next = 37;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 37:\n          responseClosePosition = _context4.sent;\n          totalPL += responseClosePosition.profit;\n        case 39:\n          _context4.next = 33;\n          break;\n        case 41:\n          _context4.next = 46;\n          break;\n        case 43:\n          _context4.prev = 43;\n          _context4.t0 = _context4[\"catch\"](31);\n          _iterator3.e(_context4.t0);\n        case 46:\n          _context4.prev = 46;\n          _iterator3.f();\n          return _context4.finish(46);\n        case 49:\n          console.log(\"total PL\", totalPL);\n          console.groupEnd();\n        case 51:\n          _context4.next = 53;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 53:\n          orders = [{\n            dealId: stopOrderResponse1.dealId,\n            dealReference: stopOrderResponse1.dealReference,\n            direction: stopOrderResponse1.direction,\n            size: stopOrderResponse1.size,\n            level: stopOrderResponse1.level,\n            limitLevel: stopOrderResponse1.limitLevel,\n            nextStep: \"A1\"\n          }, {\n            dealId: stopOrderResponse2.dealId,\n            dealReference: stopOrderResponse2.dealReference,\n            direction: stopOrderResponse2.direction,\n            size: stopOrderResponse2.size,\n            level: stopOrderResponse2.level,\n            limitLevel: stopOrderResponse2.limitLevel,\n            nextStep: \"A2\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context4.next = 57;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A1', activities.epic, activities.config, orders, positions);\n        case 57:\n          _context4.next = 62;\n          break;\n        case 59:\n          _context4.prev = 59;\n          _context4.t1 = _context4[\"catch\"](4);\n          console.error(\"step1 error\", _context4.t1);\n        case 62:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee3, null, [[4, 59], [31, 43, 46, 49]]);\n  }));\n  return function step1(_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar step2 = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(activities, accountData, event) {\n    var refOrder, client, pip, levelStop1, levelStop2, stopOrderResponse1, stopOrderResponse2, crossList, totalPL, _iterator4, _step4, position, responseClosePosition, orders, positions;\n    return _regeneratorRuntime().wrap(function _callee4$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context5.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context5.prev = 4;\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per gli ordini stop\n          levelStop1 = event.direction === \"BUY\" ? event.level + pip : event.level - pip;\n          levelStop2 = event.direction === \"BUY\" ? event.level - pip : event.level + pip; // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context5.next = 11;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null);\n        case 11:\n          stopOrderResponse1 = _context5.sent;\n          console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus);\n          _context5.next = 15;\n          return newOrder(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, levelStop2, \"STOP\", activities.config.currencies, null, null);\n        case 15:\n          stopOrderResponse2 = _context5.sent;\n          console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus);\n          console.groupEnd();\n\n          // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n          if (!(stopOrderResponse1.dealStatus === \"REJECTED\" || stopOrderResponse2.dealStatus === \"REJECTED\")) {\n            _context5.next = 26;\n            break;\n          }\n          console.error(\"ORDER REJECTED\");\n          _context5.next = 22;\n          return closeActivity(client, accountData, activities.epic);\n        case 22:\n          crossList = {\n            activities: true,\n            epic: activities.epic,\n            instrument: activities.config.instrumentName,\n            currencies: activities.config.currencies,\n            scalingFactor: activities.config.scalingFactor,\n            percentage: activities.config.percentage,\n            contracts: activities.config.contracts\n          };\n          _context5.next = 25;\n          return step0(accountData, [crossList]);\n        case 25:\n          return _context5.abrupt(\"return\", null);\n        case 26:\n          if (!(activities.positions.length > 0)) {\n            _context5.next = 50;\n            break;\n          }\n          totalPL = 0;\n          console.group(\"Chiusura posizioni\");\n          _iterator4 = _createForOfIteratorHelper(activities.positions);\n          _context5.prev = 30;\n          _iterator4.s();\n        case 32:\n          if ((_step4 = _iterator4.n()).done) {\n            _context5.next = 40;\n            break;\n          }\n          position = _step4.value;\n          _context5.next = 36;\n          return closePosition(client, position.dealId, position.direction, position.size, false);\n        case 36:\n          responseClosePosition = _context5.sent;\n          totalPL += responseClosePosition.profit;\n        case 38:\n          _context5.next = 32;\n          break;\n        case 40:\n          _context5.next = 45;\n          break;\n        case 42:\n          _context5.prev = 42;\n          _context5.t0 = _context5[\"catch\"](30);\n          _iterator4.e(_context5.t0);\n        case 45:\n          _context5.prev = 45;\n          _iterator4.f();\n          return _context5.finish(45);\n        case 48:\n          console.log(\"total PL\", totalPL);\n          console.groupEnd();\n        case 50:\n          _context5.next = 52;\n          return client.rest.dealing.deleteOrder(refOrder.dealId);\n        case 52:\n          orders = [{\n            dealId: stopOrderResponse1.dealId,\n            dealReference: stopOrderResponse1.dealReference,\n            direction: stopOrderResponse1.direction,\n            size: stopOrderResponse1.size,\n            level: stopOrderResponse1.level,\n            limitLevel: stopOrderResponse1.limitLevel,\n            nextStep: \"A1\"\n          }, {\n            dealId: stopOrderResponse2.dealId,\n            dealReference: stopOrderResponse2.dealReference,\n            direction: stopOrderResponse2.direction,\n            size: stopOrderResponse2.size,\n            level: stopOrderResponse2.level,\n            limitLevel: stopOrderResponse2.limitLevel,\n            nextStep: \"A3\"\n          }];\n          positions = [{\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context5.next = 56;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A2', activities.epic, activities.config, orders, positions);\n        case 56:\n          _context5.next = 61;\n          break;\n        case 58:\n          _context5.prev = 58;\n          _context5.t1 = _context5[\"catch\"](4);\n          console.error(\"step2 error\", _context5.t1);\n        case 61:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee4, null, [[4, 58], [30, 42, 45, 48]]);\n  }));\n  return function step2(_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar step3 = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(activities, accountData, event) {\n    var refOrder, client, pip, levelStop, stopOrderResponse, crossList, orders, positions;\n    return _regeneratorRuntime().wrap(function _callee5$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          // Cerco l'ordine non eseguito\n          refOrder = activities.orders.find(function (order) {\n            return order.dealId !== event.dealId;\n          }); // Creo una sessione ig\n          client = new _igTradingApi.APIClient(_igTradingApi.APIClient.URL_DEMO, accountData.apiKey);\n          _context6.next = 4;\n          return client.rest.login.createSession(accountData.username, accountData.password);\n        case 4:\n          _context6.prev = 4;\n          // Chiudo l'ordine non eseguito\n          //await client.rest.dealing.deleteOrder(refOrder.dealId)\n          // Calcolo la distanza in pip data la configurazione del cross\n          pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) / activities.config.scalingFactor; // Definisco i livelli di prezzo per l'ordine STOP\n          levelStop = event.direction === \"SELL\" ? event.level - pip : event.level + pip; //const levelStop2 = event.direction === \"BUY\" ? activities.positions[0].level+pip : activities.positions[0].level-pip\n          // Apro i nuovi ordini\n          console.group(\"Nuovi Ordini\");\n          _context6.next = 10;\n          return newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null);\n        case 10:\n          stopOrderResponse = _context6.sent;\n          console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus);\n\n          // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n          if (!(stopOrderResponse.dealStatus === \"REJECTED\")) {\n            _context6.next = 20;\n            break;\n          }\n          console.error(\"ORDER REJECTED\");\n          _context6.next = 16;\n          return closeActivity(client, accountData, activities.epic);\n        case 16:\n          crossList = {\n            activities: true,\n            epic: activities.epic,\n            instrument: activities.config.instrumentName,\n            currencies: activities.config.currencies,\n            scalingFactor: activities.config.scalingFactor,\n            percentage: activities.config.percentage,\n            contracts: activities.config.contracts\n          };\n          _context6.next = 19;\n          return step0(accountData, [crossList]);\n        case 19:\n          return _context6.abrupt(\"return\", null);\n        case 20:\n          orders = [refOrder, {\n            dealId: stopOrderResponse.dealId,\n            dealReference: stopOrderResponse.dealReference,\n            direction: stopOrderResponse.direction,\n            size: stopOrderResponse.size,\n            level: stopOrderResponse.level,\n            limitLevel: stopOrderResponse.limitLevel,\n            nextStep: \"A1\"\n          }];\n          positions = [{\n            dealId: activities.positions[0].dealId,\n            dealReference: activities.positions[0].dealReference,\n            direction: activities.positions[0].direction,\n            size: activities.positions[0].size,\n            level: activities.positions[0].level,\n            limitLevel: activities.positions[0].limitLevel,\n            nextStep: null\n          }, {\n            dealId: event.dealId,\n            dealReference: event.dealReference,\n            direction: event.direction,\n            size: event.size,\n            level: event.level,\n            limitLevel: event.limitLevel,\n            nextStep: null\n          }];\n          _context6.next = 24;\n          return (0, _mongoDB.newIgActivity)(accountData, 'A3', activities.epic, activities.config, orders, positions);\n        case 24:\n          _context6.next = 29;\n          break;\n        case 26:\n          _context6.prev = 26;\n          _context6.t0 = _context6[\"catch\"](4);\n          console.error(\"step2 error\", _context6.t0);\n        case 29:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee5, null, [[4, 26]]);\n  }));\n  return function step3(_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n// funzione per creare un nuovo ordine su ig\nvar newOrder = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) {\n    var orderData, dealReference;\n    return _regeneratorRuntime().wrap(function _callee6$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          orderData = {\n            epic: epic,\n            expiry: '-',\n            direction: direction,\n            size: size,\n            level: level,\n            forceOpen: 'true',\n            type: type,\n            currencyCode: currencyCode,\n            timeInForce: 'GOOD_TILL_CANCELLED',\n            goodTillDate: null,\n            guaranteedStop: 'false',\n            stopLevel: stopLevel,\n            stopDistance: null,\n            limitLevel: limitLevel,\n            limitDistance: null\n          };\n          _context7.prev = 1;\n          _context7.next = 4;\n          return client.rest.dealing.createOrder(orderData);\n        case 4:\n          dealReference = _context7.sent;\n          _context7.next = 7;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 7:\n          return _context7.abrupt(\"return\", _context7.sent);\n        case 10:\n          _context7.prev = 10;\n          _context7.t0 = _context7[\"catch\"](1);\n          console.error(\"newOrder error\", _context7.t0);\n          return _context7.abrupt(\"return\", _context7.t0);\n        case 14:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee6, null, [[1, 10]]);\n  }));\n  return function newOrder(_x15, _x16, _x17, _x18, _x19, _x20, _x21, _x22, _x23) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\n// funzione per chiudere una posizione su ig\nvar closePosition = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(client, dealId, direction, size, partial) {\n    var data, dealReference;\n    return _regeneratorRuntime().wrap(function _callee7$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          data = {\n            dealId: dealId,\n            epic: null,\n            expiry: null,\n            direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n            size: partial ? size / 2 : size,\n            level: null,\n            orderType: \"MARKET\",\n            timeInForce: \"EXECUTE_AND_ELIMINATE\",\n            quoteId: null\n          };\n          _context8.prev = 1;\n          _context8.next = 4;\n          return client.rest.dealing.closePosition(data);\n        case 4:\n          dealReference = _context8.sent;\n          _context8.next = 7;\n          return client.rest.dealing.confirmTrade(dealReference);\n        case 7:\n          return _context8.abrupt(\"return\", _context8.sent);\n        case 10:\n          _context8.prev = 10;\n          _context8.t0 = _context8[\"catch\"](1);\n          console.error(\"closePosition error\", _context8.t0);\n          return _context8.abrupt(\"return\", _context8.t0);\n        case 14:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee7, null, [[1, 10]]);\n  }));\n  return function closePosition(_x24, _x25, _x26, _x27, _x28) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\n// funzione per chiudere tutti gli ordini e le posizioni aperte relative ad uno specifico corss su ig\nexports.closePosition = closePosition;\nvar closeActivity = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(client, accountData, epic) {\n    var allOrders, allPositions, ordersToDelete, positionsToDelete, _iterator5, _step5, order, _iterator6, _step6, position;\n    return _regeneratorRuntime().wrap(function _callee8$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return client.rest.dealing.getAllOrders();\n        case 2:\n          allOrders = _context9.sent;\n          _context9.next = 5;\n          return client.rest.dealing.getAllOpenPositions();\n        case 5:\n          allPositions = _context9.sent;\n          ordersToDelete = allOrders.workingOrders.filter(function (row) {\n            return row.workingOrderData.epic === epic;\n          });\n          positionsToDelete = allPositions.positions.filter(function (row) {\n            return row.market.epic === epic;\n          });\n          _iterator5 = _createForOfIteratorHelper(ordersToDelete);\n          _context9.prev = 9;\n          _iterator5.s();\n        case 11:\n          if ((_step5 = _iterator5.n()).done) {\n            _context9.next = 17;\n            break;\n          }\n          order = _step5.value;\n          _context9.next = 15;\n          return client.rest.dealing.deleteOrder(order.workingOrderData.dealId);\n        case 15:\n          _context9.next = 11;\n          break;\n        case 17:\n          _context9.next = 22;\n          break;\n        case 19:\n          _context9.prev = 19;\n          _context9.t0 = _context9[\"catch\"](9);\n          _iterator5.e(_context9.t0);\n        case 22:\n          _context9.prev = 22;\n          _iterator5.f();\n          return _context9.finish(22);\n        case 25:\n          _iterator6 = _createForOfIteratorHelper(positionsToDelete);\n          _context9.prev = 26;\n          _iterator6.s();\n        case 28:\n          if ((_step6 = _iterator6.n()).done) {\n            _context9.next = 34;\n            break;\n          }\n          position = _step6.value;\n          _context9.next = 32;\n          return closePosition(client, position.position.dealId, position.position.direction, position.position.size, false);\n        case 32:\n          _context9.next = 28;\n          break;\n        case 34:\n          _context9.next = 39;\n          break;\n        case 36:\n          _context9.prev = 36;\n          _context9.t1 = _context9[\"catch\"](26);\n          _iterator6.e(_context9.t1);\n        case 39:\n          _context9.prev = 39;\n          _iterator6.f();\n          return _context9.finish(39);\n        case 42:\n          _context9.next = 44;\n          return (0, _mongoDB.deleteIgActivity)(accountData, epic);\n        case 44:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee8, null, [[9, 19, 22, 25], [26, 36, 39, 42]]);\n  }));\n  return function closeActivity(_x29, _x30, _x31) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  igSession: igSession,\n  newOrder: newOrder,\n  step0: step0,\n  step1: step1,\n  step2: step2,\n  step3: step3\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlVVJMIiwiaWdTZXNzaW9uIiwiaWRlbnRpZmllciIsInBhc3N3b3JkIiwiYXBpS2V5IiwiYXhpb3MiLCJwb3N0IiwiaGVhZGVycyIsInJlc3BvbnNlIiwiYWNjb3VudElkIiwiZGF0YSIsImN1cnJlbnRBY2NvdW50SWQiLCJjbGllbnRJZCIsImxpZ2h0c3RyZWFtZXJFbmRwb2ludCIsImNzdCIsInhTZWN1cml0eVRva2VuIiwiZXJyb3IiLCJzdGVwMCIsImFjY291bnREYXRhIiwiY3Jvc3NMaXN0IiwiY2xpZW50IiwiQVBJQ2xpZW50IiwiVVJMX0RFTU8iLCJyZXN0IiwibG9naW4iLCJjcmVhdGVTZXNzaW9uIiwidXNlcm5hbWUiLCJlcGljQXJyYXkiLCJjcm9zcyIsInB1c2giLCJlcGljIiwibWFya2V0IiwiZ2V0TWFya2V0RGV0YWlscyIsIm1hcmtldERldGFpbHMiLCJjcm9zc0NvbmZpZyIsImZpbmQiLCJpbnN0cnVtZW50IiwiYXZlcmFnZVByaWNlIiwic25hcHNob3QiLCJiaWQiLCJvZmZlciIsInRvRml4ZWQiLCJzY2FsaW5nRmFjdG9yIiwidG9TdHJpbmciLCJsZW5ndGgiLCJwaXAiLCJNYXRoIiwicm91bmQiLCJwZXJjZW50YWdlIiwibmV3T3JkZXIiLCJjb250cmFjdHMiLCJjdXJyZW5jaWVzIiwiYnV5T3JkZXJSZXNwb25zZSIsInNlbGxPcmRlclJlc3BvbnNlIiwib3JkZXJzIiwiZGVhbElkIiwiZGVhbFJlZmVyZW5jZSIsImRpcmVjdGlvbiIsInNpemUiLCJsZXZlbCIsImxpbWl0TGV2ZWwiLCJuZXh0U3RlcCIsIm5ld0lnQWN0aXZpdHkiLCJjb25zb2xlIiwibG9nIiwic3RlcDEiLCJhY3Rpdml0aWVzIiwiZXZlbnQiLCJyZWZPcmRlciIsIm9yZGVyIiwiY29uZmlnIiwicGlwVFAiLCJsZXZlbFN0b3AxIiwibGV2ZWxTdG9wMiIsImdyb3VwIiwic3RvcE9yZGVyUmVzcG9uc2UxIiwiZGVhbFN0YXR1cyIsInN0b3BPcmRlclJlc3BvbnNlMiIsImdyb3VwRW5kIiwiY2xvc2VBY3Rpdml0eSIsImluc3RydW1lbnROYW1lIiwicG9zaXRpb25zIiwidG90YWxQTCIsInBvc2l0aW9uIiwiY2xvc2VQb3NpdGlvbiIsInJlc3BvbnNlQ2xvc2VQb3NpdGlvbiIsInByb2ZpdCIsImRlYWxpbmciLCJkZWxldGVPcmRlciIsInN0ZXAyIiwic3RlcDMiLCJsZXZlbFN0b3AiLCJzdG9wT3JkZXJSZXNwb25zZSIsInR5cGUiLCJjdXJyZW5jeUNvZGUiLCJzdG9wTGV2ZWwiLCJvcmRlckRhdGEiLCJleHBpcnkiLCJmb3JjZU9wZW4iLCJ0aW1lSW5Gb3JjZSIsImdvb2RUaWxsRGF0ZSIsImd1YXJhbnRlZWRTdG9wIiwic3RvcERpc3RhbmNlIiwibGltaXREaXN0YW5jZSIsImNyZWF0ZU9yZGVyIiwiY29uZmlybVRyYWRlIiwicGFydGlhbCIsIm9yZGVyVHlwZSIsInF1b3RlSWQiLCJnZXRBbGxPcmRlcnMiLCJhbGxPcmRlcnMiLCJnZXRBbGxPcGVuUG9zaXRpb25zIiwiYWxsUG9zaXRpb25zIiwib3JkZXJzVG9EZWxldGUiLCJ3b3JraW5nT3JkZXJzIiwiZmlsdGVyIiwicm93Iiwid29ya2luZ09yZGVyRGF0YSIsInBvc2l0aW9uc1RvRGVsZXRlIiwiZGVsZXRlSWdBY3Rpdml0eSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9zdmlsdXBwby9Eb2N1bWVudHMvU3ZpbHVwcG8gSmF2YXNjcmlwdC9meEJhY2tWMS9saWIvIiwic291cmNlcyI6WyJyZXN0VjMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHtBUElDbGllbnR9IGZyb20gXCJpZy10cmFkaW5nLWFwaVwiO1xuaW1wb3J0IHtkZWxldGVJZ0FjdGl2aXR5LCBnZXRJZ0FjdGl2aXRpZXMsIG5ld0lnQWN0aXZpdHl9IGZyb20gXCIuL21vbmdvREJcIjtcbmltcG9ydCB7RGlyZWN0aW9uLCBQb3NpdGlvbk9yZGVyVHlwZSwgUG9zaXRpb25UaW1lSW5Gb3JjZX0gZnJvbSBcImlnLXRyYWRpbmctYXBpL2Rpc3QvZGVhbGluZy9EZWFsaW5nQVBJXCI7XG5cbmNvbnN0IGJhc2VVUkwgPSBcImh0dHBzOi8vZGVtby1hcGkuaWcuY29tL2dhdGV3YXkvZGVhbFwiXG5cbmNvbnN0IGlnU2Vzc2lvbiA9IGFzeW5jIChpZGVudGlmaWVyLCBwYXNzd29yZCwgYXBpS2V5KSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3NcbiAgICAucG9zdChiYXNlVVJMKycvc2Vzc2lvbicsIHtcbiAgICAgIGlkZW50aWZpZXIsXG4gICAgICBwYXNzd29yZFxuICAgIH0sIHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JywgJ1gtSUctQVBJLUtFWSc6IGAke2FwaUtleX1gLCAnVmVyc2lvbic6IDJ9fSlcblxuICBpZiAocmVzcG9uc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjb3VudElkOiByZXNwb25zZS5kYXRhLmN1cnJlbnRBY2NvdW50SWQsXG4gICAgICBjbGllbnRJZDogcmVzcG9uc2UuZGF0YS5jbGllbnRJZCxcbiAgICAgIGxpZ2h0c3RyZWFtZXJFbmRwb2ludDogcmVzcG9uc2UuZGF0YS5saWdodHN0cmVhbWVyRW5kcG9pbnQsXG4gICAgICBjc3Q6IHJlc3BvbnNlLmhlYWRlcnMuY3N0LFxuICAgICAgeFNlY3VyaXR5VG9rZW46IHJlc3BvbnNlLmhlYWRlcnNbJ3gtc2VjdXJpdHktdG9rZW4nXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7ZXJyb3I6IFwic2Vzc2lvbiBlcnJvclwifVxufVxuXG4vKipcbiAqIEZhc2UgMFxuICpcbiAqIEFwZXJ0dXJhIGRpIGR1ZSBvcmRpbmkgZGkgc2Vnbm8gb3Bwb3N0byBhbCBwcmV6em8gZGkgbWVyY2F0byArLSB4IHBpcCBkaSBkaXN0YW56YVxuICogKi9cbmNvbnN0IHN0ZXAwID0gYXN5bmMgKGFjY291bnREYXRhLCBjcm9zc0xpc3QpID0+e1xuICAvLyBhcHJvIHVuYSBudW92YSBzZXNzaW9uZVxuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIGNvbnN0IGVwaWNBcnJheSA9IFtdXG4gIC8vIGluaXppYWxpenpvIHVuIGFycmF5IGNvbnRlbmVudGUgdHV0dGkgaSByaWZlcmltZW50aSBhIGkgY3Jvc3MgZGkgY3VpIHJlY3VwZXJhcmUgbGUgaW5mbyBkaSBtZXJjYXRvIGRhIGlnXG4gIGZvciAoY29uc3QgY3Jvc3Mgb2YgY3Jvc3NMaXN0KXtcbiAgICAvLyBjcmVvIHVuIGFycmF5IGNvbnRlbmVudGUgc29sbyBnbGkgZXBpYywgY29zw6wgZGEgZmFyZSB1bmEgY2hpYW1hdGEgdW5pY2FcbiAgICBlcGljQXJyYXkucHVzaChjcm9zcy5lcGljKVxuICB9XG5cbiAgLy9yZWN1cGVybyBpbCBkZXR0YWdsaW8gZGkgdHV0dGkgaSBjcm9zc1xuICBjb25zdCBtYXJrZXREZXRhaWxzID0gYXdhaXQgY2xpZW50LnJlc3QubWFya2V0LmdldE1hcmtldERldGFpbHMoZXBpY0FycmF5KVxuXG4gIC8vUGVyIG9nbmkgY3Jvc3MgYXBybyBsYSBwb29zaXppb25lIEEwXG4gIGZvciAoY29uc3QgbWFya2V0IG9mIG1hcmtldERldGFpbHMubWFya2V0RGV0YWlscyl7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNyb3NzQ29uZmlnID0gY3Jvc3NMaXN0LmZpbmQoY3Jvc3MgPT4gY3Jvc3MuZXBpYyA9PT0gbWFya2V0Lmluc3RydW1lbnQuZXBpYylcblxuICAgICAgLy8gY2FsY29sbyBpbCBwcmV6em8gbWVkaW8gdHJhIGJpZCBlIG9mZmVyXG4gICAgICBjb25zdCBhdmVyYWdlUHJpY2UgPSArKChtYXJrZXQuc25hcHNob3QuYmlkICsgbWFya2V0LnNuYXBzaG90Lm9mZmVyKSAvIDIpLnRvRml4ZWQoXG4gICAgICAgIG1hcmtldC5zbmFwc2hvdC5zY2FsaW5nRmFjdG9yLnRvU3RyaW5nKCkubGVuZ3RoLFxuICAgICAgKVxuXG4gICAgICAvLyBjYWxjb2xvIGxhIGRpc3RhbnphIGluIHBpcCBzdWxsYSBiYXNlIGRlbGxhIHZhcmlhemlvbmUgJSBpbmRpY2F0YSBkYWxsJ3V0ZW50ZVxuICAgICAgY29uc3QgcGlwID0gTWF0aC5yb3VuZChhdmVyYWdlUHJpY2UgKiAoY3Jvc3NDb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgICBtYXJrZXQuc25hcHNob3Quc2NhbGluZ0ZhY3RvclxuXG4gICAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgICBjb25zdCBidXlPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIkJVWVwiLCBjcm9zc0NvbmZpZy5jb250cmFjdHMsIGF2ZXJhZ2VQcmljZSsocGlwLzIpLCBcIlNUT1BcIiwgY3Jvc3NDb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICAgIGNvbnN0IHNlbGxPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBjcm9zc0NvbmZpZy5lcGljLCBcIlNFTExcIiwgY3Jvc3NDb25maWcuY29udHJhY3RzLCBhdmVyYWdlUHJpY2UtKHBpcC8yKSwgXCJTVE9QXCIsIGNyb3NzQ29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG5cbiAgICAgIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgICAgIGRlYWxJZDogYnV5T3JkZXJSZXNwb25zZS5kZWFsSWQsXG4gICAgICAgIGRlYWxSZWZlcmVuY2U6IGJ1eU9yZGVyUmVzcG9uc2UuZGVhbFJlZmVyZW5jZSxcbiAgICAgICAgZGlyZWN0aW9uOiBidXlPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgICAgc2l6ZTogYnV5T3JkZXJSZXNwb25zZS5zaXplLFxuICAgICAgICBsZXZlbDogYnV5T3JkZXJSZXNwb25zZS5sZXZlbCxcbiAgICAgICAgbGltaXRMZXZlbDogYnV5T3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgICBuZXh0U3RlcDogXCJBMVwiXG4gICAgICB9LCB7XG4gICAgICAgIGRlYWxJZDogc2VsbE9yZGVyUmVzcG9uc2UuZGVhbElkLFxuICAgICAgICBkZWFsUmVmZXJlbmNlOiBzZWxsT3JkZXJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgICBkaXJlY3Rpb246IHNlbGxPcmRlclJlc3BvbnNlLmRpcmVjdGlvbixcbiAgICAgICAgc2l6ZTogc2VsbE9yZGVyUmVzcG9uc2Uuc2l6ZSxcbiAgICAgICAgbGV2ZWw6IHNlbGxPcmRlclJlc3BvbnNlLmxldmVsLFxuICAgICAgICBsaW1pdExldmVsOiBzZWxsT3JkZXJSZXNwb25zZS5saW1pdExldmVsLFxuICAgICAgICBuZXh0U3RlcDogXCJBMVwiXG4gICAgICB9XVxuXG4gICAgICAvLyBhZ2dpb3JubyBpbCBkYXRhYmFzZSBjb24gdW5hIGNvcGlhIGRlbGxvIHN0YXRvIGRpIGlnLCBjb25maWd1cmF6aW9uaSByZWxhdGl2ZSBhbCBjcm9zcyBlIGFsbGEgZmFzZSBkYSBlc2VndWlyZVxuICAgICAgcmV0dXJuIGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBMCcsIGNyb3NzQ29uZmlnLmVwaWMsIGNyb3NzQ29uZmlnLCBvcmRlcnMsIFtdKVxuICAgIH1jYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coXCJzdGVwIDAgZXJyb3JcIiwgZSlcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc3RlcDEgPSBhc3luYyAoYWN0aXZpdGllcywgYWNjb3VudERhdGEsIGV2ZW50KSA9PiB7XG4gIC8vIENlcmNvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICBjb25zdCByZWZPcmRlciA9IGFjdGl2aXRpZXMub3JkZXJzLmZpbmQob3JkZXIgPT4gb3JkZXIuZGVhbElkICE9PSBldmVudC5kZWFsSWQpXG4gIC8vIENyZW8gdW5hIHNlc3Npb25lIGlnXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBUElDbGllbnQoQVBJQ2xpZW50LlVSTF9ERU1PLCBhY2NvdW50RGF0YS5hcGlLZXkpO1xuICBhd2FpdCBjbGllbnQucmVzdC5sb2dpbi5jcmVhdGVTZXNzaW9uKGFjY291bnREYXRhLnVzZXJuYW1lLCBhY2NvdW50RGF0YS5wYXNzd29yZCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBDYWxjb2xvIGxhIGRpc3RhbnphIGluIHBpcCBkYXRhIGxhIGNvbmZpZ3VyYXppb25lIGRlbCBjcm9zc1xuICAgIGNvbnN0IHBpcCA9IE1hdGgucm91bmQoZXZlbnQubGV2ZWwgKiAoYWN0aXZpdGllcy5jb25maWcucGVyY2VudGFnZSAvIDEwMCkgKiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yKSAvXG4gICAgICBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yXG5cbiAgICBjb25zdCBwaXBUUCA9IE1hdGgucm91bmQoZXZlbnQubGV2ZWwgKiAoMC4yNSAvIDEwMCkgKiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yKSAvXG4gICAgICBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yXG5cbiAgICAvLyBEZWZpbmlzY28gaSBsaXZlbGxpIGRpIHByZXp6byBwZXIgbCdvcmRpbmUgU1RPUCBlIExJTUlUXG4gICAgY29uc3QgbGV2ZWxTdG9wMSA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsK3BpcFRQIDogZXZlbnQubGV2ZWwtcGlwVFBcbiAgICBjb25zdCBsZXZlbFN0b3AyID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gZXZlbnQubGV2ZWwtcGlwIDogZXZlbnQubGV2ZWwrcGlwXG5cbiAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgY29uc29sZS5ncm91cChcIk51b3ZpIE9yZGluaVwiKVxuICAgIGNvbnN0IHN0b3BPcmRlclJlc3BvbnNlMSA9IGF3YWl0IG5ld09yZGVyKGNsaWVudCwgYWN0aXZpdGllcy5lcGljLCBldmVudC5kaXJlY3Rpb24sIGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0cywgbGV2ZWxTdG9wMSwgXCJTVE9QXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZTEgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlMS5kZWFsU3RhdHVzKVxuXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UyID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFN0b3AyLCBcIkxJTUlUXCIsIGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsIG51bGwsIG51bGwpXG4gICAgY29uc29sZS5sb2coXCJzdG9wT3JkZXJSZXNwb25zZTIgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlMi5kZWFsU3RhdHVzKVxuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuXG4gICAgLy8gc2UgdW5vIGRlaSBkdWUgb3JkaW5pIG5vbiB2aWVuZSBlc2VndWl0bywgY2hpdWRvIHBvc2l6aW9uaSBlZCBvcmRpbmksIHF1aW5pIHJpYXBybyBkYWxsYSBwb3NpemlvbmUgQTBcbiAgICBpZiAoc3RvcE9yZGVyUmVzcG9uc2UxLmRlYWxTdGF0dXMgPT09IFwiUkVKRUNURURcIiB8fCBzdG9wT3JkZXJSZXNwb25zZTIuZGVhbFN0YXR1cyA9PT0gXCJSRUpFQ1RFRFwiKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiT1JERVIgUkVKRUNURURcIilcbiAgICAgIGF3YWl0IGNsb3NlQWN0aXZpdHkoY2xpZW50LCBhY2NvdW50RGF0YSwgYWN0aXZpdGllcy5lcGljKVxuXG4gICAgICBjb25zdCBjcm9zc0xpc3QgPSB7XG4gICAgICAgIGFjdGl2aXRpZXM6IHRydWUsXG4gICAgICAgIGVwaWM6IGFjdGl2aXRpZXMuZXBpYyxcbiAgICAgICAgaW5zdHJ1bWVudDogYWN0aXZpdGllcy5jb25maWcuaW5zdHJ1bWVudE5hbWUsXG4gICAgICAgIGN1cnJlbmNpZXM6IGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsXG4gICAgICAgIHNjYWxpbmdGYWN0b3I6IGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3IsXG4gICAgICAgIHBlcmNlbnRhZ2U6IGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UsXG4gICAgICAgIGNvbnRyYWN0czogYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHN0ZXAwKGFjY291bnREYXRhLCBbY3Jvc3NMaXN0XSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQ2hpdXN1cmEgcG9zaXppb25pIGFwZXJ0ZVxuICAgIGlmKGFjdGl2aXRpZXMucG9zaXRpb25zLmxlbmd0aCA+IDAgKSB7XG4gICAgICBsZXQgdG90YWxQTCA9IDBcbiAgICAgIGNvbnNvbGUuZ3JvdXAoXCJDaGl1c3VyYSBwb3NpemlvbmlcIilcbiAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgYWN0aXZpdGllcy5wb3NpdGlvbnMpe1xuICAgICAgICBjb25zdCByZXNwb25zZUNsb3NlUG9zaXRpb24gPSBhd2FpdCBjbG9zZVBvc2l0aW9uKGNsaWVudCwgcG9zaXRpb24uZGVhbElkLCBwb3NpdGlvbi5kaXJlY3Rpb24sIHBvc2l0aW9uLnNpemUsIGZhbHNlKVxuICAgICAgICB0b3RhbFBMICs9IHJlc3BvbnNlQ2xvc2VQb3NpdGlvbi5wcm9maXRcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwidG90YWwgUExcIiwgdG90YWxQTClcbiAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgIH1cblxuICAgIC8vIENoaXVkbyBsJ29yZGluZSBub24gZXNlZ3VpdG9cbiAgICBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmRlbGV0ZU9yZGVyKHJlZk9yZGVyLmRlYWxJZClcblxuICAgIGNvbnN0IG9yZGVycyA9IFt7XG4gICAgICBkZWFsSWQ6IHN0b3BPcmRlclJlc3BvbnNlMS5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBzdG9wT3JkZXJSZXNwb25zZTEuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UxLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IHN0b3BPcmRlclJlc3BvbnNlMS5zaXplLFxuICAgICAgbGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMS5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTFcIlxuICAgIH0sIHtcbiAgICAgIGRlYWxJZDogc3RvcE9yZGVyUmVzcG9uc2UyLmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IHN0b3BPcmRlclJlc3BvbnNlMi5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBzdG9wT3JkZXJSZXNwb25zZTIuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogc3RvcE9yZGVyUmVzcG9uc2UyLnNpemUsXG4gICAgICBsZXZlbDogc3RvcE9yZGVyUmVzcG9uc2UyLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogc3RvcE9yZGVyUmVzcG9uc2UyLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogXCJBMlwiXG4gICAgfV1cblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFt7XG4gICAgICBkZWFsSWQ6IGV2ZW50LmRlYWxJZCxcbiAgICAgIGRlYWxSZWZlcmVuY2U6IGV2ZW50LmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IGV2ZW50LmRpcmVjdGlvbixcbiAgICAgIHNpemU6IGV2ZW50LnNpemUsXG4gICAgICBsZXZlbDogZXZlbnQubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBldmVudC5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IG51bGxcbiAgICB9XVxuXG4gICAgYXdhaXQgbmV3SWdBY3Rpdml0eShhY2NvdW50RGF0YSwgJ0ExJywgYWN0aXZpdGllcy5lcGljLCBhY3Rpdml0aWVzLmNvbmZpZywgb3JkZXJzLCBwb3NpdGlvbnMpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwic3RlcDEgZXJyb3JcIiwgZSlcbiAgfVxufVxuXG5jb25zdCBzdGVwMiA9IGFzeW5jIChhY3Rpdml0aWVzLCBhY2NvdW50RGF0YSwgZXZlbnQpID0+IHtcbiAgLy8gQ2VyY28gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gIGNvbnN0IHJlZk9yZGVyID0gYWN0aXZpdGllcy5vcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5kZWFsSWQgIT09IGV2ZW50LmRlYWxJZClcblxuICAvLyBDcmVvIHVuYSBzZXNzaW9uZSBpZ1xuICBjb25zdCBjbGllbnQgPSBuZXcgQVBJQ2xpZW50KEFQSUNsaWVudC5VUkxfREVNTywgYWNjb3VudERhdGEuYXBpS2V5KTtcbiAgYXdhaXQgY2xpZW50LnJlc3QubG9naW4uY3JlYXRlU2Vzc2lvbihhY2NvdW50RGF0YS51c2VybmFtZSwgYWNjb3VudERhdGEucGFzc3dvcmQpO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG5cbiAgICAvLyBEZWZpbmlzY28gaSBsaXZlbGxpIGRpIHByZXp6byBwZXIgZ2xpIG9yZGluaSBzdG9wXG4gICAgY29uc3QgbGV2ZWxTdG9wMSA9IGV2ZW50LmRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IGV2ZW50LmxldmVsK3BpcCA6IGV2ZW50LmxldmVsLXBpcFxuICAgIGNvbnN0IGxldmVsU3RvcDIgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiQlVZXCIgPyBldmVudC5sZXZlbC1waXAgOiBldmVudC5sZXZlbCtwaXBcblxuICAgIC8vIEFwcm8gaSBudW92aSBvcmRpbmlcbiAgICBjb25zb2xlLmdyb3VwKFwiTnVvdmkgT3JkaW5pXCIpXG4gICAgY29uc3Qgc3RvcE9yZGVyUmVzcG9uc2UxID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFN0b3AxLCBcIlNUT1BcIiwgYWN0aXZpdGllcy5jb25maWcuY3VycmVuY2llcywgbnVsbCwgbnVsbClcbiAgICBjb25zb2xlLmxvZyhcInN0b3BPcmRlclJlc3BvbnNlMSBkZWFsU3RhdHVzOiBcIiwgc3RvcE9yZGVyUmVzcG9uc2UxLmRlYWxTdGF0dXMpXG5cbiAgICBjb25zdCBzdG9wT3JkZXJSZXNwb25zZTIgPSBhd2FpdCBuZXdPcmRlcihjbGllbnQsIGFjdGl2aXRpZXMuZXBpYywgZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gXCJTRUxMXCIgOiBcIkJVWVwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jb250cmFjdHMsIGxldmVsU3RvcDIsIFwiU1RPUFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2UyIGRlYWxTdGF0dXM6IFwiLCBzdG9wT3JkZXJSZXNwb25zZTIuZGVhbFN0YXR1cylcbiAgICBjb25zb2xlLmdyb3VwRW5kKClcblxuICAgIC8vIHNlIHVubyBkZWkgZHVlIG9yZGluaSBub24gdmllbmUgZXNlZ3VpdG8sIGNoaXVkbyBwb3NpemlvbmkgZWQgb3JkaW5pLCBxdWluaSByaWFwcm8gZGFsbGEgcG9zaXppb25lIEEwXG4gICAgaWYgKHN0b3BPcmRlclJlc3BvbnNlMS5kZWFsU3RhdHVzID09PSBcIlJFSkVDVEVEXCIgfHwgc3RvcE9yZGVyUmVzcG9uc2UyLmRlYWxTdGF0dXMgPT09IFwiUkVKRUNURURcIil7XG4gICAgICBjb25zb2xlLmVycm9yKFwiT1JERVIgUkVKRUNURURcIilcbiAgICAgIGF3YWl0IGNsb3NlQWN0aXZpdHkoY2xpZW50LCBhY2NvdW50RGF0YSwgYWN0aXZpdGllcy5lcGljKVxuXG4gICAgICBjb25zdCBjcm9zc0xpc3QgPSB7XG4gICAgICAgIGFjdGl2aXRpZXM6IHRydWUsXG4gICAgICAgIGVwaWM6IGFjdGl2aXRpZXMuZXBpYyxcbiAgICAgICAgaW5zdHJ1bWVudDogYWN0aXZpdGllcy5jb25maWcuaW5zdHJ1bWVudE5hbWUsXG4gICAgICAgIGN1cnJlbmNpZXM6IGFjdGl2aXRpZXMuY29uZmlnLmN1cnJlbmNpZXMsXG4gICAgICAgIHNjYWxpbmdGYWN0b3I6IGFjdGl2aXRpZXMuY29uZmlnLnNjYWxpbmdGYWN0b3IsXG4gICAgICAgIHBlcmNlbnRhZ2U6IGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UsXG4gICAgICAgIGNvbnRyYWN0czogYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHN0ZXAwKGFjY291bnREYXRhLCBbY3Jvc3NMaXN0XSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gY2hpdWRvIHR1dHRlIGxlIHBvc2l6aW9uaSBhcGVydGVcbiAgICBpZihhY3Rpdml0aWVzLnBvc2l0aW9ucy5sZW5ndGggPiAwICkge1xuICAgICAgbGV0IHRvdGFsUEwgPSAwXG4gICAgICBjb25zb2xlLmdyb3VwKFwiQ2hpdXN1cmEgcG9zaXppb25pXCIpXG4gICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIGFjdGl2aXRpZXMucG9zaXRpb25zKXtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VDbG9zZVBvc2l0aW9uID0gYXdhaXQgY2xvc2VQb3NpdGlvbihjbGllbnQsIHBvc2l0aW9uLmRlYWxJZCwgcG9zaXRpb24uZGlyZWN0aW9uLCBwb3NpdGlvbi5zaXplLCBmYWxzZSlcbiAgICAgICAgdG90YWxQTCArPSByZXNwb25zZUNsb3NlUG9zaXRpb24ucHJvZml0XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcInRvdGFsIFBMXCIsIHRvdGFsUEwpXG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICB9XG5cbiAgICAvLyBDaGl1ZG8gbCdvcmRpbmUgbm9uIGVzZWd1aXRvXG4gICAgYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5kZWxldGVPcmRlcihyZWZPcmRlci5kZWFsSWQpXG5cbiAgICBjb25zdCBvcmRlcnMgPSBbe1xuICAgICAgZGVhbElkOiBzdG9wT3JkZXJSZXNwb25zZTEuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogc3RvcE9yZGVyUmVzcG9uc2UxLmRlYWxSZWZlcmVuY2UsXG4gICAgICBkaXJlY3Rpb246IHN0b3BPcmRlclJlc3BvbnNlMS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBzdG9wT3JkZXJSZXNwb25zZTEuc2l6ZSxcbiAgICAgIGxldmVsOiBzdG9wT3JkZXJSZXNwb25zZTEubGV2ZWwsXG4gICAgICBsaW1pdExldmVsOiBzdG9wT3JkZXJSZXNwb25zZTEubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkExXCJcbiAgICB9LCB7XG4gICAgICBkZWFsSWQ6IHN0b3BPcmRlclJlc3BvbnNlMi5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBzdG9wT3JkZXJSZXNwb25zZTIuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogc3RvcE9yZGVyUmVzcG9uc2UyLmRpcmVjdGlvbixcbiAgICAgIHNpemU6IHN0b3BPcmRlclJlc3BvbnNlMi5zaXplLFxuICAgICAgbGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMi5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlMi5saW1pdExldmVsLFxuICAgICAgbmV4dFN0ZXA6IFwiQTNcIlxuICAgIH1dXG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbe1xuICAgICAgZGVhbElkOiBldmVudC5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBldmVudC5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBldmVudC5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBldmVudC5zaXplLFxuICAgICAgbGV2ZWw6IGV2ZW50LmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogZXZlbnQubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBudWxsXG4gICAgfV1cblxuICAgIGF3YWl0IG5ld0lnQWN0aXZpdHkoYWNjb3VudERhdGEsICdBMicsIGFjdGl2aXRpZXMuZXBpYywgYWN0aXZpdGllcy5jb25maWcsIG9yZGVycywgcG9zaXRpb25zKVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcInN0ZXAyIGVycm9yXCIsIGUpXG4gIH1cbn1cblxuY29uc3Qgc3RlcDMgPSBhc3luYyAoYWN0aXZpdGllcywgYWNjb3VudERhdGEsIGV2ZW50KSA9PiB7XG4gIC8vIENlcmNvIGwnb3JkaW5lIG5vbiBlc2VndWl0b1xuICBjb25zdCByZWZPcmRlciA9IGFjdGl2aXRpZXMub3JkZXJzLmZpbmQob3JkZXIgPT4gb3JkZXIuZGVhbElkICE9PSBldmVudC5kZWFsSWQpXG5cbiAgLy8gQ3JlbyB1bmEgc2Vzc2lvbmUgaWdcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFQSUNsaWVudChBUElDbGllbnQuVVJMX0RFTU8sIGFjY291bnREYXRhLmFwaUtleSk7XG4gIGF3YWl0IGNsaWVudC5yZXN0LmxvZ2luLmNyZWF0ZVNlc3Npb24oYWNjb3VudERhdGEudXNlcm5hbWUsIGFjY291bnREYXRhLnBhc3N3b3JkKTtcblxuICB0cnkge1xuICAgIC8vIENoaXVkbyBsJ29yZGluZSBub24gZXNlZ3VpdG9cbiAgICAvL2F3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZGVsZXRlT3JkZXIocmVmT3JkZXIuZGVhbElkKVxuXG4gICAgLy8gQ2FsY29sbyBsYSBkaXN0YW56YSBpbiBwaXAgZGF0YSBsYSBjb25maWd1cmF6aW9uZSBkZWwgY3Jvc3NcbiAgICBjb25zdCBwaXAgPSBNYXRoLnJvdW5kKGV2ZW50LmxldmVsICogKGFjdGl2aXRpZXMuY29uZmlnLnBlcmNlbnRhZ2UgLyAxMDApICogYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvcikgL1xuICAgICAgYWN0aXZpdGllcy5jb25maWcuc2NhbGluZ0ZhY3RvclxuXG4gICAgLy8gRGVmaW5pc2NvIGkgbGl2ZWxsaSBkaSBwcmV6em8gcGVyIGwnb3JkaW5lIFNUT1BcbiAgICBjb25zdCBsZXZlbFN0b3AgPSBldmVudC5kaXJlY3Rpb24gPT09IFwiU0VMTFwiID8gZXZlbnQubGV2ZWwtcGlwIDogZXZlbnQubGV2ZWwrcGlwXG4gICAgLy9jb25zdCBsZXZlbFN0b3AyID0gZXZlbnQuZGlyZWN0aW9uID09PSBcIkJVWVwiID8gYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0ubGV2ZWwrcGlwIDogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0ubGV2ZWwtcGlwXG5cbiAgICAvLyBBcHJvIGkgbnVvdmkgb3JkaW5pXG4gICAgY29uc29sZS5ncm91cChcIk51b3ZpIE9yZGluaVwiKVxuICAgIGNvbnN0IHN0b3BPcmRlclJlc3BvbnNlID0gYXdhaXQgbmV3T3JkZXIoY2xpZW50LCBhY3Rpdml0aWVzLmVwaWMsIGV2ZW50LmRpcmVjdGlvbiwgYWN0aXZpdGllcy5jb25maWcuY29udHJhY3RzLCBsZXZlbFN0b3AsIFwiU1RPUFwiLCBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLCBudWxsLCBudWxsKVxuICAgIGNvbnNvbGUubG9nKFwic3RvcE9yZGVyUmVzcG9uc2UgZGVhbFN0YXR1czogXCIsIHN0b3BPcmRlclJlc3BvbnNlLmRlYWxTdGF0dXMpXG5cbiAgICAvLyBzZSB1bm8gZGVpIGR1ZSBvcmRpbmkgbm9uIHZpZW5lIGVzZWd1aXRvLCBjaGl1ZG8gcG9zaXppb25pIGVkIG9yZGluaSwgcXVpbmkgcmlhcHJvIGRhbGxhIHBvc2l6aW9uZSBBMFxuICAgIGlmIChzdG9wT3JkZXJSZXNwb25zZS5kZWFsU3RhdHVzID09PSBcIlJFSkVDVEVEXCIpe1xuICAgICAgY29uc29sZS5lcnJvcihcIk9SREVSIFJFSkVDVEVEXCIpXG4gICAgICBhd2FpdCBjbG9zZUFjdGl2aXR5KGNsaWVudCwgYWNjb3VudERhdGEsIGFjdGl2aXRpZXMuZXBpYylcblxuICAgICAgY29uc3QgY3Jvc3NMaXN0ID0ge1xuICAgICAgICBhY3Rpdml0aWVzOiB0cnVlLFxuICAgICAgICBlcGljOiBhY3Rpdml0aWVzLmVwaWMsXG4gICAgICAgIGluc3RydW1lbnQ6IGFjdGl2aXRpZXMuY29uZmlnLmluc3RydW1lbnROYW1lLFxuICAgICAgICBjdXJyZW5jaWVzOiBhY3Rpdml0aWVzLmNvbmZpZy5jdXJyZW5jaWVzLFxuICAgICAgICBzY2FsaW5nRmFjdG9yOiBhY3Rpdml0aWVzLmNvbmZpZy5zY2FsaW5nRmFjdG9yLFxuICAgICAgICBwZXJjZW50YWdlOiBhY3Rpdml0aWVzLmNvbmZpZy5wZXJjZW50YWdlLFxuICAgICAgICBjb250cmFjdHM6IGFjdGl2aXRpZXMuY29uZmlnLmNvbnRyYWN0c1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBzdGVwMChhY2NvdW50RGF0YSwgW2Nyb3NzTGlzdF0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IG9yZGVycyA9IFtyZWZPcmRlciwge1xuICAgICAgZGVhbElkOiBzdG9wT3JkZXJSZXNwb25zZS5kZWFsSWQsXG4gICAgICBkZWFsUmVmZXJlbmNlOiBzdG9wT3JkZXJSZXNwb25zZS5kZWFsUmVmZXJlbmNlLFxuICAgICAgZGlyZWN0aW9uOiBzdG9wT3JkZXJSZXNwb25zZS5kaXJlY3Rpb24sXG4gICAgICBzaXplOiBzdG9wT3JkZXJSZXNwb25zZS5zaXplLFxuICAgICAgbGV2ZWw6IHN0b3BPcmRlclJlc3BvbnNlLmxldmVsLFxuICAgICAgbGltaXRMZXZlbDogc3RvcE9yZGVyUmVzcG9uc2UubGltaXRMZXZlbCxcbiAgICAgIG5leHRTdGVwOiBcIkExXCJcbiAgICB9XVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gW3tcbiAgICAgIGRlYWxJZDogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogYWN0aXZpdGllcy5wb3NpdGlvbnNbMF0uc2l6ZSxcbiAgICAgIGxldmVsOiBhY3Rpdml0aWVzLnBvc2l0aW9uc1swXS5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGFjdGl2aXRpZXMucG9zaXRpb25zWzBdLmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH0sIHtcbiAgICAgIGRlYWxJZDogZXZlbnQuZGVhbElkLFxuICAgICAgZGVhbFJlZmVyZW5jZTogZXZlbnQuZGVhbFJlZmVyZW5jZSxcbiAgICAgIGRpcmVjdGlvbjogZXZlbnQuZGlyZWN0aW9uLFxuICAgICAgc2l6ZTogZXZlbnQuc2l6ZSxcbiAgICAgIGxldmVsOiBldmVudC5sZXZlbCxcbiAgICAgIGxpbWl0TGV2ZWw6IGV2ZW50LmxpbWl0TGV2ZWwsXG4gICAgICBuZXh0U3RlcDogbnVsbFxuICAgIH1dXG5cbiAgICBhd2FpdCBuZXdJZ0FjdGl2aXR5KGFjY291bnREYXRhLCAnQTMnLCBhY3Rpdml0aWVzLmVwaWMsIGFjdGl2aXRpZXMuY29uZmlnLCBvcmRlcnMsIHBvc2l0aW9ucylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJzdGVwMiBlcnJvclwiLCBlKVxuICB9XG59XG5cbi8vIGZ1bnppb25lIHBlciBjcmVhcmUgdW4gbnVvdm8gb3JkaW5lIHN1IGlnXG5jb25zdCBuZXdPcmRlciA9IGFzeW5jIChjbGllbnQsIGVwaWMsIGRpcmVjdGlvbiwgc2l6ZSwgbGV2ZWwsIHR5cGUsIGN1cnJlbmN5Q29kZSwgc3RvcExldmVsLCBsaW1pdExldmVsKSA9PiB7XG4gIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICBlcGljOiBlcGljLFxuICAgIGV4cGlyeTogJy0nLFxuICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLFxuICAgIHNpemU6IHNpemUsXG4gICAgbGV2ZWw6IGxldmVsLFxuICAgIGZvcmNlT3BlbjogJ3RydWUnLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgY3VycmVuY3lDb2RlOiBjdXJyZW5jeUNvZGUsXG4gICAgdGltZUluRm9yY2U6ICdHT09EX1RJTExfQ0FOQ0VMTEVEJyxcbiAgICBnb29kVGlsbERhdGU6IG51bGwsXG4gICAgZ3VhcmFudGVlZFN0b3A6ICdmYWxzZScsXG4gICAgc3RvcExldmVsOiBzdG9wTGV2ZWwsXG4gICAgc3RvcERpc3RhbmNlOiBudWxsLFxuICAgIGxpbWl0TGV2ZWw6IGxpbWl0TGV2ZWwsXG4gICAgbGltaXREaXN0YW5jZTogbnVsbFxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWFsUmVmZXJlbmNlID0gYXdhaXQgY2xpZW50LnJlc3QuZGVhbGluZy5jcmVhdGVPcmRlcihvcmRlckRhdGEpXG4gICAgcmV0dXJuIGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY29uZmlybVRyYWRlKGRlYWxSZWZlcmVuY2UpXG4gIH1jYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJuZXdPcmRlciBlcnJvclwiLCBlKVxuICAgIHJldHVybiBlXG4gIH1cbn1cblxuLy8gZnVuemlvbmUgcGVyIGNoaXVkZXJlIHVuYSBwb3NpemlvbmUgc3UgaWdcbmV4cG9ydCBjb25zdCBjbG9zZVBvc2l0aW9uID0gYXN5bmMgKGNsaWVudCwgZGVhbElkLCBkaXJlY3Rpb24sIHNpemUsIHBhcnRpYWwpID0+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBkZWFsSWQ6IGRlYWxJZCxcbiAgICBlcGljOiBudWxsLFxuICAgIGV4cGlyeTogbnVsbCxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvbiA9PT0gXCJCVVlcIiA/IFwiU0VMTFwiIDogXCJCVVlcIixcbiAgICBzaXplOiBwYXJ0aWFsID8gc2l6ZS8yIDogc2l6ZSxcbiAgICBsZXZlbDogbnVsbCxcbiAgICBvcmRlclR5cGU6IFwiTUFSS0VUXCIsXG4gICAgdGltZUluRm9yY2U6IFwiRVhFQ1VURV9BTkRfRUxJTUlOQVRFXCIsXG4gICAgcXVvdGVJZDogbnVsbFxuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgZGVhbFJlZmVyZW5jZSA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuY2xvc2VQb3NpdGlvbihkYXRhKVxuICAgIHJldHVybiBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmNvbmZpcm1UcmFkZShkZWFsUmVmZXJlbmNlKVxuICB9Y2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiY2xvc2VQb3NpdGlvbiBlcnJvclwiLCBlKVxuICAgIHJldHVybiBlXG4gIH1cbn1cblxuLy8gZnVuemlvbmUgcGVyIGNoaXVkZXJlIHR1dHRpIGdsaSBvcmRpbmkgZSBsZSBwb3NpemlvbmkgYXBlcnRlIHJlbGF0aXZlIGFkIHVubyBzcGVjaWZpY28gY29yc3Mgc3UgaWdcbmNvbnN0IGNsb3NlQWN0aXZpdHkgPSBhc3luYyAoY2xpZW50LCBhY2NvdW50RGF0YSwgZXBpYykgPT4ge1xuICBjb25zdCBhbGxPcmRlcnMgPSBhd2FpdCBjbGllbnQucmVzdC5kZWFsaW5nLmdldEFsbE9yZGVycygpXG4gIGNvbnN0IGFsbFBvc2l0aW9ucyA9IGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZ2V0QWxsT3BlblBvc2l0aW9ucygpXG5cbiAgbGV0IG9yZGVyc1RvRGVsZXRlID0gYWxsT3JkZXJzLndvcmtpbmdPcmRlcnMuZmlsdGVyKHJvdz0+IHJvdy53b3JraW5nT3JkZXJEYXRhLmVwaWMgPT09IGVwaWMpO1xuICBsZXQgcG9zaXRpb25zVG9EZWxldGUgPSBhbGxQb3NpdGlvbnMucG9zaXRpb25zLmZpbHRlcihyb3c9PiByb3cubWFya2V0LmVwaWMgPT09IGVwaWMpO1xuXG4gIGZvciAoY29uc3Qgb3JkZXIgb2Ygb3JkZXJzVG9EZWxldGUpe1xuICAgIGF3YWl0IGNsaWVudC5yZXN0LmRlYWxpbmcuZGVsZXRlT3JkZXIob3JkZXIud29ya2luZ09yZGVyRGF0YS5kZWFsSWQpXG4gIH1cblxuICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9uc1RvRGVsZXRlKXtcbiAgICBhd2FpdCBjbG9zZVBvc2l0aW9uKGNsaWVudCwgcG9zaXRpb24ucG9zaXRpb24uZGVhbElkLCBwb3NpdGlvbi5wb3NpdGlvbi5kaXJlY3Rpb24sIHBvc2l0aW9uLnBvc2l0aW9uLnNpemUsIGZhbHNlKVxuICB9XG5cbiAgYXdhaXQgZGVsZXRlSWdBY3Rpdml0eShhY2NvdW50RGF0YSwgZXBpYylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlnU2Vzc2lvbixcbiAgbmV3T3JkZXIsXG4gIHN0ZXAwLFxuICBzdGVwMSxcbiAgc3RlcDIsXG4gIHN0ZXAzXG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQXlHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrQ0FGekc7QUFBQTtBQUFBO0FBSUEsSUFBTUEsT0FBTyxHQUFHLHNDQUFzQztBQUV0RCxJQUFNQyxTQUFTO0VBQUEsc0VBQUcsaUJBQU9DLFVBQVUsRUFBRUMsUUFBUSxFQUFFQyxNQUFNO0lBQUE7SUFBQTtNQUFBO1FBQUE7VUFBQTtVQUFBLE9BQzVCQyxpQkFBSyxDQUN6QkMsSUFBSSxDQUFDTixPQUFPLEdBQUMsVUFBVSxFQUFFO1lBQ3hCRSxVQUFV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","map":{"version":3,"names":["baseURL","igSession","identifier","password","apiKey","axios","post","headers","response","accountId","data","currentAccountId","clientId","lightstreamerEndpoint","cst","xSecurityToken","error","step0","accountData","crossList","client","APIClient","URL_DEMO","rest","login","createSession","username","epicArray","cross","push","epic","market","getMarketDetails","marketDetails","crossConfig","find","instrument","averagePrice","snapshot","bid","offer","toFixed","scalingFactor","toString","length","pip","Math","round","percentage","newOrder","contracts","currencies","buyOrderResponse","sellOrderResponse","orders","dealId","dealReference","direction","size","level","limitLevel","nextStep","newIgActivity","console","log","step1","activities","event","refOrder","order","config","pipTP","levelStop1","levelStop2","group","stopOrderResponse1","dealStatus","stopOrderResponse2","groupEnd","closeActivity","instrumentName","positions","totalPL","position","closePosition","responseClosePosition","profit","dealing","deleteOrder","step2","step3","levelStop","stopOrderResponse","type","currencyCode","stopLevel","orderData","expiry","forceOpen","timeInForce","goodTillDate","guaranteedStop","stopDistance","limitDistance","createOrder","confirmTrade","partial","orderType","quoteId","getAllOrders","allOrders","getAllOpenPositions","allPositions","ordersToDelete","workingOrders","filter","row","workingOrderData","positionsToDelete","deleteIgActivity","module","exports"],"sourceRoot":"/Users/sviluppo/Documents/Sviluppo Javascript/fxBackV1/lib/","sources":["restV3.js"],"sourcesContent":["import axios from \"axios\";\nimport {APIClient} from \"ig-trading-api\";\nimport {deleteIgActivity, getIgActivities, newIgActivity} from \"./mongoDB\";\nimport {Direction, PositionOrderType, PositionTimeInForce} from \"ig-trading-api/dist/dealing/DealingAPI\";\n\nconst baseURL = \"https://demo-api.ig.com/gateway/deal\"\n\nconst igSession = async (identifier, password, apiKey) => {\n  const response = await axios\n    .post(baseURL+'/session', {\n      identifier,\n      password\n    }, {headers: {'Content-Type': 'application/json; charset=UTF-8', 'X-IG-API-KEY': `${apiKey}`, 'Version': 2}})\n\n  if (response) {\n    return {\n      accountId: response.data.currentAccountId,\n      clientId: response.data.clientId,\n      lightstreamerEndpoint: response.data.lightstreamerEndpoint,\n      cst: response.headers.cst,\n      xSecurityToken: response.headers['x-security-token']\n    }\n  }\n\n  return {error: \"session error\"}\n}\n\n/**\n * Fase 0\n *\n * Apertura di due ordini di segno opposto al prezzo di mercato +- x pip di distanza\n * */\nconst step0 = async (accountData, crossList) =>{\n  // apro una nuova sessione\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  const epicArray = []\n  // inizializzo un array contenente tutti i riferimenti a i cross di cui recuperare le info di mercato da ig\n  for (const cross of crossList){\n    // creo un array contenente solo gli epic, così da fare una chiamata unica\n    epicArray.push(cross.epic)\n  }\n\n  //recupero il dettaglio di tutti i cross\n  const marketDetails = await client.rest.market.getMarketDetails(epicArray)\n\n  //Per ogni cross apro la poosizione A0\n  for (const market of marketDetails.marketDetails){\n    try {\n      const crossConfig = crossList.find(cross => cross.epic === market.instrument.epic)\n\n      // calcolo il prezzo medio tra bid e offer\n      const averagePrice = +((market.snapshot.bid + market.snapshot.offer) / 2).toFixed(\n        market.snapshot.scalingFactor.toString().length,\n      )\n\n      // calcolo la distanza in pip sulla base della variazione % indicata dall'utente\n      const pip = Math.round(averagePrice * (crossConfig.percentage / 100) * market.snapshot.scalingFactor) /\n        market.snapshot.scalingFactor\n\n      // Apro i nuovi ordini\n      const buyOrderResponse = await newOrder(client, crossConfig.epic, \"BUY\", crossConfig.contracts, averagePrice+(pip/2), \"STOP\", crossConfig.currencies, null, null)\n      const sellOrderResponse = await newOrder(client, crossConfig.epic, \"SELL\", crossConfig.contracts, averagePrice-(pip/2), \"STOP\", crossConfig.currencies, null, null)\n\n      const orders = [{\n        dealId: buyOrderResponse.dealId,\n        dealReference: buyOrderResponse.dealReference,\n        direction: buyOrderResponse.direction,\n        size: buyOrderResponse.size,\n        level: buyOrderResponse.level,\n        limitLevel: buyOrderResponse.limitLevel,\n        nextStep: \"A1\"\n      }, {\n        dealId: sellOrderResponse.dealId,\n        dealReference: sellOrderResponse.dealReference,\n        direction: sellOrderResponse.direction,\n        size: sellOrderResponse.size,\n        level: sellOrderResponse.level,\n        limitLevel: sellOrderResponse.limitLevel,\n        nextStep: \"A1\"\n      }]\n\n      // aggiorno il database con una copia dello stato di ig, configurazioni relative al cross e alla fase da eseguire\n      return await newIgActivity(accountData, 'A0', crossConfig.epic, crossConfig, orders, [])\n    }catch (e) {\n      console.log(\"step 0 error\", e)\n    }\n  }\n}\n\nconst step1 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    const pipTP = Math.round(event.level * (0.25 / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP e LIMIT\n    const levelStop1 = event.direction === \"BUY\" ? event.level+pipTP : event.level-pipTP\n    const levelStop2 = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse1 = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus)\n\n    const stopOrderResponse2 = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop2, \"LIMIT\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus)\n    console.groupEnd()\n\n    // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n    if (stopOrderResponse1.dealStatus === \"REJECTED\" || stopOrderResponse2.dealStatus === \"REJECTED\"){\n      console.log(\"ORDER REJECTED\")\n      await closeActivity(client, accountData, activities.epic)\n\n      const crossList = {\n        activities: true,\n        epic: activities.epic,\n        instrument: activities.config.instrumentName,\n        currencies: activities.config.currencies,\n        scalingFactor: activities.config.scalingFactor,\n        percentage: activities.config.percentage,\n        contracts: activities.config.contracts\n      }\n\n      await step0(accountData, [crossList])\n      return null\n    }\n\n    // Chiusura posizioni aperte\n    if(activities.positions.length > 0 ) {\n      let totalPL = 0\n      console.group(\"Chiusura posizioni\")\n      for (const position of activities.positions){\n        const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n        totalPL += responseClosePosition.profit\n      }\n      console.log(\"total PL\", totalPL)\n      console.groupEnd()\n    }\n\n    // Chiudo l'ordine non eseguito\n    await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    const orders = [{\n      dealId: stopOrderResponse1.dealId,\n      dealReference: stopOrderResponse1.dealReference,\n      direction: stopOrderResponse1.direction,\n      size: stopOrderResponse1.size,\n      level: stopOrderResponse1.level,\n      limitLevel: stopOrderResponse1.limitLevel,\n      nextStep: \"A1\"\n    }, {\n      dealId: stopOrderResponse2.dealId,\n      dealReference: stopOrderResponse2.dealReference,\n      direction: stopOrderResponse2.direction,\n      size: stopOrderResponse2.size,\n      level: stopOrderResponse2.level,\n      limitLevel: stopOrderResponse2.limitLevel,\n      nextStep: \"A2\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    await newIgActivity(accountData, 'A1', activities.epic, activities.config, orders, positions)\n  } catch (e) {\n    console.error(\"step1 error\", e)\n  }\n}\n\nconst step2 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n\n    // Definisco i livelli di prezzo per gli ordini stop\n    const levelStop1 = event.direction === \"BUY\" ? event.level+pip : event.level-pip\n    const levelStop2 = event.direction === \"BUY\" ? event.level-pip : event.level+pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse1 = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop1, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse1 dealStatus: \", stopOrderResponse1.dealStatus)\n\n    const stopOrderResponse2 = await newOrder(client, activities.epic, event.direction === \"BUY\" ? \"SELL\" : \"BUY\", activities.config.contracts, levelStop2, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse2 dealStatus: \", stopOrderResponse2.dealStatus)\n    console.groupEnd()\n\n    // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n    if (stopOrderResponse1.dealStatus === \"REJECTED\" || stopOrderResponse2.dealStatus === \"REJECTED\"){\n      console.error(\"ORDER REJECTED\")\n      await closeActivity(client, accountData, activities.epic)\n\n      const crossList = {\n        activities: true,\n        epic: activities.epic,\n        instrument: activities.config.instrumentName,\n        currencies: activities.config.currencies,\n        scalingFactor: activities.config.scalingFactor,\n        percentage: activities.config.percentage,\n        contracts: activities.config.contracts\n      }\n\n      await step0(accountData, [crossList])\n      return null\n    }\n\n    // chiudo tutte le posizioni aperte\n    if(activities.positions.length > 0 ) {\n      let totalPL = 0\n      console.group(\"Chiusura posizioni\")\n      for (const position of activities.positions){\n        const responseClosePosition = await closePosition(client, position.dealId, position.direction, position.size, false)\n        totalPL += responseClosePosition.profit\n      }\n      console.log(\"total PL\", totalPL)\n      console.groupEnd()\n    }\n\n    // Chiudo l'ordine non eseguito\n    await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    const orders = [{\n      dealId: stopOrderResponse1.dealId,\n      dealReference: stopOrderResponse1.dealReference,\n      direction: stopOrderResponse1.direction,\n      size: stopOrderResponse1.size,\n      level: stopOrderResponse1.level,\n      limitLevel: stopOrderResponse1.limitLevel,\n      nextStep: \"A1\"\n    }, {\n      dealId: stopOrderResponse2.dealId,\n      dealReference: stopOrderResponse2.dealReference,\n      direction: stopOrderResponse2.direction,\n      size: stopOrderResponse2.size,\n      level: stopOrderResponse2.level,\n      limitLevel: stopOrderResponse2.limitLevel,\n      nextStep: \"A3\"\n    }]\n\n    const positions = [{\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    await newIgActivity(accountData, 'A2', activities.epic, activities.config, orders, positions)\n  } catch (e) {\n    console.error(\"step2 error\", e)\n  }\n}\n\nconst step3 = async (activities, accountData, event) => {\n  // Cerco l'ordine non eseguito\n  const refOrder = activities.orders.find(order => order.dealId !== event.dealId)\n\n  // Creo una sessione ig\n  const client = new APIClient(APIClient.URL_DEMO, accountData.apiKey);\n  await client.rest.login.createSession(accountData.username, accountData.password);\n\n  try {\n    // Chiudo l'ordine non eseguito\n    //await client.rest.dealing.deleteOrder(refOrder.dealId)\n\n    // Calcolo la distanza in pip data la configurazione del cross\n    const pip = Math.round(event.level * (activities.config.percentage / 100) * activities.config.scalingFactor) /\n      activities.config.scalingFactor\n\n    // Definisco i livelli di prezzo per l'ordine STOP\n    const levelStop = event.direction === \"SELL\" ? event.level-pip : event.level+pip\n    //const levelStop2 = event.direction === \"BUY\" ? activities.positions[0].level+pip : activities.positions[0].level-pip\n\n    // Apro i nuovi ordini\n    console.group(\"Nuovi Ordini\")\n    const stopOrderResponse = await newOrder(client, activities.epic, event.direction, activities.config.contracts, levelStop, \"STOP\", activities.config.currencies, null, null)\n    console.log(\"stopOrderResponse dealStatus: \", stopOrderResponse.dealStatus)\n\n    // se uno dei due ordini non viene eseguito, chiudo posizioni ed ordini, quini riapro dalla posizione A0\n    if (stopOrderResponse.dealStatus === \"REJECTED\"){\n      console.error(\"ORDER REJECTED\")\n      await closeActivity(client, accountData, activities.epic)\n\n      const crossList = {\n        activities: true,\n        epic: activities.epic,\n        instrument: activities.config.instrumentName,\n        currencies: activities.config.currencies,\n        scalingFactor: activities.config.scalingFactor,\n        percentage: activities.config.percentage,\n        contracts: activities.config.contracts\n      }\n\n      await step0(accountData, [crossList])\n      return null\n    }\n\n    const orders = [refOrder, {\n      dealId: stopOrderResponse.dealId,\n      dealReference: stopOrderResponse.dealReference,\n      direction: stopOrderResponse.direction,\n      size: stopOrderResponse.size,\n      level: stopOrderResponse.level,\n      limitLevel: stopOrderResponse.limitLevel,\n      nextStep: \"A1\"\n    }]\n\n    const positions = [{\n      dealId: activities.positions[0].dealId,\n      dealReference: activities.positions[0].dealReference,\n      direction: activities.positions[0].direction,\n      size: activities.positions[0].size,\n      level: activities.positions[0].level,\n      limitLevel: activities.positions[0].limitLevel,\n      nextStep: null\n    }, {\n      dealId: event.dealId,\n      dealReference: event.dealReference,\n      direction: event.direction,\n      size: event.size,\n      level: event.level,\n      limitLevel: event.limitLevel,\n      nextStep: null\n    }]\n\n    await newIgActivity(accountData, 'A3', activities.epic, activities.config, orders, positions)\n  } catch (e) {\n    console.error(\"step2 error\", e)\n  }\n}\n\n// funzione per creare un nuovo ordine su ig\nconst newOrder = async (client, epic, direction, size, level, type, currencyCode, stopLevel, limitLevel) => {\n  const orderData = {\n    epic: epic,\n    expiry: '-',\n    direction: direction,\n    size: size,\n    level: level,\n    forceOpen: 'true',\n    type: type,\n    currencyCode: currencyCode,\n    timeInForce: 'GOOD_TILL_CANCELLED',\n    goodTillDate: null,\n    guaranteedStop: 'false',\n    stopLevel: stopLevel,\n    stopDistance: null,\n    limitLevel: limitLevel,\n    limitDistance: null\n  }\n\n  try {\n    const dealReference = await client.rest.dealing.createOrder(orderData)\n    return await client.rest.dealing.confirmTrade(dealReference)\n  }catch (e) {\n    console.error(\"newOrder error\", e)\n    return e\n  }\n}\n\n// funzione per chiudere una posizione su ig\nexport const closePosition = async (client, dealId, direction, size, partial) => {\n  const data = {\n    dealId: dealId,\n    epic: null,\n    expiry: null,\n    direction: direction === \"BUY\" ? \"SELL\" : \"BUY\",\n    size: partial ? size/2 : size,\n    level: null,\n    orderType: \"MARKET\",\n    timeInForce: \"EXECUTE_AND_ELIMINATE\",\n    quoteId: null\n  }\n  try {\n    const dealReference = await client.rest.dealing.closePosition(data)\n    return await client.rest.dealing.confirmTrade(dealReference)\n  }catch (e) {\n    console.error(\"closePosition error\", e)\n    return e\n  }\n}\n\n// funzione per chiudere tutti gli ordini e le posizioni aperte relative ad uno specifico corss su ig\nconst closeActivity = async (client, accountData, epic) => {\n  const allOrders = await client.rest.dealing.getAllOrders()\n  const allPositions = await client.rest.dealing.getAllOpenPositions()\n\n  let ordersToDelete = allOrders.workingOrders.filter(row=> row.workingOrderData.epic === epic);\n  let positionsToDelete = allPositions.positions.filter(row=> row.market.epic === epic);\n\n  for (const order of ordersToDelete){\n    await client.rest.dealing.deleteOrder(order.workingOrderData.dealId)\n  }\n\n  for (const position of positionsToDelete){\n    await closePosition(client, position.position.dealId, position.position.direction, position.position.size, false)\n  }\n\n  await deleteIgActivity(accountData, epic)\n}\n\nmodule.exports = {\n  igSession,\n  newOrder,\n  step0,\n  step1,\n  step2,\n  step3\n}\n"],"mappings":"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"}},"mtime":1678182974125}}